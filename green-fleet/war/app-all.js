/*
Copyright(c) 2011 HeartyOh.com
*/
Ext.define("GreenFleet.mixin.Msg",function(){var b;function a(d,e){return'<div class="msg"><h3>'+d+"</h3><p>"+e+"</p></div>"}function c(e,f){if(!b){b=Ext.core.DomHelper.insertFirst(document.body,{id:"msg-div"},true)}var f=Ext.String.format.apply(String,Array.prototype.slice.call(arguments,1));var d=Ext.core.DomHelper.append(b,a(e,f),true);d.hide();d.slideIn("t").ghost("t",{delay:1000,remove:true})}return{msg:c}}());Ext.define("GreenFleet.mixin.User",function(){var b=login.username;function a(c){if(c!==undefined){b=c}return b}return{login:{id:a,name:a}}}());Ext.define("GreenFleet.mixin.Mixin",{mixin:function(b,a){try{switch(typeof(b)){case"string":Ext.apply(Ignite,Ext.create(b,a));return;case"object":Ext.apply(Ignite,b)}}catch(c){console.log(c.stack)}}});Ext.define("GreenFleet.mixin.UI",{addDockingNav:function(a,b){var d={tabConfig:{width:29,height:22,padding:"0 0 0 2px"}};try{Ext.getCmp("docked_nav").add(Ext.create(a,Ext.merge(d,b)))}catch(c){console.log(c);console.trace()}},addSystemMenu:function(a,b){try{var d=Ext.getCmp("system_menu");var g=Ext.create(a,b);d.insert(0,g);var c=6;d.items.each(function(e){c+=e.getWidth()});d.setSize(c,d.getHeight())}catch(f){}},addContentView:function(a){this.showBusy();var b;if(typeof(a)==="string"){b=Ext.create(a,{closable:true})}else{b=a}Ext.getCmp("content").add(b).show();this.clearStatus()},setStatus:function(a){Ext.getCmp("statusbar").setStatus(a)},showBusy:function(a){Ext.getCmp("statusbar").showBusy(a)},clearStatus:function(){Ext.getCmp("statusbar").clearStatus()},doMenu:function(a){if(a.viewModel){Ext.require(a.viewModel,function(){GreenFleet.addContentView(Ext.create(a.viewModel,{title:a.text,tabConfig:{tooltip:a.tooltip},closable:true}))})}else{GreenFleet.status.set({text:"View Not Found!",iconCls:"x-status-error",clear:true})}}});Ext.define("GreenFleet.view.Viewport",{extend:"Ext.container.Viewport",layout:"border",cls:"wrap",defaults:{split:false,collapsible:false},items:[{xtype:"viewport.north",region:"north",cls:"header",height:62},{xtype:"viewport.west",region:"west",cls:"tool",width:50},{xtype:"viewport.center",region:"center"}]});Ext.define("GreenFleet.view.company.Company",{extend:"Ext.container.Container",alias:"widget.company",title:"Company",layout:{align:"stretch",type:"vbox"},initComponent:function(){Ext.applyIf(this,{items:[this.buildList(this),this.buildForm(this)],});this.callParent(arguments)},buildList:function(a){return{xtype:"gridpanel",title:"Company List",store:"CompanyStore",flex:3,columns:[{dataIndex:"key",text:"Key",hidden:true},{dataIndex:"id",text:"ID"},{dataIndex:"name",text:"Name"},{dataIndex:"createdAt",text:"Created At",xtype:"datecolumn",format:"d/m/Y"},{dataIndex:"updatedAt",text:"Updated At",xtype:"datecolumn",format:"d/m/Y"}],viewConfig:{},listeners:{render:function(b){b.store.load()},itemclick:function(c,b){var d=a.down("form");d.loadRecord(b)}},onSearch:function(c){var b=c.down("textfield[name=idFilter]");var d=c.down("textfield[name=nameFilter]");c.store.clearFilter();c.store.filter([{property:"id",value:b.getValue()},{property:"name",value:d.getValue()}])},onReset:function(b){b.down("textfield[name=idFilter]").setValue("");b.down("textfield[name=nameFilter]").setValue("")},tbar:["ID",{xtype:"textfield",name:"idFilter",hideLabel:true,width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},"NAME",{xtype:"textfield",name:"nameFilter",hideLabel:true,width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},{xtype:"button",text:"Search",tooltip:"Find Company",handler:function(){var b=this.up("gridpanel");b.onSearch(b)}},{text:"reset",handler:function(){var b=this.up("gridpanel");b.onReset(b)}}]}},buildForm:function(a){return{xtype:"form",bodyPadding:10,title:"Company Details",flex:2,items:[{xtype:"textfield",name:"key",fieldLabel:"Key",anchor:"100%",hidden:true},{xtype:"textfield",name:"id",fieldLabel:"ID",anchor:"100%"},{xtype:"textfield",name:"name",fieldLabel:"Name",anchor:"100%"},{xtype:"datefield",name:"updatedAt",disabled:true,fieldLabel:"Updated At",format:"d/m/Y",anchor:"100%"},{xtype:"datefield",name:"createdAt",disabled:true,fieldLabel:"Created At",format:"d/m/Y",anchor:"100%"}],dockedItems:[{xtype:"toolbar",dock:"bottom",layout:{align:"middle",type:"hbox"},items:[{xtype:"button",text:"Save",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"company/save",success:function(c,d){a.down("gridpanel").store.load()},failure:function(c,d){GreenFleet.msg("Failed",d.result.msg)}})}}},{xtype:"button",text:"Delete",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"company/delete",success:function(c,d){a.down("gridpanel").store.load();c.reset()},failure:function(c,d){GreenFleet.msg("Failed",d.result.msg)}})}}},{xtype:"button",text:"Reset",handler:function(){this.up("form").getForm().reset()}}]}]}}});Ext.define("GreenFleet.view.vehicle.Vehicle",{extend:"Ext.container.Container",alias:"widget.vehicle",title:"Vehicle",layout:{align:"stretch",type:"vbox"},initComponent:function(){this.callParent(arguments);this.add(this.buildList(this));this.add(this.buildForm(this))},buildList:function(a){return{xtype:"gridpanel",title:"Vehicle List",store:"VehicleStore",autoScroll:true,flex:1,columns:[{dataIndex:"key",text:"Key",type:"string",hidden:true},{dataIndex:"id",text:"Vehicle Id",type:"string"},{dataIndex:"registrationNumber",text:"RegistrationNumber",type:"string"},{dataIndex:"manufacturer",text:"Manufacturer",type:"string"},{dataIndex:"vehicleType",text:"VehicleType",type:"string"},{dataIndex:"birthYear",text:"BirthYear",type:"string"},{dataIndex:"ownershipType",text:"OwnershipType",type:"string"},{dataIndex:"status",text:"Status",type:"string"},{dataIndex:"imageClip",text:"ImageClip",type:"string"},{dataIndex:"totalDistance",text:"TotalDistance",type:"string"},{dataIndex:"remainingFuel",text:"RemainingFuel",type:"string"},{dataIndex:"distanceSinceNewOil",text:"DistanceSinceNewOil",type:"string"},{dataIndex:"engineOilStatus",text:"EngineOilStatus",type:"string"},{dataIndex:"fuelFilterStatus",text:"FuelFilterStatus",type:"string"},{dataIndex:"brakeOilStatus",text:"BrakeOilStatus",type:"string"},{dataIndex:"brakePedalStatus",text:"BrakePedalStatus",type:"string"},{dataIndex:"coolingWaterStatus",text:"CoolingWaterStatus",type:"string"},{dataIndex:"timingBeltStatus",text:"TimingBeltStatus",type:"string"},{dataIndex:"sparkPlugStatus",text:"SparkPlugStatus",type:"string"},{dataIndex:"lattitude",text:"Lattitude"},{dataIndex:"longitude",text:"Longitude"},{dataIndex:"createdAt",text:"Created At",xtype:"datecolumn",format:"d/m/Y"},{dataIndex:"updatedAt",text:"Updated At",xtype:"datecolumn",format:"d/m/Y"}],viewConfig:{},listeners:{render:function(b){b.store.load()},itemclick:function(c,b){var d=a.down("form");d.loadRecord(b)}},onSearch:function(c){var b=c.down("textfield[name=idFilter]");var d=c.down("textfield[name=nameFilter]");c.store.clearFilter();c.store.filter([{property:"id",value:b.getValue()},{property:"registrationNumber",value:d.getValue()}])},onReset:function(b){b.down("textfield[name=idFilter]").setValue("");b.down("textfield[name=nameFilter]").setValue("")},tbar:["ID",{xtype:"textfield",name:"idFilter",hideLabel:true,width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},"Registeration Number",{xtype:"textfield",name:"nameFilter",hideLabel:true,width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},{xtype:"button",text:"Search",tooltip:"Find Vehicle",handler:function(){var b=this.up("gridpanel");b.onSearch(b)}},{text:"reset",handler:function(){var b=this.up("gridpanel");b.onReset(b)}}]}},buildForm:function(a){return{xtype:"form",bodyPadding:10,title:"Vehicle Details",autoScroll:true,flex:1,items:[{xtype:"textfield",name:"key",fieldLabel:"Key",anchor:"100%",hidden:true},{xtype:"textfield",name:"id",fieldLabel:"Vehicle Id",anchor:"100%"},{xtype:"textfield",name:"registrationNumber",fieldLabel:"Registration Number",anchor:"100%"},{xtype:"combo",name:"manufacturer",queryMode:"local",store:"ManufacturerStore",displayField:"name",valueField:"name",fieldLabel:"Manufacturer",anchor:"100%"},{xtype:"combo",name:"vehicleType",queryMode:"local",store:"VehicleTypeStore",displayField:"desc",valueField:"name",fieldLabel:"Vehicle Type",anchor:"100%"},{xtype:"textfield",name:"birthYear",fieldLabel:"BirthYear",anchor:"100%"},{xtype:"combo",name:"ownershipType",queryMode:"local",store:"OwnershipStore",displayField:"desc",valueField:"name",fieldLabel:"Ownership Type",anchor:"100%"},{xtype:"combo",name:"status",queryMode:"local",store:"VehicleStatusStore",displayField:"desc",valueField:"status",fieldLabel:"Status",anchor:"100%"},{xtype:"textfield",name:"totalDistance",fieldLabel:"Total Distance",anchor:"100%"},{xtype:"textfield",name:"remainingFuel",fieldLabel:"Remaining Fuel",anchor:"100%"},{xtype:"textfield",name:"distanceSinceNewOil",fieldLabel:"Distance Since NewOil",anchor:"100%"},{xtype:"textfield",name:"engineOilStatus",fieldLabel:"EngineOil Status",anchor:"100%"},{xtype:"textfield",name:"fuelFilterStatus",fieldLabel:"FuelFilter Status",anchor:"100%"},{xtype:"textfield",name:"brakeOilStatus",fieldLabel:"BrakeOil Status",anchor:"100%"},{xtype:"textfield",name:"brakePedalStatus",fieldLabel:"BrakePedal Status",anchor:"100%"},{xtype:"textfield",name:"coolingWaterStatus",fieldLabel:"CoolingWater Status",anchor:"100%"},{xtype:"textfield",name:"timingBeltStatus",fieldLabel:"TimingBeltStatus",anchor:"100%"},{xtype:"textfield",name:"sparkPlugStatus",fieldLabel:"SparkPlugStatus",anchor:"100%"},{xtype:"textfield",name:"lattitude",fieldLabel:"Lattitude",disabled:true,anchor:"100%"},{xtype:"textfield",name:"longitude",fieldLabel:"Longitude",disabled:true,anchor:"100%"},{xtype:"datefield",name:"updatedAt",disabled:true,fieldLabel:"Updated At",format:"d/m/Y",anchor:"100%"},{xtype:"datefield",name:"createdAt",disabled:true,fieldLabel:"Created At",format:"d/m/Y",anchor:"100%"}],dockedItems:[{xtype:"toolbar",dock:"bottom",layout:{align:"middle",type:"hbox"},items:[{xtype:"button",text:"Save",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"vehicle/save",success:function(c,d){a.down("gridpanel").store.load()},failure:function(c,d){GreenFleet.msg("Failed",d.result)}})}}},{xtype:"button",text:"Delete",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"vehicle/delete",success:function(c,d){a.down("gridpanel").store.load();c.reset()},failure:function(c,d){GreenFleet.msg("Failed",d.result)}})}}},{xtype:"button",text:"New",handler:function(){this.up("form").getForm().reset()}}]}]}}});Ext.define("GreenFleet.view.vehicle.Reservation",{extend:"Ext.container.Container",alias:"widget.reservation",title:"Reservation",layout:{align:"stretch",type:"vbox"},initComponent:function(){this.callParent(arguments);this.add(this.buildList(this));this.add(this.buildForm(this))},buildList:function(a){return{xtype:"gridpanel",title:"Reservation List",store:"ReservationStore",autoScroll:true,flex:1,columns:[{dataIndex:"id",text:"ID",type:"string"},{dataIndex:"reservedDate",text:"Reserved Date",type:"string"},{dataIndex:"driver",text:"Driver",type:"string"},{dataIndex:"vehicle",text:"Vehicle",type:"string"},{dataIndex:"vehicleType",text:"Vehicle Type",type:"string"},{dataIndex:"deliveryPlace",text:"Delivery Place",type:"string"},{dataIndex:"destination",text:"Destination",type:"string"},{dataIndex:"purpose",text:"Purpose",type:"string"},{dataIndex:"status",text:"Status",type:"string"},{dataIndex:"createdAt",text:"Created At",xtype:"datecolumn",format:"d/m/Y"},{dataIndex:"updatedAt",text:"Updated At",xtype:"datecolumn",format:"d/m/Y"}],viewConfig:{},listeners:{itemclick:function(c,b){var d=a.down("form");d.loadRecord(b)}},onSearch:function(b){var c=b.down("textfield[name=idFilter]");var d=b.down("textfield[name=vehicleFilter]");b.store.load({filters:[{property:"id",value:c.getValue()},{property:"vehicle",value:d.getValue()}]})},onReset:function(b){b.down("textfield[name=idFilter]").setValue("");b.down("textfield[name=vehicleFilter]").setValue("")},tbar:["Reservation ID",{xtype:"textfield",name:"idFilter",hideLabel:true,width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},"Vehicle",{xtype:"textfield",name:"vehicleFilter",hideLabel:true,width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},{xtype:"button",text:"Search",tooltip:"Find Reservation",handler:function(){var b=this.up("gridpanel");b.onSearch(b)}},{text:"reset",handler:function(){var b=this.up("gridpanel");b.onReset(b)}}]}},buildForm:function(a){return{xtype:"form",bodyPadding:10,title:"Reservation Details",autoScroll:true,flex:1,items:[{xtype:"textfield",name:"id",fieldLabel:"Reservation ID",anchor:"100%"},{xtype:"datefield",name:"reservedDate",disabled:true,fieldLabel:"Reserved Date",anchor:"100%"},{xtype:"textfield",name:"vehicleType",fieldLabel:"Vehicle Type",anchor:"100%"},{xtype:"combo",name:"vehicle",queryMode:"local",store:"VehicleStore",displayField:"id",valueField:"key",fieldLabel:"Vehicle",anchor:"100%"},{xtype:"combo",name:"driver",queryMode:"local",store:"DriverStore",displayField:"name",valueField:"key",fieldLabel:"Driver",anchor:"100%"},{xtype:"textfield",name:"status",fieldLabel:"Status",anchor:"100%"},{xtype:"textfield",name:"deliveryPlace",fieldLabel:"Delivery Place",anchor:"100%"},{xtype:"textfield",name:"destination",fieldLabel:"Destination",anchor:"100%"},{xtype:"textfield",name:"purpose",fieldLabel:"Purpose",anchor:"100%"},{xtype:"datefield",name:"updatedAt",disabled:true,fieldLabel:"Updated At",format:"d/m/Y",anchor:"100%"},{xtype:"datefield",name:"createdAt",disabled:true,fieldLabel:"Created At",format:"d/m/Y",anchor:"100%"}],dockedItems:[{xtype:"toolbar",dock:"bottom",layout:{align:"middle",type:"hbox"},items:[{xtype:"button",text:"Save",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"reservation/save",success:function(c,d){a.down("gridpanel").store.load()},failure:function(c,d){GreenFleet.msg("Failed",d.result.msg)}})}}},{xtype:"button",text:"Delete",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"reservation/delete",success:function(c,d){a.down("gridpanel").store.load();c.reset()},failure:function(c,d){GreenFleet.msg("Failed",d.result.msg)}})}}},{xtype:"button",text:"Reset",handler:function(){this.up("form").getForm().reset()}}]}]}}});Ext.define("GreenFleet.view.vehicle.Incident",{extend:"Ext.container.Container",alias:"widget.incident",title:"Incident",layout:{align:"stretch",type:"vbox"},initComponent:function(){this.callParent(arguments);this.add(this.buildList(this));this.add(this.buildForm(this))},buildList:function(a){return{xtype:"gridpanel",title:"Incident List",store:"IncidentStore",autoScroll:true,flex:1,columns:[{dataIndex:"id",text:"ID",type:"string"},{dataIndex:"incidentTime",text:"Incident Time",type:"string"},{dataIndex:"driver",text:"Driver",type:"string"},{dataIndex:"vehicle",text:"Vehicle",type:"string"},{dataIndex:"lattitude",text:"Lattitude",type:"number"},{dataIndex:"longitude",text:"Longitude",type:"number"},{dataIndex:"impulse",text:"Impulse",type:"number"},{dataIndex:"videoClip",text:"VideoClip",type:"string"},{dataIndex:"createdAt",text:"Created At",xtype:"datecolumn",format:"d/m/Y"},{dataIndex:"updatedAt",text:"Updated At",xtype:"datecolumn",format:"d/m/Y"}],viewConfig:{},listeners:{itemclick:function(c,b){var d=a.down("form");d.loadRecord(b)}},onSearch:function(b){var d=b.down("textfield[name=idFilter]");var e=b.down("textfield[name=vehicleFilter]");var c=b.down("textfield[name=driverFilter]");b.store.load({filters:[{property:"id",value:d.getValue()},{property:"vehicle",value:e.getValue()},{property:"driver",value:c.getValue()}]})},onReset:function(b){b.down("textfield[name=idFilter]").setValue("");b.down("textfield[name=vehicleFilter]").setValue("");b.down("textfield[name=driverFilter]").setValue("")},tbar:["Incident ID",{xtype:"textfield",name:"idFilter",hideLabel:true,width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},"Vehicle",{xtype:"textfield",name:"vehicleFilter",hideLabel:true,width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},"Driver",{xtype:"textfield",name:"driverFilter",hideLabel:true,width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},{xtype:"button",text:"Search",tooltip:"Find Incident",handler:function(){var b=this.up("gridpanel");b.onSearch(b)}},{text:"reset",handler:function(){var b=this.up("gridpanel");b.onReset(b)}}]}},buildForm:function(a){return{xtype:"form",bodyPadding:10,title:"Incident Details",autoScroll:true,flex:1,items:[{xtype:"textfield",name:"id",fieldLabel:"Incident ID",anchor:"100%"},{xtype:"datefield",name:"incidentTime",disabled:true,fieldLabel:"Incident Date",anchor:"100%"},{xtype:"textfield",name:"vehicle",fieldLabel:"Vehicle",anchor:"100%"},{xtype:"textfield",name:"driver",fieldLabel:"Driver",anchor:"100%"},{xtype:"textfield",name:"lattitude",fieldLabel:"Lattitude",anchor:"100%"},{xtype:"textfield",name:"longitude",fieldLabel:"Longitude",anchor:"100%"},{xtype:"textfield",name:"impulse",fieldLabel:"Impulse",anchor:"100%"},{xtype:"textfield",name:"videoClip",fieldLabel:"VideoClip",anchor:"100%"},{xtype:"datefield",name:"updatedAt",disabled:true,fieldLabel:"Updated At",format:"d/m/Y",anchor:"100%"},{xtype:"datefield",name:"createdAt",disabled:true,fieldLabel:"Created At",format:"d/m/Y",anchor:"100%"}],dockedItems:[{xtype:"toolbar",dock:"bottom",layout:{align:"middle",type:"hbox"},items:[{xtype:"button",text:"Save",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"incident/save",success:function(c,d){a.down("gridpanel").store.load()},failure:function(c,d){GreenFleet.msg("Failed",d.result.msg)}})}}},{xtype:"button",text:"Delete",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"incident/delete",success:function(c,d){a.down("gridpanel").store.load();c.reset()},failure:function(c,d){GreenFleet.msg("Failed",d.result.msg)}})}}},{xtype:"button",text:"Reset",handler:function(){this.up("form").getForm().reset()}}]}]}}});Ext.define("GreenFleet.view.driver.Driver",{extend:"Ext.container.Container",alias:"widget.driver",title:"Driver",layout:{align:"stretch",type:"vbox"},initComponent:function(){this.callParent(arguments);this.add(this.buildList(this));this.add(this.buildForm(this))},buildList:function(a){return{xtype:"gridpanel",title:"Driver List",store:"DriverStore",autoScroll:true,flex:1,columns:[{dataIndex:"key",text:"Key",type:"string",hidden:true},{dataIndex:"name",text:"Name",type:"string"},{dataIndex:"id",text:"Employee Id",type:"string"},{dataIndex:"division",text:"Division",type:"string"},{dataIndex:"title",text:"Title",type:"string"},{dataIndex:"imageClip",text:"ImageClip",type:"string"},{dataIndex:"createdAt",text:"Created At",xtype:"datecolumn",format:"d/m/Y"},{dataIndex:"updatedAt",text:"Updated At",xtype:"datecolumn",format:"d/m/Y"}],viewConfig:{},listeners:{render:function(b){b.store.load()},itemclick:function(c,b){var d=a.down("form");d.loadRecord(b)}},onSearch:function(c){var b=c.down("textfield[name=idFilter]");var d=c.down("textfield[name=nameFilter]");c.store.clearFilter();c.store.filter([{property:"id",value:b.getValue()},{property:"name",value:d.getValue()}])},onReset:function(b){b.down("textfield[name=idFilter]").setValue("");b.down("textfield[name=nameFilter]").setValue("")},tbar:["ID",{xtype:"textfield",name:"idFilter",hideLabel:true,width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},"Name",{xtype:"textfield",name:"nameFilter",hideLabel:true,width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},{xtype:"button",text:"Search",tooltip:"Find Driver",handler:function(){var b=this.up("gridpanel");b.onSearch(b)}},{text:"reset",handler:function(){var b=this.up("gridpanel");b.onReset(b)}}]}},buildForm:function(a){return{xtype:"form",bodyPadding:10,title:"Vehicle Details",autoScroll:true,flex:1,items:[{xtype:"textfield",name:"key",fieldLabel:"Key",anchor:"100%",hidden:true},{xtype:"textfield",name:"name",fieldLabel:"Name",anchor:"100%"},{xtype:"textfield",name:"id",fieldLabel:"Employee Id",anchor:"100%"},{xtype:"textfield",name:"division",fieldLabel:"Division",anchor:"100%"},{xtype:"textfield",name:"title",fieldLabel:"Title",anchor:"100%"},{xtype:"textfield",name:"imageClip",fieldLabel:"ImageClip",anchor:"100%"},{xtype:"datefield",name:"updatedAt",disabled:true,fieldLabel:"Updated At",format:"d/m/Y",anchor:"100%"},{xtype:"datefield",name:"createdAt",disabled:true,fieldLabel:"Created At",format:"d/m/Y",anchor:"100%"}],dockedItems:[{xtype:"toolbar",dock:"bottom",layout:{align:"middle",type:"hbox"},items:[{xtype:"button",text:"Save",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"driver/save",success:function(c,d){a.down("gridpanel").store.load()},failure:function(c,d){GreenFleet.msg("Failed",d.result)}})}}},{xtype:"button",text:"Delete",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"driver/delete",success:function(c,d){a.down("gridpanel").store.load();c.reset()},failure:function(c,d){GreenFleet.msg("Failed",d.result)}})}}},{xtype:"button",text:"New",handler:function(){this.up("form").getForm().reset()}}]}]}}});function Label(b){this.setValues(b);var a=this.span_=document.createElement("span");a.style.cssText="position: relative; left: -50%; top: -50px; white-space: nowrap; border: 1px solid blue; padding: 2px; background-color: white";var c=this.div_=document.createElement("div");c.appendChild(a);c.style.cssText="position: absolute; display: none"}Label.prototype=new google.maps.OverlayView;Label.prototype.onAdd=function(){var b=this.getPanes().overlayLayer;b.appendChild(this.div_);var a=this;this.listeners_=[google.maps.event.addListener(this,"position_changed",function(){a.draw()}),google.maps.event.addListener(this,"text_changed",function(){a.draw()})]};Label.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_);for(var b=0,a=this.listeners_.length;b<a;++b){google.maps.event.removeListener(this.listeners_[b])}};Label.prototype.draw=function(){var b=this.getProjection();var a=b.fromLatLngToDivPixel(this.get("position"));var c=this.div_;c.style.left=a.x+"px";c.style.top=a.y+"px";c.style.display="block";this.span_.innerHTML=this.get("text").toString()};Ext.define("GreenFleet.view.map.Map",{extend:"Ext.Container",alias:"widget.map",title:"Maps",layout:{type:"hbox",align:"stretch"},initComponent:function(){this.callParent();this.mapbox=this.add(this.buildMap(this));this.board=this.add(this.buildBoard(this))},displayMap:function(a,d,c){var b={zoom:10,center:new google.maps.LatLng(d,c),mapTypeId:google.maps.MapTypeId.ROADMAP};a.map=new google.maps.Map(a.getEl().first(".map").dom,b);google.maps.event.addListener(a.map,"zoom_changed",function(){});this.buildMarkers(a)},refreshMarkers:function(a){for(var b in this.markers){this.markers[b].setMap(null)}this.markers={};a.each(function(d){var g=d.get("id");var c=new google.maps.Marker({position:new google.maps.LatLng(d.get("lattitude"),d.get("longitude")),map:this.mapbox.map,title:g,vehicle:g,driver:"V001",tooltip:g+"(김형용)"});var f=new Label({map:this.mapbox.map});f.bindTo("position",c,"position");f.bindTo("text",c,"tooltip");this.markers[g]=c;var e=this.mapbox;google.maps.event.addListener(c,"click",function(){Ext.create("GreenFleet.view.vehicle.VehiclePopup",{vehicle:g,driver:"V001"}).show()})},this)},buildMarkers:function(){this.markers={};var a=Ext.getStore("VehicleStore");a.on("datachanged",this.refreshMarkers,this);this.refreshMarkers(a)},buildMap:function(a){return{xtype:"box",flex:1,html:'<div class="map" style="height:100%"></div>',listeners:{afterrender:function(){a.displayMap(this,37.56,126.97)}}}},buildBoard:function(a){return{xtype:"panel",width:200,items:[{xtype:"checkbox",fieldLabel:"Markers",checked:true,name:"markers",scope:this,handler:function(c,b){for(var d in this.markers){this.markers[d].setVisible(b)}}}]}}});Ext.define("GreenFleet.view.vehicle.Track",{extend:"Ext.container.Container",alias:"widget.track",title:"Track",layout:{align:"stretch",type:"vbox"},initComponent:function(){this.callParent(arguments);this.add(this.buildList(this));this.add(this.buildForm(this))},buildList:function(a){return{xtype:"gridpanel",title:"Track List",store:"TrackStore",autoScroll:true,flex:1,columns:[{dataIndex:"key",text:"Key",type:"string",hidden:true},{dataIndex:"vehicle",text:"Vehicle",type:"string"},{dataIndex:"driver",text:"Driver",type:"string"},{dataIndex:"lattitude",text:"Lattitude",type:"number"},{dataIndex:"longitude",text:"Longitude",type:"number"},{dataIndex:"createdAt",text:"Created At",xtype:"datecolumn",format:"d-m-Y H:i:s"}],viewConfig:{},listeners:{itemclick:function(c,b){var d=a.down("form");d.loadRecord(b)}},onSearch:function(b){var d=b.down("textfield[name=vehicleFilter]");var c=b.down("textfield[name=driverFilter]");b.store.load({filters:[{property:"vehicle",value:d.getValue()},{property:"driver",value:c.getValue()}]})},onReset:function(b){b.down("textfield[name=vehicleFilter]").setValue("");b.down("textfield[name=driverFilter]").setValue("")},tbar:[{xtype:"combo",name:"vehicle",queryMode:"local",store:"VehicleStore",displayField:"id",valueField:"id",fieldLabel:"Vehicle",name:"vehicleFilter",width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},{xtype:"combo",name:"driver",queryMode:"local",store:"DriverStore",displayField:"id",valueField:"id",fieldLabel:"Driver",name:"driverFilter",width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},{xtype:"button",text:"Search",tooltip:"Find Track",handler:function(){var b=this.up("gridpanel");b.onSearch(b)}},{text:"reset",handler:function(){var b=this.up("gridpanel");b.onReset(b)}}]}},buildForm:function(a){return{xtype:"form",bodyPadding:10,title:"Tracking Details",autoScroll:true,flex:1,items:[{xtype:"textfield",name:"key",fieldLabel:"Key",anchor:"100%",hidden:true},{xtype:"combo",name:"vehicle",queryMode:"local",store:"VehicleStore",displayField:"id",valueField:"id",fieldLabel:"Vehicle",anchor:"100%"},{xtype:"combo",name:"driver",queryMode:"local",store:"DriverStore",displayField:"id",valueField:"id",fieldLabel:"Driver",anchor:"100%"},{xtype:"textfield",name:"lattitude",fieldLabel:"Lattitude",anchor:"100%"},{xtype:"textfield",name:"longitude",fieldLabel:"Longitude",anchor:"100%"},{xtype:"datefield",name:"createdAt",disabled:true,fieldLabel:"Created At",format:"d-m-Y H:i:s",anchor:"100%"}],dockedItems:[{xtype:"toolbar",dock:"bottom",layout:{align:"middle",type:"hbox"},items:[{xtype:"button",text:"Save",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"track/save",success:function(c,d){a.down("gridpanel").store.load()},failure:function(c,d){GreenFleet.msg("Failed",d.result.msg)}})}}},{xtype:"button",text:"Delete",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"track/delete",success:function(c,d){a.down("gridpanel").store.load();c.reset()},failure:function(c,d){GreenFleet.msg("Failed",d.result.msg)}})}}},{xtype:"button",text:"Reset",handler:function(){this.up("form").getForm().reset()}}]}]}}});Ext.define("GreenFleet.view.vehicle.ControlData",{extend:"Ext.container.Container",alias:"widget.control_data",title:"ControlData",layout:{align:"stretch",type:"vbox"},initComponent:function(){this.callParent(arguments);this.add(this.buildList(this));this.add(this.buildForm(this))},buildList:function(a){return{xtype:"gridpanel",title:"ControlData List",store:"ControlDataStore",autoScroll:true,flex:1,columns:[{dataIndex:"key",text:"Key",hidden:true},{dataIndex:"vehicle",text:"Vehicle",},{dataIndex:"driver",text:"Driver",},{dataIndex:"date",text:"Date",xtype:"datecolumn",format:"d-m-Y"},{dataIndex:"startTime",text:"Start Time",xtype:"datecolumn",format:"d-m-Y H:i:s"},{dataIndex:"endTime",text:"End Time",xtype:"datecolumn",format:"d-m-Y H:i:s"},{dataIndex:"distance",text:"Distance",},{dataIndex:"runningTime",text:"Running Time",},{dataIndex:"averageSpeed",text:"Average Speed",},{dataIndex:"highestSpeed",text:"Highest Speed",},{dataIndex:"suddenAccelCount",text:"Sudden Accel Count",},{dataIndex:"suddenBrakeCount",text:"Sudden Brake Count",},{dataIndex:"econoDrivingRatio",text:"Econo Driving Ratio",},{dataIndex:"fuelEfficiency",text:"Fuel Efficiency",},{dataIndex:"longitude",text:"Longitude",},{dataIndex:"createdAt",text:"Created At",xtype:"datecolumn",format:"d-m-Y H:i:s"},{dataIndex:"updatedAt",text:"Updated At",xtype:"datecolumn",format:"d-m-Y H:i:s"}],viewConfig:{},listeners:{itemclick:function(c,b){var d=a.down("form");d.loadRecord(b)}},onSearch:function(b){var d=b.down("textfield[name=vehicleFilter]");var c=b.down("textfield[name=driverFilter]");b.store.load({filters:[{property:"vehicle",value:d.getValue()},{property:"driver",value:c.getValue()}]})},onReset:function(b){b.down("textfield[name=vehicleFilter]").setValue("");b.down("textfield[name=driverFilter]").setValue("")},tbar:[{xtype:"combo",name:"vehicle",queryMode:"local",store:"VehicleStore",displayField:"id",valueField:"id",fieldLabel:"Vehicle",name:"vehicleFilter",width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},{xtype:"combo",name:"driver",queryMode:"local",store:"DriverStore",displayField:"id",valueField:"id",fieldLabel:"Driver",name:"driverFilter",width:200,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){var b=this.up("gridpanel");b.onSearch(b)}}}},{xtype:"button",text:"Search",tooltip:"Find ControlData",handler:function(){var b=this.up("gridpanel");b.onSearch(b)}},{text:"reset",handler:function(){var b=this.up("gridpanel");b.onReset(b)}}]}},buildForm:function(a){return{xtype:"form",bodyPadding:10,title:"ControlData Details",autoScroll:true,flex:1,items:[{xtype:"textfield",name:"key",fieldLabel:"Key",anchor:"100%",hidden:true},{xtype:"combo",name:"vehicle",queryMode:"local",store:"VehicleStore",displayField:"id",valueField:"id",fieldLabel:"Vehicle",anchor:"100%"},{xtype:"combo",name:"driver",queryMode:"local",store:"DriverStore",displayField:"id",valueField:"id",fieldLabel:"Driver",anchor:"100%"},{xtype:"datefield",name:"date",fieldLabel:"Date",format:"d-m-Y H:i:s",anchor:"100%"},{xtype:"datefield",name:"startTime",fieldLabel:"Start Time",format:"d-m-Y H:i:s",anchor:"100%"},{xtype:"datefield",name:"endTime",fieldLabel:"End Time",format:"d-m-Y H:i:s",anchor:"100%"},{name:"distance",fieldLabel:"Distance",anchor:"100%"},{xtype:"textfield",name:"runningTime",fieldLabel:"Running Time",anchor:"100%"},{xtype:"textfield",name:"averageSpeed",fieldLabel:"Average Speed",anchor:"100%"},{xtype:"textfield",name:"highestSpeed",fieldLabel:"Highest Speed",anchor:"100%"},{xtype:"textfield",name:"suddenAccelCount",fieldLabel:"Sudden Accel Count",anchor:"100%"},{xtype:"textfield",name:"suddenBrakeCount",fieldLabel:"Sudden Brake Count",anchor:"100%"},{xtype:"textfield",name:"econoDrivingRatio",fieldLabel:"Econo Driving Ratio",anchor:"100%"},{xtype:"textfield",name:"fuelEfficiency",fieldLabel:"Fuel Efficiency",anchor:"100%"},{xtype:"datefield",name:"createdAt",disabled:true,fieldLabel:"Created At",format:"d-m-Y H:i:s",anchor:"100%"},{xtype:"datefield",name:"updatedAt",disabled:true,fieldLabel:"Updated At",format:"d-m-Y H:i:s",anchor:"100%"}],dockedItems:[{xtype:"toolbar",dock:"bottom",layout:{align:"middle",type:"hbox"},items:[{xtype:"button",text:"Save",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"control_data/save",success:function(c,d){a.down("gridpanel").store.load()},failure:function(c,d){GreenFleet.msg("Failed",d.result.msg)}})}}},{xtype:"button",text:"Delete",handler:function(){var b=this.up("form").getForm();if(b.isValid()){b.submit({url:"control_data/delete",success:function(c,d){a.down("gridpanel").store.load();c.reset()},failure:function(c,d){GreenFleet.msg("Failed",d.result.msg)}})}}},{xtype:"button",text:"Reset",handler:function(){this.up("form").getForm().reset()}}]}]}}});Ext.define("GreenFleet.store.CompanyStore",{extend:"Ext.data.Store",autoLoad:true,fields:[{name:"key",type:"string"},{name:"id",type:"string"},{name:"name",type:"string"},{name:"createdAt",type:"date",dateFormat:"time"},{name:"updatedAt",type:"date",dateFormat:"time"}],proxy:{type:"ajax",url:"company",reader:{type:"json"}}});Ext.define("GreenFleet.store.VehicleStore",{extend:"Ext.data.Store",autoLoad:true,fields:[{name:"key",type:"string"},{name:"id",type:"string"},{name:"registrationNumber",type:"string"},{name:"manufacturer",type:"string"},{name:"vehicleType",type:"string"},{name:"birthYear",type:"string"},{name:"ownershipType",type:"string"},{name:"status",type:"string"},{name:"imageClip",type:"string"},{name:"totalDistance",type:"string"},{name:"remainingFuel",type:"string"},{name:"distanceSinceNewOil",type:"string"},{name:"engineOilStatus",type:"string"},{name:"fuelFilterStatus",type:"string"},{name:"brakeOilStatus",type:"string"},{name:"brakePedalStatus",type:"string"},{name:"coolingWaterStatus",type:"string"},{name:"timingBeltStatus",type:"string"},{name:"sparkPlugStatus",type:"string"},{name:"driver",type:"string"},{name:"lattitude",type:"float"},{name:"longitude",type:"float"},{name:"createdAt",type:"date",dateFormat:"time"},{name:"updatedAt",type:"date",dateFormat:"time"}],proxy:{type:"ajax",url:"vehicle",reader:{type:"json"}}});Ext.define("GreenFleet.store.DriverStore",{extend:"Ext.data.Store",autoLoad:true,fields:[{name:"key",type:"string"},{name:"name",type:"string"},{name:"id",type:"string"},{name:"division",type:"string"},{name:"title",type:"string"},{name:"imageClip",type:"string"},{name:"createdAt",type:"date",dateFormat:"time"},{name:"updatedAt",type:"date",dateFormat:"time"}],proxy:{type:"ajax",url:"driver",reader:{type:"json"}}});Ext.define("GreenFleet.store.ReservationStore",{extend:"Ext.data.Store",autoLoad:false,fields:[{name:"id",type:"string"},{name:"reservedDate",type:"date",dateFormat:"timestamp"},{name:"driver",type:"string"},{name:"vehicle",type:"string"},{name:"vehicleType",type:"string"},{name:"deliveryType",type:"string"},{name:"destination",type:"string"},{name:"purpose",type:"string"},{name:"status",type:"string"},{name:"createdAt",type:"date",dateFormat:"time"},{name:"updatedAt",type:"date",dateFormat:"time"}],proxy:{type:"ajax",url:"reservation",reader:{type:"json"}}});Ext.define("GreenFleet.store.IncidentStore",{extend:"Ext.data.Store",autoLoad:false,fields:[{name:"id",type:"string"},{name:"incidentTime",type:"string"},{name:"driver",type:"string"},{name:"vehicle",type:"string"},{name:"lattitude",type:"float"},{name:"longitude",type:"float"},{name:"impulse",type:"float"},{name:"videoClip",type:"string"},{name:"createdAt",type:"date",dateFormat:"time"},{name:"updatedAt",type:"date",dateFormat:"time"}],proxy:{type:"ajax",url:"incident",reader:{type:"json"}}});Ext.define("GreenFleet.store.TrackStore",{extend:"Ext.data.Store",autoLoad:false,fields:[{name:"key",type:"string"},{name:"vehicle",type:"string"},{name:"driver",type:"string"},{name:"lattitude",type:"number"},{name:"longitude",type:"number"},{name:"createdAt",type:"date",dateFormat:"time"}],proxy:{type:"ajax",url:"track",reader:{type:"json"}}});Ext.define("GreenFleet.view.viewport.Center",{extend:"Ext.panel.Panel",id:"content",alias:"widget.viewport.center",preventHeader:true,layout:"card",defaults:{preventHeader:true},});Ext.define("GreenFleet.view.viewport.North",{extend:"Ext.Container",alias:"widget.viewport.north",layout:{type:"hbox",align:"stretch"},items:[{xtype:"brand",width:128},{xtype:"container",flex:1,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:1,layout:{type:"hbox",align:"stretch"},items:[{xtype:"main_menu",flex:1},{xtype:"system_menu",width:180}]},{xtype:"tabbar",height:23,defaults:{handler:function(c){var b=Ext.getCmp("content");var a=b.getComponent(c.itemId);if(!a){a=b.add(c.view)}b.getLayout().setActiveItem(a);c.setActive(true)},closable:false},items:[{text:"Map",itemId:"map",view:{xtype:"map",itemId:"map"}},{text:"OBD",itemId:"obd",view:{xtype:"obd",itemId:"obd"}},{text:"File",itemId:"filemanager",view:{xtype:"filemanager",itemId:"filemanager"}},{text:"Company",itemId:"company",view:{xtype:"company",itemId:"company"}},{text:"Vehicle",itemId:"vehicle",view:{xtype:"vehicle",itemId:"vehicle"}},{text:"Driver",itemId:"driver",view:{xtype:"driver",itemId:"driver"}},{text:"Reservation",itemId:"reservation",view:{xtype:"reservation",itemId:"reservation"}},{text:"Incident",itemId:"incident",view:{xtype:"incident",itemId:"incident"}},{text:"Track",itemId:"track",view:{xtype:"track",itemId:"track"}},{text:"ControlData",itemId:"control_data",view:{xtype:"control_data",itemId:"control_data"}}]}]}]});Ext.define("GreenFleet.view.viewport.West",{extend:"Ext.panel.Panel",alias:"widget.viewport.west"});Ext.define("GreenFleet.view.Brand",{extend:"Ext.panel.Panel",alias:"widget.brand",html:"<h1>Green Fleet</h1>"});Ext.create("Ext.data.Store",{id:"menustore",fields:[{name:"text"}],data:[{text:"Vehicle"},{text:"Employees"},{text:"Allocation"},{text:"Incidents"},{text:"Maintenance"},{text:"Risk Assessment"},{text:"Purchase Order"}],});Ext.define("GreenFleet.view.MainMenu",{extend:"Ext.toolbar.Toolbar",cls:"appMenu",alias:"widget.main_menu",items:[{text:"Vehicle"},{text:"Employees"},{text:"Allocation"},{text:"Incidents"},{text:"Maintenance"},{text:"Risk Assessment"},{text:"Purchase Order"}]});Ext.define("GreenFleet.view.SystemMenu",{extend:"Ext.toolbar.Toolbar",alias:"widget.system_menu",items:[{type:"help",text:login.username,handler:function(){}},{itemId:"logout",type:"logout",text:"logout",handler:function(){Ext.MessageBox.confirm("Confirm","Are you sure you want to do that?",function(a){if(a==="yes"){document.location.href="/logout.htm"}})}},{type:"search",text:"search",handler:function(c,d,a,b){}}]});Ext.define("GreenFleet.view.vehicle.VehiclePopup",{extend:"Ext.window.Window",alias:"widget.vehiclepopup",title:"Control Information",closable:true,modal:true,width:600,height:400,layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",flex:2,layout:{type:"vbox",align:"stretch"},items:[{xtype:"form",height:140,items:[{xtype:"textfield",name:"driver",fieldLabel:"Driver"},{xtype:"textfield",name:"vehicle",fieldLabel:"Vehicle"},{xtype:"textfield",name:"position",fieldLabel:"Current Position"},{xtype:"textfield",name:"distance",fieldLabel:"Running Distance"},{xtype:"textfield",name:"runningTime",fieldLabel:"Running Time"}]},{xtype:"panel",flex:1,title:"Incidents",layout:"fit",items:[{xtype:"container",layout:{type:"hbox",align:"left"},items:[{xtype:"box",height:100,width:100,html:"<div>HAHAHA001</div>"},{xtype:"box",height:100,width:100,html:"<div>HAHAHA002</div>"},{xtype:"box",height:100,width:100,html:"<div>HAHAHA003</div>"},{xtype:"box",height:100,width:100,html:"<div>HAHAHA004</div>"}]}]}]},{xtype:"tabpanel",flex:1,items:[{xtype:"gridpanel",title:"Information",store:"VehicleStore",autoScroll:true,columns:[{dataIndex:"key",text:"Key",type:"string",hidden:true},{dataIndex:"id",text:"Vehicle Id",type:"string"},{dataIndex:"registrationNumber",text:"RegistrationNumber",type:"string"},{dataIndex:"manufacturer",text:"Manufacturer",type:"string"},{dataIndex:"vehicleType",text:"VehicleType",type:"string"},{dataIndex:"birthYear",text:"BirthYear",type:"string"},{dataIndex:"ownershipType",text:"OwnershipType",type:"string"},{dataIndex:"status",text:"Status",type:"string"},{dataIndex:"imageClip",text:"ImageClip",type:"string"},{dataIndex:"totalDistance",text:"TotalDistance",type:"string"},{dataIndex:"remainingFuel",text:"RemainingFuel",type:"string"},{dataIndex:"distanceSinceNewOil",text:"DistanceSinceNewOil",type:"string"},{dataIndex:"engineOilStatus",text:"EngineOilStatus",type:"string"},{dataIndex:"fuelFilterStatus",text:"FuelFilterStatus",type:"string"},{dataIndex:"brakeOilStatus",text:"BrakeOilStatus",type:"string"},{dataIndex:"brakePedalStatus",text:"BrakePedalStatus",type:"string"},{dataIndex:"coolingWaterStatus",text:"CoolingWaterStatus",type:"string"},{dataIndex:"timingBeltStatus",text:"TimingBeltStatus",type:"string"},{dataIndex:"sparkPlugStatus",text:"SparkPlugStatus",type:"string"},{dataIndex:"lattitude",text:"Lattitude"},{dataIndex:"longitude",text:"Longitude"},{dataIndex:"createdAt",text:"Created At",xtype:"datecolumn",format:"d/m/Y"},{dataIndex:"updatedAt",text:"Updated At",xtype:"datecolumn",format:"d/m/Y"}]},{title:"Control - Vehicle"},{title:"Control - Driver"},{title:"Control - Maintenance"}]}]});Ext.define("GreenFleet.store.ManufacturerStore",{extend:"Ext.data.Store",storeId:"manufacturer_store",fields:["name"],data:[{name:"Audi"},{name:"Volkswagon"},{name:"Mercedes-Benz"},{name:"Hyundai"},{name:"Kia"}]});Ext.define("GreenFleet.store.VehicleTypeStore",{extend:"Ext.data.Store",storeId:"vehicletype_store",fields:["name","desc"],data:[{name:"A",desc:"A 800-"},{name:"B",desc:"B 800~1000"},{name:"C",desc:"C 1000~1500"},{name:"D",desc:"D 1500~1800"},{name:"E",desc:"E 1800~2000"},{name:"F",desc:"F 2000+"}]});Ext.define("GreenFleet.store.OwnershipStore",{extend:"Ext.data.Store",storeId:"ownership_store",fields:["name","desc"],data:[{name:"A",desc:"A Self"},{name:"B",desc:"B Company"},{name:"C",desc:"C Rent"}]});Ext.define("GreenFleet.store.VehicleStatusStore",{extend:"Ext.data.Store",storeId:"vehiclestatus_store",fields:["status","desc"],data:[{name:"Running",desc:"Running"},{name:"Incident",desc:"Incident"},{name:"Idle",desc:"Idle"}]});Ext.define("GreenFleet.store.ControlDataStore",{extend:"Ext.data.Store",autoLoad:false,fields:[{name:"key",type:"string"},{name:"vehicle",type:"string"},{name:"driver",type:"string"},{name:"distance",type:"float"},{name:"runningTime",type:"float"},{name:"averageSpeed",type:"float"},{name:"highestSpeed",type:"float"},{name:"suddenAccelCount",type:"float"},{name:"suddenBrakeCount",type:"float"},{name:"econoDrivingRatio",type:"float"},{name:"fuelEfficiency",type:"float"},{name:"date",type:"date",dateFormat:"timestamp"},{name:"startTime",type:"date",dateFormat:"time"},{name:"endTime",type:"date",dateFormat:"time"},{name:"createdAt",type:"date",dateFormat:"time"},{name:"updatedAt",type:"date",dateFormat:"time"}],proxy:{type:"ajax",url:"control_data",reader:{type:"json"}}});Ext.define("GreenFleet.model.File",{extend:"Ext.data.Model",fields:[{name:"filename",type:"string"},{name:"creation",type:"number"},{name:"md5_hash",type:"string"},{name:"content_type",type:"string"},{name:"size",type:"string"}]});Ext.define("GreenFleet.view.file.FileManager",{extend:"Ext.panel.Panel",alias:"widget.filemanager",title:"FileManager",layout:{type:"vbox",align:"stretch",pack:"start"},initComponent:function(){this.callParent();this.add(Ext.create("GreenFleet.view.file.FileViewer",{flex:1}));this.add(Ext.create("GreenFleet.view.file.FileUploader",{flex:1}));this.add(Ext.create("GreenFleet.view.file.FileList",{flex:2}))}});Ext.define("GreenFleet.store.FileStore",{extend:"Ext.data.Store",storeId:"filestore",model:"GreenFleet.model.File",proxy:{type:"ajax",url:"/data/files.json",reader:{type:"json"}},autoLoad:true});Ext.define("GreenFleet.controller.ApplicationController",{extend:"Ext.app.Controller",stores:["CompanyStore","VehicleStore","DriverStore","ReservationStore","IncidentStore","TrackStore"],models:[],views:["company.Company","vehicle.Vehicle","vehicle.Reservation","vehicle.Incident","driver.Driver","map.Map","vehicle.Track","vehicle.ControlData"],init:function(){this.control({viewport:{afterrender:this.onViewportRendered}})},onViewportRendered:function(){}});Ext.define("GreenFleet.controller.FrameController",{extend:"Ext.app.Controller",stores:[],models:[],views:["viewport.Center","viewport.North","viewport.West","Brand","MainMenu","SystemMenu"],init:function(){this.control({viewport:{afterrender:this.onViewportRendered}})},onViewportRendered:function(){}});Ext.define("GreenFleet.controller.VehicleController",{extend:"Ext.app.Controller",stores:["ManufacturerStore","VehicleTypeStore","OwnershipStore","VehicleStatusStore","ControlDataStore"],models:[],views:["vehicle.VehiclePopup"],init:function(){this.control({viewport:{afterrender:this.onViewportRendered}})},onViewportRendered:function(){}});Ext.define("GreenFleet.controller.FileController",{extend:"Ext.app.Controller",stores:["FileStore"],models:["File"],views:["file.FileManager"],init:function(){this.control({viewport:{afterrender:this.onViewportRendered}})},onViewportRendered:function(){}});Ext.Loader.setConfig({enabled:true,paths:{GreenFleet:"app"}});Ext.define("GreenFleet",{singleton:true,mixins:{msg:"GreenFleet.mixin.Msg",user:"GreenFleet.mixin.User",mixin:"GreenFleet.mixin.Mixin",ui:"GreenFleet.mixin.UI"}});var console=console||{log:function(){},trace:function(){}};Ext.require("GreenFleet.view.Viewport");Ext.onReady(function(){Ext.application({name:"GreenFleet",autoCreateViewport:false,controllers:["GreenFleet.controller.ApplicationController","GreenFleet.controller.FrameController","GreenFleet.controller.VehicleController","GreenFleet.controller.FileController"],launch:function(){Ext.create("GreenFleet.view.Viewport").show()}})});
