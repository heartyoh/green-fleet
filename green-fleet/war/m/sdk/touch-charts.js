/*657113bc19195e1a86470507c91a0120a653b31e*/Ext.define("Ext.fx.Queue",{singleton:true,queue:[],add:function(a){if(!this.contains(a)){this.queue.push(a)}},remove:function(e){var d=this,a=d.queue,c=0,b=a.length;for(;c<b;++c){if(a[c]===e){a.splice(c,1);return}}},contains:function(a){return this.queue.indexOf(a)>-1},empty:function(){return this.queue.length===0},refresh:function(e){var f=this,a=f.queue,c=[],d=0,b=a.length;for(;d<b;++d){a[d].step(e);if(a[d].animating){c.push(a[d])}}f.queue=c}});(function(){var d=Math.pow,g=Math.sin,h=Math.cos,e=Math.acos,k=Math.PI,m,j,c,f,b,a;c=["Quad","Cubic","Quart","Quint"];m={Pow:function(o,n){return d(o,n[0]||6)},Expo:function(n){return d(2,8*(n-1))},Circ:function(n){return 1-g(e(n))},Sine:function(n){return 1-g((1-n)*k/2)},Back:function(o,q){q=q||1.616;return o*o*((q+1)*o-q)},Bounce:function(r){var q;for(var o=0,n=1;1;o+=n,n/=2){if(r>=(7-4*o)/11){q=n*n-d((11-6*o-11*r)/4,2);break}}return q},Elastic:function(o,n){return d(2,10*--o)*h(20*o*k*(n||1)/3)}};j=function(o,n){n=n&&n.length?n:[n];return Ext.apply(o,{easeIn:function(q){return o(q,n)},easeOut:function(q){return 1-o(1-q,n)},easeInOut:function(q){return(q<=0.5)?o(2*q,n)/2:(2-o(2*(1-q),n))/2}})};for(b=0,a=c.length;b<a;++b){m[c[b]]=(function(n){return function(o){return d(o,n)}})(b+2)}m.Linear=function(n){return n};for(f in m){if(m.hasOwnProperty(f)){j(m[f])}}Ext.define("Ext.fx.TimingFunctions",Ext.apply({singleton:true,EasingMap:{linear:m.Linear,easeIn:m.Quad.easeIn,easeOut:m.Quad.easeOut,easeInOut:m.Quad.easeInOut,backIn:m.Back,backOut:function(o,q){return 1-m.Back(1-o,q)},backInOut:function(o,q){if(o<0.5){return m.Back(o*2,q)*0.5}else{return 1-m.Back((1-o)*2,q)*0.5}},elasticIn:function(o,q){return 1-m.Elastic(1-o,q)},elasticOut:m.Elastic,bounceIn:m.Bounce,bounceOut:function(n){return 1-m.Bounce(1-n)}}},m))})();Ext.define("Ext.fx.Abstract",{requires:["Ext.fx.TimingFunctions","Ext.fx.Queue"],config:{delay:0,duration:1000,easing:function(a){return a},onCompute:Ext.emptyFn,onComplete:Ext.emptyFn,from:0,to:0},constructor:function(a){this.initConfig(a)},start:function(){Ext.fx.Queue.add(this)},stop:function(){Ext.fx.Queue.remove(this)},compute:Ext.emptyFn,step:Ext.emptyFn,pause:Ext.emptyFn,resume:Ext.emptyFn,applyEasing:function(a){if(typeof a==="string"){return Ext.fx.TimingFunctions.EasingMap[a]}else{return a}}});Ext.define("Ext.fx.Frame",{extend:"Ext.fx.Abstract",uses:["Ext.draw.Draw"],statics:{_frameCallbacks:[],frameStartTime:+new Date(),addFrameCallback:function(b,a){a=a||this;if(Ext.isString(b)){b=a[b]}Ext.fx.Frame._frameCallbacks.push({fn:b,scope:a})},removeFrameCallback:function(e,d){var b=-1;d=d||this;if(Ext.isString(e)){e=d[e]}for(var c=0;c<this._frameCallbacks.length;c++){var a=this._frameCallbacks[c];if(a.fn===e&&a.scope===d){b=c;break}}if(b>-1){Ext.fx.Frame._frameCallbacks.splice(b,1)}},fireFrameCallbacks:function(){var c=this._frameCallbacks,b=0,a=c.length;for(;b<a;++b){c[b].fn.apply(c[b].scope,[])}},compute:function(c,b,a){return c+(b-c)*a},animationTime:(function(){var a=(function(){var e=(self||window||this),g=["webkit","moz","o","ms"],d=0,c=g.length,f,b;if(e.animationStartTime){return function(){return e.animationStartTime}}for(;d<c;++d){f=g[d]+"AnimationStartTime";if(e[f]){return function(){return e[f]}}}if(Date.now){return Date.now}return function(){return +new Date()}})();return function(){if(!this.frameStartTime){return this.frameStartTime=a()}return this.frameStartTime}})(),requestAnimationFrame:(function(){var c=(self||window||this),d=["webkit","moz","o","ms"],b=0,a=d.length,e;if(c.requestAnimationFrame){return function(f){c.requestAnimationFrame(function(){f()})}}for(;b<a;++b){e=d[b]+"RequestAnimationFrame";if(c[e]){e=c[e];return function(f){e(f)}}}return function(f){setTimeout(function(){f()},1000/100)}})()},time:null,constructor:function(a){this.callParent([a])},start:function(){var a=this;a.animating=true;a.time=0;a.callParent(arguments);Ext.fx.Frame.ignite()},step:function(c){var b=this,e=b.time,a=b.getDelay(),d=b.getDuration(),f=0;if(e===0){e=b.time=c}if(!b.animating){return}if(c<e+a){return}if(c<e+a+d){f=b.getEasing()((c-e-a)/d);b.set(b.compute(b.getFrom(),b.getTo(),f))}else{b.set(b.compute(b.getFrom(),b.getTo(),1));b.getOnComplete().call(b);b.animating=false}},compute:function(c,b,a){return this.getOnCompute().call(this,a)},stop:function(){var a=this;if(a.animating){a.animating=false;a.time=null;a.getOnComplete().call(a)}a.callParent(arguments)},set:Ext.emptyFn},function(){var b=false,d=Ext.fx.Queue,c=Ext.fx.Frame;function a(){c.frameStartTime=false;c.animationTime();if(!d.empty()){d.refresh(c.frameStartTime);c.fireFrameCallbacks();c.requestAnimationFrame(a)}else{b=false}}c.ignite=function(){if(!b){b=true;c.requestAnimationFrame(a);Ext.draw.Draw.updateIOS()}}});Ext.define("Ext.fx.Parser",{singleton:true,compute:function(c,b,a){return c+(b-c)*a},Color:{parse:function(b){var a;if(b===a){return null}if(b.match(/^#[0-9a-fA-F]{3,6}$/)){a=Ext.draw.Color.fromString(b);return[a.r,a.g,a.b,1]}a=b.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d+)\)/);if(a){return[+a[1],+a[2],+a[3],+a[4]]}else{a=b.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(a){return[+a[1],+a[2],+a[3],1]}else{if(typeof b==="string"&&(a=Ext.draw.Color.fromName(b))){return[a.r,a.g,a.b,1]}else{if(b==="none"){return[0,0,0,0]}else{return b}}}}},compute:function(d,c,b){if(!Ext.isArray(d)||!Ext.isArray(c)){return c||d}else{var a=this;return[Ext.fx.Parser.compute(d[0],c[0],b),Ext.fx.Parser.compute(d[1],c[1],b),Ext.fx.Parser.compute(d[2],c[2],b),Ext.fx.Parser.compute(d[3],c[3],b)]}},serve:function(a){if(typeof a=="string"){return a}else{if(a){return"rgba("+[+a[0]>>0,+a[1]>>0,+a[2]>>0,+a[3]].join(",")+")"}}}},Object:{parse:function(c){var a={},b;for(b in c){a[b]=Ext.fx.Parser.prepare(b,c[b])}return a},compute:function(h,g,f){var b={},c,d,a,e;for(c in h){e=Ext.fx.Parser.AttributeParser[c];if(e){d=h[c];a=g[c];b[c]=e.compute(d,a,f)}}return b},serve:function(c,d){var b={},f,a,e;for(a in c){e=Ext.fx.Parser.AttributeParser[a];f=c[a];b[a]=e.serve(f,d)}return b}},Number:{parse:function(a){return a===null?null:parseFloat(a)},compute:function(c,b,a){if(!Ext.isNumber(c)||!Ext.isNumber(b)){return b||c}else{return Ext.fx.Parser.compute(c,b,a)}},serve:function(b,a){return a?b+a:b}},String:{parse:function(a){return a},compute:function(b,a){return a},serve:function(a){return a}},Path:{parse:function(a){if(!a.length&&!a[0].length){a=Ext.draw.Draw.parsePathString(path)}return a},compute:function(h,k,o){var e=0,d=0,m=[],c=h.length,a,b,g,f;for(;e<c;++e){b=m[e]=[];g=h[e];f=k[e];for(d=0,a=g.length;d<a;++d){if(typeof g[d]=="number"){b[d]=g[d]+(f[d]-g[d])*o}else{b[d]=g[d]}}}return m},serve:function(a){return a}},Text:{parse:function(a){return a},compute:function(c,b,a){return c.substr(0,Math.round(c.length*(1-a)))+b.substr(Math.round(b.length*(1-a)))},serve:function(a){return a}},prepare:function(a,b){var c=Ext.fx.Parser.AttributeParser[a];if(!c&&console&&console.warn){console.warn("Missing parser for property "+a+". Using String parser.")}return c?c.parse(b):b}},function(){var b=Ext.fx.Parser,a=b.Object;b.AttributeParser={fill:b.Color,stroke:b.Color,color:b.Color,shadowColor:b.Color,x:b.Number,y:b.Number,width:b.Number,height:b.Number,top:b.Number,left:b.Number,bottom:b.Number,right:b.Number,margin:b.Number,degrees:b.Number,padding:b.Number,lineWidth:b.Number,opacity:b.Number,shadowOffsetX:b.Number,shadowOffsetY:b.Number,shadowBlur:b.Number,radius:b.Number,size:b.Number,"stroke-width":b.Number,"font-size":b.Number,"font-family":b.String,startAngle:b.Number,endAngle:b.Number,margin:b.Number,rho:b.Number,startRho:b.Number,endRho:b.Number,translate:a,translation:a,rotate:a,rotation:a,scale:a,scaling:a,segment:a,path:b.Path,zIndex:b.String,index:b.String,"text-anchor":b.String,type:b.String,src:b.String,reset:b.String,font:b.String,hidden:b.String,text:b.Text}});Ext.define("Ext.fx.Sprite",{extend:"Ext.fx.Frame",requires:["Ext.fx.Parser"],config:{sprite:null,unit:null},prepare:function(h,j,g){var c=this,a=Ext.fx.Parser,b=h.getAttribute(j),e=a.prepare(j,(b!==undefined&&b!==null)?b:g),f=a.prepare(j,g),d;if(j=="path"){d=Ext.draw.Draw.interpolatePaths(e,f);e=d[0];f=d[1]}return{from:e,to:f}},start:function(b){var e=this,g={},f={},d=e.getSprite(),c,a;for(c in b){a=e.prepare(d,c,b[c]);g[c]=a.from;f[c]=a.to}e.setFrom(g);e.setTo(f);e.callParent(arguments)},compute:Ext.fx.Parser.Object.compute,set:function(b){var a=this;a.render(a.getSprite(),Ext.fx.Parser.Object.serve(b,a.getUnit()))},render:function(b,a){b.setAttributes(a,true)}});Ext.define("Ext.draw.Color",{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbRe:/\s*rgba?\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*(,\s*[0-9\.]+\s*)?\)\s*/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,lightnessFactor:0.2,constructor:function(d,c,a){var b=this,e=Ext.Number.constrain;b.r=e(d,0,255);b.g=e(c,0,255);b.b=e(a,0,255)},getRed:function(){return this.r},getGreen:function(){return this.g},getBlue:function(){return this.b},getRGB:function(){var a=this;return[a.r,a.g,a.b]},getHSL:function(){var j=this,a=j.r/255,f=j.g/255,k=j.b/255,m=Math.max(a,f,k),d=Math.min(a,f,k),n=m-d,e,o=0,c=0.5*(m+d);if(d!=m){o=(c<0.5)?n/(m+d):n/(2-m-d);if(a==m){e=60*(f-k)/n}else{if(f==m){e=120+60*(k-a)/n}else{e=240+60*(a-f)/n}}if(e<0){e+=360}if(e>=360){e-=360}}return[e,o,c]},getLighter:function(b){var a=this.getHSL();b=b||this.lightnessFactor;a[2]=Ext.util.Numbers.constrain(a[2]+b,0,1);return this.fromHSL(a[0],a[1],a[2])},getDarker:function(a){a=a||this.lightnessFactor;return this.getLighter(-a)},toString:function(){var f=this,c=Math.round,e=c(f.r).toString(16),d=c(f.g).toString(16),a=c(f.b).toString(16);e=(e.length==1)?"0"+e:e;d=(d.length==1)?"0"+d:d;a=(a.length==1)?"0"+a:a;return["#",e,d,a].join("")},toHex:function(b){if(Ext.isArray(b)){b=b[0]}if(!Ext.isString(b)){return""}if(b.substr(0,1)==="#"){return b}var e=this.colorToHexRe.exec(b);if(Ext.isArray(e)){var f=parseInt(e[2],10),d=parseInt(e[3],10),a=parseInt(e[4],10),c=a|(d<<8)|(f<<16);return e[1]+"#"+("000000"+c.toString(16)).slice(-6)}else{return""}},fromString:function(h){var c,e,d,a,f=parseInt;if((h.length==4||h.length==7)&&h.substr(0,1)==="#"){c=h.match(this.hexRe);if(c){e=f(c[1],16)>>0;d=f(c[2],16)>>0;a=f(c[3],16)>>0;if(h.length==4){e+=(e*16);d+=(d*16);a+=(a*16)}}}else{c=h.match(this.rgbRe);if(c){e=c[1];d=c[2];a=c[3]}else{return Ext.draw.Color.fromName(h)}}return(typeof e=="undefined")?undefined:new Ext.draw.Color(e,d,a)},getGrayscale:function(){return this.r*0.3+this.g*0.59+this.b*0.11},fromHSL:function(e,j,d){var a,b,c,g=[],k=Math.abs,f=Math.floor;if(j==0||e==null){g=[d,d,d]}else{e/=60;a=j*(1-k(2*d-1));b=a*(1-k(e-2*f(e/2)-1));c=d-a/2;switch(f(e)){case 0:g=[a,b,0];break;case 1:g=[b,a,0];break;case 2:g=[0,a,b];break;case 3:g=[0,b,a];break;case 4:g=[b,0,a];break;case 5:g=[a,0,b];break}g=[g[0]+c,g[1]+c,g[2]+c]}return new Ext.draw.Color(g[0]*255,g[1]*255,g[2]*255)}},function(){var a=this.prototype;this.addStatics({ColorList:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},fromHSL:function(){return a.fromHSL.apply(a,arguments)},fromString:function(){return a.fromString.apply(a,arguments)},fromName:function(b){if(this.ColorList[b.toLowerCase()]){return this.fromString(this.ColorList[b.toLowerCase()])}else{return null}},toHex:function(b){return a.toHex(b)}})});Ext.define("Ext.draw.Draw",{singleton:true,requires:["Ext.env.OS","Ext.draw.Color","Ext.fx.Frame"],pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,pi2:Math.PI*2,snapEndsIntervalWeights:[[0,15],[20,4],[30,2],[40,4],[50,9],[60,4],[70,2],[80,4],[100,15]],is:function(b,a){a=String(a).toLowerCase();return(a=="object"&&b===Object(b))||(a=="undefined"&&typeof b==a)||(a=="null"&&b===null)||(a=="array"&&Array.isArray&&Array.isArray(b))||(Object.prototype.toString.call(b).toLowerCase().slice(8,-1))==a},ellipsePath:function(b){var a=b.attr;return Ext.String.format("M{0},{1}A{2},{3},0,1,1,{0},{4}A{2},{3},0,1,1,{0},{1}z",a.x,a.y-a.ry,a.rx,a.ry,a.y+a.ry)},rectPath:function(b){var a=b.attr;if(a.radius){return Ext.String.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",a.x+a.radius,a.y,a.width-a.radius*2,a.radius,-a.radius,a.height-a.radius*2,a.radius*2-a.width,a.radius*2-a.height)}else{return Ext.String.format("M{0},{1}l{2},0,0,{3},{4},0z",a.x,a.y,a.width,a.height,-a.width)}},pathToString:function(a){if(Ext.isArray(a)){a=a.join(",")}return a.replace(Ext.draw.Draw.pathToStringRE,"$1")},parsePathString:function(a){if(!a){return null}var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[],b=this;if(b.is(a,"array")&&b.is(a[0],"array")){c=b.pathClone(a)}if(!c.length){Ext.draw.Draw.pathToString(a).replace(b.pathCommandRE,function(f,e,j){var h=[],g=e.toLowerCase();j.replace(b.pathValuesRE,function(m,k){k&&h.push(+k)});if(g=="m"&&h.length>2){c.push([e].concat(h.splice(0,2)));g="l";e=(e=="m")?"l":"L"}while(h.length>=d[g]){c.push([e].concat(h.splice(0,d[g])));if(!d[g]){break}}})}return c},mapPath:function(k,f){if(!f){return k}var g,e,c,h,a,d,b;k=this.path2curve(k);for(c=0,h=k.length;c<h;c++){b=k[c];for(a=1,d=b.length;a<d-1;a+=2){g=f.x(b[a],b[a+1]);e=f.y(b[a],b[a+1]);b[a]=g;b[a+1]=e}}return k},pathClone:function(f){var c=[],a,e,b,d;if(!this.is(f,"array")||!this.is(f&&f[0],"array")){f=this.parsePathString(f)}for(b=0,d=f.length;b<d;b++){c[b]=[];for(a=0,e=f[b].length;a<e;a++){c[b][a]=f[b][a]}}return c},pathToAbsolute:function(c){if(!this.is(c,"array")||!this.is(c&&c[0],"array")){c=this.parsePathString(c)}var h=[],m=0,k=0,o=0,n=0,f=0,g=c.length,b,d,e,a;if(c[0][0]=="M"){m=+c[0][1];k=+c[0][2];o=m;n=k;f++;h[0]=["M",m,k]}for(;f<g;f++){b=h[f]=[];d=c[f];if(d[0]!=d[0].toUpperCase()){b[0]=d[0].toUpperCase();switch(b[0]){case"A":b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=+(d[6]+m);b[7]=+(d[7]+k);break;case"V":b[1]=+d[1]+k;break;case"H":b[1]=+d[1]+m;break;case"M":o=+d[1]+m;n=+d[2]+k;default:e=1;a=d.length;for(;e<a;e++){b[e]=+d[e]+((e%2)?m:k)}}}else{e=0;a=d.length;for(;e<a;e++){h[f][e]=d[e]}}switch(b[0]){case"Z":m=o;k=n;break;case"H":m=b[1];break;case"V":k=b[1];break;case"M":d=h[f];a=d.length;o=d[a-2];n=d[a-1];default:d=h[f];a=d.length;m=d[a-2];k=d[a-1]}}return h},path2curve:function(j){var d=this,g=d.pathToAbsolute(j),c=g.length,h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b,a,f,e;for(b=0;b<c;b++){g[b]=d.command2curve(g[b],h);if(g[b].length>7){g[b].shift();e=g[b];while(e.length){g.splice(b++,0,["C"].concat(e.splice(0,6)))}g.splice(b,1);c=g.length}a=g[b];f=a.length;h.x=a[f-2];h.y=a[f-1];h.bx=parseFloat(a[f-4])||h.x;h.by=parseFloat(a[f-3])||h.y}return g},interpolatePaths:function(r,k){var h=this,d=h.pathToAbsolute(r),m=h.pathToAbsolute(k),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b=function(s,t){if(s[t].length>7){s[t].shift();var u=s[t];while(u.length){s.splice(t++,0,["C"].concat(u.splice(0,6)))}s.splice(t,1);o=Math.max(d.length,m.length||0)}},c=function(w,v,t,s,u){if(w&&v&&w[u][0]=="M"&&v[u][0]!="M"){v.splice(u,0,["M",s.x,s.y]);t.bx=0;t.by=0;t.x=w[u][1];t.y=w[u][2];o=Math.max(d.length,m.length||0)}};for(var g=0,o=Math.max(d.length,m.length||0);g<o;g++){d[g]=h.command2curve(d[g],n);b(d,g);(m[g]=h.command2curve(m[g],a));b(m,g);c(d,m,n,a,g);c(m,d,a,n,g);var f=d[g],q=m[g],e=f.length,j=q.length;n.x=f[e-2];n.y=f[e-1];n.bx=parseFloat(f[e-4])||n.x;n.by=parseFloat(f[e-3])||n.y;a.bx=(parseFloat(q[j-4])||a.x);a.by=(parseFloat(q[j-3])||a.y);a.x=q[j-2];a.y=q[j-1]}return[d,m]},command2curve:function(c,b){var a=this;if(!c){return["C",b.x,b.y,b.x,b.y,b.x,b.y]}if(c[0]!="T"&&c[0]!="Q"){b.qx=b.qy=null}switch(c[0]){case"M":b.X=c[1];b.Y=c[2];break;case"A":c=["C"].concat(a.arc2curve.apply(a,[b.x,b.y].concat(c.slice(1))));break;case"S":c=["C",b.x+(b.x-(b.bx||b.x)),b.y+(b.y-(b.by||b.y))].concat(c.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x));b.qy=b.y+(b.y-(b.qy||b.y));c=["C"].concat(a.quadratic2curve(b.x,b.y,b.qx,b.qy,c[1],c[2]));break;case"Q":b.qx=c[1];b.qy=c[2];c=["C"].concat(a.quadratic2curve(b.x,b.y,c[1],c[2],c[3],c[4]));break;case"L":c=["C"].concat(b.x,b.y,c[1],c[2],c[1],c[2]);break;case"H":c=["C"].concat(b.x,b.y,c[1],b.y,c[1],b.y);break;case"V":c=["C"].concat(b.x,b.y,b.x,c[1],b.x,c[1]);break;case"Z":c=["C"].concat(b.x,b.y,b.X,b.Y,b.X,b.Y);break}return c},quadratic2curve:function(b,d,g,e,a,c){var f=1/3,h=2/3;return[f*b+h*g,f*d+h*e,f*a+h*g,f*c+h*e,a,c]},rotate:function(b,g,a){var d=Math.cos(a),c=Math.sin(a),f=b*d-g*c,e=b*c+g*d;return{x:f,y:e}},arc2curve:function(w,ai,K,I,C,o,g,v,ah,D){var A=this,e=Math.PI,B=A.radian,H=e*120/180,b=B*(+C||0),P=[],M=Math,W=M.cos,a=M.sin,Y=M.sqrt,z=M.abs,q=M.asin,L,c,s,R,Q,ad,d,U,X,F,E,n,m,u,j,ag,f,af,S,V,T,ae,ac,ab,Z,O,aa,N,G,J,r;if(!D){L=A.rotate(w,ai,-b);w=L.x;ai=L.y;L=A.rotate(v,ah,-b);v=L.x;ah=L.y;c=W(B*C);s=a(B*C);R=(w-v)/2;Q=(ai-ah)/2;ad=(R*R)/(K*K)+(Q*Q)/(I*I);if(ad>1){ad=Y(ad);K=ad*K;I=ad*I}d=K*K;U=I*I;X=(o==g?-1:1)*Y(z((d*U-d*Q*Q-U*R*R)/(d*Q*Q+U*R*R)));F=X*K*Q/I+(w+v)/2;E=X*-I*R/K+(ai+ah)/2;n=q(((ai-E)/I).toFixed(7));m=q(((ah-E)/I).toFixed(7));n=w<F?e-n:n;m=v<F?e-m:m;if(n<0){n=e*2+n}if(m<0){m=e*2+m}if(g&&n>m){n=n-e*2}if(!g&&m>n){m=m-e*2}}else{n=D[0];m=D[1];F=D[2];E=D[3]}u=m-n;if(z(u)>H){G=m;J=v;r=ah;m=n+H*(g&&m>n?1:-1);v=F+K*W(m);ah=E+I*a(m);P=A.arc2curve(v,ah,K,I,C,0,g,J,r,[m,G,F,E])}u=m-n;j=W(n);ag=a(n);f=W(m);af=a(m);S=M.tan(u/4);V=4/3*K*S;T=4/3*I*S;ae=[w,ai];ac=[w+V*ag,ai-T*j];ab=[v+V*af,ah-T*f];Z=[v,ah];ac[0]=2*ae[0]-ac[0];ac[1]=2*ae[1]-ac[1];if(D){return[ac,ab,Z].concat(P)}else{P=[ac,ab,Z].concat(P).join().split(",");O=[];N=P.length;for(aa=0;aa<N;aa++){O[aa]=aa%2?A.rotate(P[aa-1],P[aa],b).y:A.rotate(P[aa],P[aa+1],b).x}return O}},pathDimensions:function(m){if(!m||!m.length){return{x:0,y:0,width:0,height:0}}m=this.path2curve(m);var j=0,h=0,d=[],b=[],e=0,g=m.length,c,a,k,f;for(;e<g;e++){c=m[e];if(c[0]=="M"){j=c[1];h=c[2];d.push(j);b.push(h)}else{f=this.curveDim(j,h,c[1],c[2],c[3],c[4],c[5],c[6]);d=d.concat(f.min.x,f.max.x);b=b.concat(f.min.y,f.max.y);j=c[5];h=c[6]}}a=Math.min.apply(0,d);k=Math.min.apply(0,b);return{x:a,y:k,path:m,width:Math.max.apply(0,d)-a,height:Math.max.apply(0,b)-k}},intersectInside:function(b,c,a){return(a[0]-c[0])*(b[1]-c[1])>(a[1]-c[1])*(b[0]-c[0])},intersectIntersection:function(o,n,f,d){var c=[],b=f[0]-d[0],a=f[1]-d[1],k=o[0]-n[0],h=o[1]-n[1],m=f[0]*d[1]-f[1]*d[0],j=o[0]*n[1]-o[1]*n[0],g=1/(b*h-a*k);c[0]=(m*k-j*b)*g;c[1]=(m*h-j*a)*g;return c},intersect:function(o,c){var n=this,h=0,m=c.length,g=c[m-1],q=o,f,r,k,a,b,d;for(;h<m;++h){f=c[h];b=q;q=[];r=b[b.length-1];d=0;a=b.length;for(;d<a;d++){k=b[d];if(n.intersectInside(k,g,f)){if(!n.intersectInside(r,g,f)){q.push(n.intersectIntersection(r,k,g,f))}q.push(k)}else{if(n.intersectInside(r,g,f)){q.push(n.intersectIntersection(r,k,g,f))}}r=k}g=f}return q},curveDim:function(f,d,h,g,v,u,r,n){var t=(v-2*h+f)-(r-2*v+h),q=2*(h-f)-2*(v-h),m=f-h,k=(-q+Math.sqrt(q*q-4*t*m))/2/t,j=(-q-Math.sqrt(q*q-4*t*m))/2/t,o=[d,n],s=[f,r],e;if(Math.abs(k)>1000000000000){k=0.5}if(Math.abs(j)>1000000000000){j=0.5}if(k>0&&k<1){e=this.findDotAtSegment(f,d,h,g,v,u,r,n,k);s.push(e.x);o.push(e.y)}if(j>0&&j<1){e=this.findDotAtSegment(f,d,h,g,v,u,r,n,j);s.push(e.x);o.push(e.y)}t=(u-2*g+d)-(n-2*u+g);q=2*(g-d)-2*(u-g);m=d-g;k=(-q+Math.sqrt(q*q-4*t*m))/2/t;j=(-q-Math.sqrt(q*q-4*t*m))/2/t;if(Math.abs(k)>1000000000000){k=0.5}if(Math.abs(j)>1000000000000){j=0.5}if(k>0&&k<1){e=this.findDotAtSegment(f,d,h,g,v,u,r,n,k);s.push(e.x);o.push(e.y)}if(j>0&&j<1){e=this.findDotAtSegment(f,d,h,g,v,u,r,n,j);s.push(e.x);o.push(e.y)}return{min:{x:Math.min.apply(0,s),y:Math.min.apply(0,o)},max:{x:Math.max.apply(0,s),y:Math.max.apply(0,o)}}},getAnchors:function(f,e,k,j,x,w,s){s=s||4;var c=Math,r=c.PI,t=r/2,n=c.abs,a=c.sin,b=c.cos,g=c.atan,v,u,h,m,q,o,A,z,d;v=(k-f)/s;u=(x-k)/s;if((j>=e&&j>=w)||(j<=e&&j<=w)){h=m=t}else{h=g((k-f)/n(j-e));if(e<j){h=r-h}m=g((x-k)/n(j-w));if(w<j){m=r-m}}d=t-((h+m)%(r*2))/2;if(d>t){d-=r}h+=d;m+=d;q=k-v*a(h);o=j+v*b(h);A=k+u*a(m);z=j+u*b(m);if((j>e&&o<e)||(j<e&&o>e)){q+=n(e-o)*(q-k)/(o-j);o=e}if((j>w&&z<w)||(j<w&&z>w)){A-=n(w-z)*(A-k)/(z-j);z=w}return{x1:q,y1:o,x2:A,y2:z}},smooth:function(a,s){var r=this.path2curve(a),e=[r[0]],h=r[0][1],g=r[0][2],t,v,w=1,k=r.length,f=1,n=h,m=g,c=0,b=0;for(;w<k;w++){var B=r[w],A=B.length,z=r[w-1],o=z.length,u=r[w+1],q=u&&u.length;if(B[0]=="M"){n=B[1];m=B[2];t=w+1;while(r[t][0]!="C"){t++}c=r[t][5];b=r[t][6];e.push(["M",n,m]);f=e.length;h=n;g=m;continue}if(B[A-2]==n&&B[A-1]==m&&(!u||u[0]=="M")){var d=e[f].length;v=this.getAnchors(z[o-2],z[o-1],n,m,e[f][d-2],e[f][d-1],s);e[f][1]=v.x2;e[f][2]=v.y2}else{if(!u||u[0]=="M"){v={x1:B[A-2],y1:B[A-1]}}else{v=this.getAnchors(z[o-2],z[o-1],B[A-2],B[A-1],u[q-2],u[q-1],s)}}e.push(["C",h,g,v.x1,v.y1,B[A-2],B[A-1]]);h=v.x2;g=v.y2}return e},findDotAtSegment:function(b,a,d,c,j,h,g,f,k){var e=1-k;return{x:Math.pow(e,3)*b+Math.pow(e,2)*3*k*d+e*3*k*k*j+Math.pow(k,3)*g,y:Math.pow(e,3)*a+Math.pow(e,2)*3*k*c+e*3*k*k*h+Math.pow(k,3)*f}},snapEnds:function(r,b,n,o){if(Ext.isDate(r)){return this.snapEndsByDate(r,b,n,o)}var d=Math,e=d.pow,t=d.floor,f=(b-r)/n,j=t(d.log(f)/d.LN10)+1,g=e(10,j),u=d.round((f%g)*e(10,2-j)),v=Ext.draw.Draw.snapEndsIntervalWeights,h=v.length,a=0,w=1000000000,c,q,m,s,k;if(!o){r=t(r/g)*g}c=r;for(s=0;s<h;s++){q=v[s][0];m=(q-u)<0?1000000:(q-u)/v[s][1];if(m<w){k=q;w=m}}f=t(f*e(10,-j))*e(10,j)+k*e(10,j-2);while(c<b){c+=f;a++}if(!o){b=+c.toFixed(10)}return{from:r,to:b,power:j,step:f,steps:a}},snapEndsByDate:function(h,g,b,a){var d=false,f=[[Ext.Date.MILLI,[1,2,3,5,10,20,30,50,100,200,300,500]],[Ext.Date.SECOND,[1,2,3,5,10,15,30]],[Ext.Date.MINUTE,[1,2,3,5,10,20,30]],[Ext.Date.HOUR,[1,2,3,4,6,12]],[Ext.Date.DAY,[1,2,3,7,14]],[Ext.Date.MONTH,[1,2,3,4,6]]],c,e;Ext.each(f,function(k,j){for(c=0;c<k[1].length;c++){if(g<Ext.Date.add(h,k[0],k[1][c]*b)){d=[k[0],k[1][c]];return false}}});if(!d){e=this.snapEnds(h.getFullYear(),g.getFullYear()+1,b,a);d=[Ext.Date.YEAR,Math.round(e.step)]}return this.snapEndsByDateAndStep(h,g,d,a)},snapEndsByDateAndStep:function(h,g,e,a){var d=[h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds()],b=0,f,c;if(a){f=h}else{switch(e[0]){case Ext.Date.MILLI:f=new Date(d[0],d[1],d[2],d[3],d[4],d[5],Math.floor(d[6]/e[1])*e[1]);break;case Ext.Date.SECOND:f=new Date(d[0],d[1],d[2],d[3],d[4],Math.floor(d[5]/e[1])*e[1],0);break;case Ext.Date.MINUTE:f=new Date(d[0],d[1],d[2],d[3],Math.floor(d[4]/e[1])*e[1],0,0);break;case Ext.Date.HOUR:f=new Date(d[0],d[1],d[2],Math.floor(d[3]/e[1])*e[1],0,0,0);break;case Ext.Date.DAY:f=new Date(d[0],d[1],Math.floor((d[2]-1)/e[1])*e[1]+1,0,0,0,0);break;case Ext.Date.MONTH:f=new Date(d[0],Math.floor(d[1]/e[1])*e[1],1,0,0,0,0);break;default:f=new Date(Math.floor(d[0]/e[1])*e[1],0,1,0,0,0,0);break}}c=f;do{c=Ext.Date.add(c,e[0],e[1]);b++}while(c<g);if(a){c=g}return{from:+f,to:+c,step:(c-f)/b,steps:b}},sorter:function(d,c){return d.offset-c.offset},rad:function(a){return a%360*Math.PI/180},degrees:function(a){return a*180/Math.PI%360},withinBox:function(a,c,b){b=b||{};return(a>=b.x&&a<=(b.x+b.width)&&c>=b.y&&c<=(b.y+b.height))},updateIOS:Ext.os.is.iOS?function(){Ext.getBody().createChild({id:"frame-workaround",style:"position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; background: rgba(0,0,0,0.001); z-index: 100000"});Ext.fx.Frame.requestAnimationFrame(function(){Ext.get("frame-workaround").destroy()})}:Ext.emptyFn,parseGradient:function(m){var f=this,g=m.type||"linear",c=m.angle||0,d=m.degrees||0,k=f.radian,n=m.stops,a=[],j,b,h,e;if(g=="linear"){b=[0,0,Math.cos(c*k),Math.sin(c*k)];h=1/(Math.max(Math.abs(b[2]),Math.abs(b[3]))||1);b[2]*=h;b[3]*=h;if(b[2]<0){b[0]=-b[2];b[2]=0}if(b[3]<0){b[1]=-b[3];b[3]=0}}for(j in n){if(n.hasOwnProperty(j)&&f.stopsRE.test(j)){e={offset:parseInt(j,10),color:Ext.draw.Color.toHex(n[j].color)||"#ffffff",opacity:n[j].opacity||1};a.push(e)}}a.sort(f.sorter);if(g=="linear"){return{id:m.id,type:g,angle:c,degrees:d,vector:b,stops:a}}else{return{id:m.id,type:g,angle:c,degrees:d,centerX:m.centerX,centerY:m.centerY,focalX:m.focalX,focalY:m.focalY,radius:m.radius,vector:b,stops:a}}}});(function(){function c(d){return(function(f){this.fireEvent(d,f)})}function b(d){return function(){var g=Array.prototype.slice(arguments),f=this.items,e=f.length,h=0,j;for(;h<e;h++){j=f[h];j[d].apply(j,g)}}}function a(d,f,g,e){if(!Ext.isFunction(e)){e=function(h){return h}}return function(){var h=g.apply(this,arguments),m=Array.prototype.slice(arguments),k=this.items,j=this.items,n=0,o;for(;n<j;n++){o=k[n];h=f(h,o[d].apply(o,m))}return e(h)}}Ext.define("Ext.draw.CompositeSprite",{extend:"Ext.util.MixedCollection",statics:{RelayedEvents:["mousedown","mouseup","mouseover","mouseout","click"]},isCompositeSprite:true,constructor:function(d){var e=this;if(!d.surface){Ext.error("Specify surface to create Ext.draw.CompositeSprite.")}d=d||{};Ext.apply(e,d);e.id=Ext.id(null,"ext-sprite-group-");e.callParent(arguments)},attachEvents:function(f){var e=this,d=e.relayedEvents;if(!e.relayedEvents){d={scope:e};Ext.Array.each(Ext.draw.CompositeSprite.RelayedEvents,function(g){d[g]=c(g)});e.relayedEvents=d}f.on(d)},detachEvents:function(d){d.un(this.relayedEvents)},prepareItem:function(d){if(d.isSprite){return d}if(!d.surface){d.surface=this.surface}return new Ext.draw.Sprite(d)},add:function(e,f){if(f===undefined){f=e}if(!f.isSprite){f=this.prepareItem(f)}e=this.getKey(f);var d=this.callParent([e,f]);this.attachEvents(d);return d},insert:function(d,e,f){if(f===undefined){f=e}if(!f.isSprite){f=this.prepareItem(f)}e=this.getKey(f);if(!f.isSprite){f=new Ext.draw.Sprite(f)}return this.callParent([d,e,f])},remove:function(e){if(~this.indexOf(e)){var d=this;d.detachEvents(e);this.callParent(arguments)}},setAttributes:b("setAttributes"),setText:b("setText"),show:b("show"),hide:b("hide"),redraw:b("redraw"),tween:b("tween"),dirt:b("dirt"),setStyle:b("setStyle"),addCls:b("addCls"),removeCls:b("removeCls"),getBBox:a("getBBox",function(d,e){d.l=Math.min(d.l,e.x);d.b=Math.max(d.b,e.height+e.y);d.t=Math.min(d.t,e.y);d.r=Math.max(d.r,e.width+e.x);return d},function(){var d=Infinity;return{l:d,r:-d,t:d,b:-d}},function(d){return{x:d.l,y:d.t,height:d.b-d.t,width:d.r-d.l}}),getSurface:function(){var d=this.first();if(d){return d.surface}return null},destroy:function(){var f=this,d=f.surface,e;if(d){while(f.getCount()>0){e=f.first();f.remove(e);e.destroy()}d.removeGroup(f)}f.callParent()}})})();Ext.define("Ext.draw.Sprite",{mixins:{identifiable:"Ext.mixin.Identifiable",observable:"Ext.util.Observable"},dirty:false,dirtyHidden:false,dirtyTransform:false,dirtyPath:true,dirtyFont:true,zIndexDirty:true,isSprite:true,zIndex:0,fontProperties:["font","font-size","font-weight","font-style","font-family","text-anchor","text"],pathProperties:["x","y","d","path","height","width","radius","r","rx","ry","cx","cy"],minDefaults:{circle:{cx:0,cy:0,r:0,fill:"none"},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none"},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none"},text:{x:0,y:0,"text-anchor":"start",fill:"#000"},path:{d:"M0,0",fill:"none"},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none"}},constructor:function(a){var b=this;a=a||{};b.id=a.id||Ext.id(null,"ext-sprite-");b.transformations=[];b.surface=a.surface;b.group=a.group;b.type=a.type;b.bbox={};b.attr={zIndex:0,translation:{x:null,y:null},rotation:{degrees:null,x:null,y:null},scaling:{x:null,y:null,cx:null,cy:null}};delete a.surface;delete a.group;delete a.type;Ext.applyIf(a,b.minDefaults[b.type]);b.setAttributes(a);b.mixins.observable.constructor.apply(b,arguments);b.fx=new Ext.fx.Sprite({sprite:b})},getAttribute:function(b){var c=this,a=c.attr;if(b=="translate"&&a.translation){return a.translation}if(b=="scale"&&a.scaling){return a.scaling}if(b=="rotate"&&a.rotation){return a.rotation}if(b in c.attr){return c.attr[b]}return c.surface.getDefaultAttribute(b)||null},setAttributes:function(k,o){if(!k){return this}var u=this,j=u.fontProperties,s=j.length,g=u.pathProperties,f=g.length,t=!!u.surface,a=t&&u.surface.customAttributes||{},b=u.attr,m,q,h,c,r,n,w,d;for(m in a){if(k.hasOwnProperty(m)&&typeof a[m]=="function"){Ext.apply(k,a[m].apply(u,[].concat(k[m])))}}if(!!k.hidden!==!!b.hidden){u.dirtyHidden=true}for(q=0;q<f;q++){m=g[q];if(m in k&&k[m]!==b[m]){u.dirtyPath=true;break}}if("zIndex" in k&&k.zIndex!=b.zIndex){u.zIndexDirty=true}for(q=0;q<s;q++){m=j[q];if(m in k&&k[m]!==b[m]){u.dirtyFont=true;break}}h=k.translate||k.translation;c=b.translation;if(h){if((("x" in h)&&h.x!==c.x)||(("y" in h)&&h.y!==c.y)){Ext.apply(c,h);u.dirtyTransform=true}}r=k.rotate||k.rotation;n=b.rotation;if(r){if((("x" in r)&&r.x!==n.x)||(("y" in r)&&r.y!==n.y)||(("degrees" in r)&&r.degrees!==n.degrees)){Ext.apply(n,r);u.dirtyTransform=true}}w=k.scale||k.scaling;d=b.scaling;if(w){if((("x" in w)&&w.x!==d.x)||(("y" in w)&&w.y!==d.y)||(("cx" in w)&&w.cx!==d.cx)||(("cy" in w)&&w.cy!==d.cy)){Ext.apply(d,w);u.dirtyTransform=true}}for(var x in k){var e=k[x];if(x=="rotate"){x="rotation"}else{if(x=="scale"){x="scaling"}else{if(x=="translate"){x="translation"}}}b[x]=e}if(u.dirtyPath&&!u.dirtyTransform){if(b.rotation.x===null||b.rotation.y===null||b.scaling.x===null||b.scaling.y===null){u.dirtyTransform=true}}u.dirt();if(o===true&&t){u.redraw()}return this},getBBox:function(a){return this.surface.getBBox(this,a)},setText:function(a){return this.surface.setText(this,a)},hide:function(a){this.setAttributes({hidden:true},a);return this},show:function(a){this.setAttributes({hidden:false},a);return this},remove:function(){if(this.surface){this.surface.remove(this);return true}return false},onRemove:function(){this.surface.onRemove(this)},destroy:function(){var a=this;if(a.fireEvent("beforedestroy",a)!==false){a.remove();a.surface.onDestroy(a);if(a.fx){a.fx.stop();delete a.fx}a.clearListeners();a.fireEvent("destroy")}this.callParent()},redraw:function(){this.surface.renderItem(this);return this},tween:function(){this.surface.tween(this);return this},dirt:function(){if(!this.dirty){this.dirty=true;if(this.surface){this.surface.dirt()}}return this},setStyle:function(){this.element.setStyle.apply(this.element,arguments);return this},addCls:function(a){this.surface.addCls(this,a);return this},removeCls:function(a){this.surface.removeCls(this,a);return this}});Ext.define("Ext.draw.Matrix",{constructor:function(e,d,a,f,c,b){if(e!==undefined){this.matrix=[[e,a,c],[d,f,b],[0,0,1]]}else{this.matrix=[[1,0,0],[0,1,0],[0,0,1]]}},add:function(a,n,g,d,o,m){var f=this,b=[[],[],[]],k=[[a,g,o],[n,d,m],[0,0,1]],j,h,e,c;for(j=0;j<3;j++){for(h=0;h<3;h++){c=0;for(e=0;e<3;e++){c+=f.matrix[j][e]*k[e][h]}b[j][h]=c}}f.matrix=b;return f},prepend:function(a,n,g,d,o,m){var f=this,b=[[],[],[]],k=[[a,g,o],[n,d,m],[0,0,1]],j,h,e,c;for(j=0;j<3;j++){for(h=0;h<3;h++){c=0;for(e=0;e<3;e++){c+=k[j][e]*f.matrix[e][h]}b[j][h]=c}}f.matrix=b;return f},invert:function(){var k=this.matrix,j=k[0][0],h=k[1][0],q=k[0][1],o=k[1][1],n=k[0][2],m=k[1][2],g=1/(j*o-h*q);return new Ext.draw.Matrix(o*g,-h*g,-q*g,j*g,(q*m-o*n)*g,(h*n-j*m)*g)},clone:function(){var a=this.matrix;return new Ext.draw.Matrix(a[0][0],a[1][0],a[0][1],a[1][1],a[0][2],a[1][2])},translate:function(a,b){this.prepend(1,0,0,1,a,b);return this},scale:function(b,e,a,d){var c=this;if(e===null){e=b}c.add(1,0,0,1,a,d);c.add(b,0,0,e,0,0);c.add(1,0,0,1,-a,-d);return c},rotate:function(c,b,g){c=Ext.draw.Draw.rad(c);var e=this,f=+Math.cos(c).toFixed(9),d=+Math.sin(c).toFixed(9);e.add(f,d,-d,f,b,g);e.add(1,0,0,1,-b,-g);return e},x:function(a,c){var b=this.matrix;return a*b[0][0]+c*b[0][1]+b[0][2]},y:function(a,c){var b=this.matrix;return a*b[1][0]+c*b[1][1]+b[1][2]},get:function(b,a){return +this.matrix[b][a].toFixed(4)},isIdentity:function(){var a=this.matrix;return a[0][0]===1&&a[0][1]===0&&a[0][2]===0&&a[1][0]===1&&a[1][1]===0&&a[1][2]===0&&a[1][1]===0&&a[1][2]===0},equals:function(b){var a=this.matrix,c=b.matrix;return a[0][0]===c[0][0]&&a[0][1]===c[0][1]&&a[0][2]===c[0][2]&&a[1][0]===c[1][0]&&a[1][1]===c[1][1]&&a[1][2]===c[1][2]},toString:function(){var a=this;return[a.get(0,0),a.get(0,1),a.get(1,0),a.get(1,1),0,0].join(",")},toCanvas:function(a){var b=this.matrix;a.transform(b[0][0],b[1][0],b[0][1],b[1][1],b[0][2],b[1][2])},toSvg:function(){var a=this.matrix;return"matrix("+[a[0][0],a[1][0],a[0][1],a[1][1],a[0][2],a[1][2]].join(",")+")"},offset:function(){var a=this.matrix;return[a[0][2].toFixed(4),a[1][2].toFixed(4)]},split:function(){function d(f){return f[0]*f[0]+f[1]*f[1]}function b(f){var g=Math.sqrt(d(f));f[0]/=g;f[1]/=g}var a=this.matrix,c={translateX:a[0][2],translateY:a[1][2]},e;e=[[a[0][0],a[0][1]],[a[1][1],a[1][1]]];c.scaleX=Math.sqrt(d(e[0]));b(e[0]);c.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1];e[1]=[e[1][0]-e[0][0]*c.shear,e[1][1]-e[0][1]*c.shear];c.scaleY=Math.sqrt(d(e[1]));b(e[1]);c.shear/=c.scaleY;c.rotate=Math.asin(-e[0][1]);c.isSimple=!+c.shear.toFixed(9)&&(c.scaleX.toFixed(9)==c.scaleY.toFixed(9)||!c.rotate);return c}});Ext.baseCSSPrefix="x-";(function(){Ext.define("Ext.draw.Surface",{mixins:{identifiable:"Ext.mixin.Identifiable",observable:"Ext.util.Observable"},uses:["Ext.draw.engine.Canvas","Ext.draw.Sprite","Ext.draw.Matrix","Ext.draw.CompositeSprite"],statics:{create:function(b,d){return new Ext.draw.engine.Canvas(b);d=d||["Canvas","Svg"];var c=0,a=d.length;for(;c<a;c++){}return false},save:function(d,b){var e=[],h=[],a=[],c=[],j=[],f="Image";for(var g in b){if(b.hasOwnProperty(g)){if(g=="main"){e.push(b[g])}else{if(g.indexOf("Overlay")!=-1){a.push(b[g])}else{if(g.indexOf("Axis")!=-1){j.push(b[g])}else{if(g.indexOf("series")!=-1){h.push(b[g])}else{c.push(b[g])}}}}}}e=e.concat(j,h,a,c);if(d.type=="svg"||(!document.createElement("canvas").getContext)){f="Svg"}return Ext.draw.engine[f+"Exporter"].generate(d,e)},rectPath:function(a,e,b,c,d){if(d){return[["M",a+d,e],["l",b-d*2,0],["a",d,d,0,0,1,d,d],["l",0,c-d*2],["a",d,d,0,0,1,-d,d],["l",d*2-b,0],["a",d,d,0,0,1,-d,-d],["l",0,d*2-c],["a",d,d,0,0,1,d,-d],["z"]]}return[["M",a,e],["l",b,0],["l",0,c],["l",-b,0],["z"]]},ellipsePath:function(a,d,c,b){if(b==null){b=c}return[["M",a,d],["m",0,-b],["a",c,b,0,1,1,0,2*b],["a",c,b,0,1,1,0,-2*b],["z"]]},getPathpath:function(a){return a.attr.path},getPathcircle:function(c){var b=c.attr,d="radius" in b?b.radius:b.r;return this.ellipsePath(b.x,b.y,d)},getPathellipse:function(c){var b=c.attr;return this.ellipsePath(b.x,b.y,"radiusX" in b?b.radiusX:b.rx,"radiusY" in b?b.radiusY:b.ry)},getPathrect:function(c){var b=c.attr;return this.rectPath(b.x,b.y,b.width,b.height,b.r)},getPathimage:function(c){var b=c.attr;return this.rectPath(b.x||0,b.y||0,b.width,b.height)},getPathtext:function(a){var b=this.getBBoxText(a);return this.rectPath(b.x,b.y,b.width,b.height)},eventNames:["mouseup","mousedown","mouseover","mouseout","mousemove","mouseenter","mouseleave","click","dblclick","tap","tapstart","tapend","tapcancel","longpress","doubletap","singletap","touchstart","touchmove","touchend","drag","dragstart","dragend","pinch","pinchstart","pinchend","swipe"]},container:undefined,x:0,y:0,zoomX:1,zoomY:1,panX:0,panY:0,dirty:true,availableAttrs:{blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,"dominant-baseline":"auto",fill:"none","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:"",height:0,hidden:false,href:"http://sencha.com/",opacity:1,path:"M0,0",radius:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"none","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank",text:"","text-anchor":"middle",title:"Ext Draw",width:0,x:0,y:0,zIndex:0},config:{height:352,width:512,background:false,renderTo:false,items:[],groups:[],gradients:[]},constructor:function(a){var b=this;b.initConfig(a);b.domRef=Ext.getDoc().dom;b.customAttributes={};b.mixins.observable.constructor.apply(b,arguments);b.getId();if(b.getRenderTo()){b.render(b.getRenderTo())}},initializeEvents:function(){var b=this,a={};Ext.Array.each(Ext.draw.Surface.eventNames,function(c){a[c]=function(d){b.processEvent.apply(b,[c].concat(Array.prototype.slice.call(arguments)))}});a.scope=b;b.element.on(a)},addCustomAttribute:function(a,b){var c=this;c.customAttributes[a]=b;this.dirt()},removeCustomAttribute:function(a){delete this.customAttributes[a]},initializeDragEvents:function(){var a=this;if(a.dragEventsInitialized){return}a.dragEventsInitialized=true},initSurface:Ext.emptyFn,renderItem:Ext.emptyFn,renderItems:Ext.emptyFn,renderFrame:function(){this.dirty=false},setViewBox:Ext.emptyFn,tween:Ext.emptyFn,addCls:Ext.emptyFn,removeCls:Ext.emptyFn,setStyle:Ext.emptyFn,createWrapEl:function(a){return Ext.fly(a).createChild({tag:"div",cls:Ext.baseCSSPrefix+"surface-wrap",style:"overflow:hidden",id:this.id+"-wrap"})},applyGradients:function(b){var a={};if(b){Ext.each(b,function(c){c=this.parseGradient(c);a[c.id]=c},this)}return a},applyItems:function(b,c){var a;if(b instanceof Ext.draw.CompositeSprite){a=b}else{a=new Ext.draw.CompositeSprite({surface:this});a.addAll(this.prepareItems(b,true))}if(c){if(b!=c){c.destroy()}}return a},applyGroups:function(b,c){var a=new Ext.util.MixedCollection();if(b instanceof Ext.util.MixedCollection){a=b}else{a.addAll(b)}if(c){c.each(function(d){if(!a.contains()){d.destroy()}})}return a},applyBackground:function(b){var d=this,e,f,c=d.getWidth(),a=d.getHeight();if(b){if(b.renderGradient){f=b.renderGradient;e=f.id;d.addGradient(f);return d.add({type:"rect",x:0,y:0,width:c,height:a,fill:"url(#"+e+")",zIndex:-100})}else{if(b.fill){return d.add({type:"rect",x:0,y:0,width:c,height:a,fill:b.fill,zIndex:-100})}else{if(b.image){return d.add({type:"image",x:0,y:0,width:c,height:a,src:b.image,zIndex:-100})}}}}},setSize:function(a,b){if(this.getBackground()){this.getBackground().setAttributes({width:a,height:b,hidden:false},true)}this.setWidth(a);this.setHeight(b);this.updateSurfaceElBox()},scrubAttrs:function(d){var e=this,b={},a={},f=d.attr,c;for(c in f){if(e.translateAttrs.hasOwnProperty(c)){b[e.translateAttrs[c]]=f[c];a[e.translateAttrs[c]]=true}else{if(e.availableAttrs.hasOwnProperty(c)&&!a[c]){b[c]=f[c]}}}return b},processEvent:function(a,d){var c=this,b=c.getSpriteForEvent(d);if(b){b.fireEvent(a,b,d)}c.fireEvent.apply(c,arguments)},getSpriteForEvent:function(a){return null},addGradient:function(b){var a=this;b=a.parseGradient(b);a.getGradients()[b.id]=b},parseGradient:Ext.emptyFn,add:function(){var g=this,e=Array.prototype.slice.call(arguments),a=e.length>1,h,f,c,d,j,b;if(a||Ext.isArray(e[0])){f=a?e:e[0];b=[];for(c=0,d=f.length;c<d;c++){j=f[c];j=g.add(j);b.push(j)}return b}h=g.prepareItems(e[0],true)[0];g.normalizeSpriteCollection(h);g.onAdd(h);g.dirt();return h},normalizeSpriteCollection:function(c){var b=this.getItems(),d=c.attr.zIndex,a=b.indexOf(c);if(a<0||(a>0&&b.getAt(a-1).attr.zIndex>d)||(a<b.length-1&&b.getAt(a+1).attr.zIndex<d)){b.removeAt(a);a=b.findIndexBy(function(e){return e.attr.zIndex>d});if(a<0){a=b.length}b.insert(a,c)}return a},onAdd:function(d){var f=d.group,b=d.draggable,a,e,c;if(f){a=[].concat(f);e=a.length;for(c=0;c<e;c++){f=a[c];this.getGroup(f).add(d)}delete d.group}if(b){d.initDraggable()}},remove:function(a,b){if(a){this.getItems().remove(a);this.getGroups().each(function(c){c.remove(a)});a.onRemove();if(b===true){a.destroy()}this.dirt()}},removeAll:function(d){var a=this.getItems().items,c=a.length,b;for(b=c-1;b>-1;b--){this.remove(a[b],d)}},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,applyTransformations:function(b){b.bbox.transform=0;b.dirtyTransform=false;var d=this,c=false,a=b.attr;if(a.translation.x!=null||a.translation.y!=null){d.translate(b);c=true}if(a.scaling.x!=null||a.scaling.y!=null){d.scale(b);c=true}if(a.rotation.degrees!=null){d.rotate(b);c=true}if(c){b.bbox.transform=0;d.transform(b);b.transformations=[]}},rotate:function(d){var h,e=d.attr.rotation.degrees,g=d.attr.rotation.x,f=d.attr.rotation.y,c=d.attr.translation,b=c&&c.x||0,a=c&&c.y||0;if(!Ext.isNumber(g)||!Ext.isNumber(f)){h=this.getBBox(d,true);g=!Ext.isNumber(g)?(h.x+b)+h.width/2:g;f=!Ext.isNumber(f)?(h.y+a)+h.height/2:f}d.transformations.push({type:"rotate",degrees:e,x:g,y:f})},translate:function(b){var a=b.attr.translation.x||0,c=b.attr.translation.y||0;b.transformations.push({type:"translate",x:a,y:c})},scale:function(b){var e,a=b.attr.scaling.x||1,f=b.attr.scaling.y||1,d=b.attr.scaling.centerX,c=b.attr.scaling.centerY;if(!Ext.isNumber(d)||!Ext.isNumber(c)){e=this.getBBox(b);d=!Ext.isNumber(d)?e.x+e.width/2:d;c=!Ext.isNumber(c)?e.y+e.height/2:c}b.transformations.push({type:"scale",x:a,y:f,centerX:d,centerY:c})},createGroup:function(b){var a=this.getGroups().get(b);if(!a){a=new Ext.draw.CompositeSprite({surface:this});a.id=b||Ext.id(null,"ext-surface-group-");this.getGroups().add(a)}this.dirt();return a},removeGroup:function(a){if(Ext.isString(a)){a=this.getGroups().get(a)}if(a){this.getGroups().remove(a)}this.dirt()},getGroup:function(b){if(typeof b=="string"){var a=this.getGroups().get(b);if(!a){a=this.createGroup(b)}}else{a=b}return a},prepareItems:function(a,c){a=[].concat(a);var f,b,e,d=this;for(b=0,e=a.length;b<e;b++){f=a[b];if(!(f instanceof Ext.draw.Sprite)){f.surface=d;a[b]=d.createItem(f)}else{f.surface=d}}return a},setText:Ext.emptyFn,createItem:Ext.emptyFn,getId:function(){return this.id||(this.id=Ext.id(null,"ext-surface-"))},destroy:function(){delete this.domRef;this.removeAll(true);this.setGroups([]);this.getItems().destroy();this.callParent()},clear:Ext.emtpyFn,dirt:function(){this.dirty=true},updateSurfaceElBox:function(){var u=this,q=Math.floor,j=u.getWidth(),c=u.getHeight(),m=q(j*u.zoomX),g=q(c*u.zoomY),t=u.panX,s=u.panY,r=2000,k=1500,a=u.surfaceEl,d=a.dom,n=u.surfaceEl.dom.getContext("2d"),b=false,e,o,h,f;if(d.width!=m||d.height!=g){a.setSize(m,g);d.width=m;d.height=g;if(b){n.translate(h,f)}}a.setTop(s);a.setLeft(t);this.dirt()},setSurfaceTransform:function(b,a,e,d){var c=this;c.panX=b;c.panY=a;c.zoomX=e;c.zoomY=d;c.setSurfaceFastTransform(null);c.updateSurfaceElBox();c.renderFrame()},setSurfaceFastTransform:function(a){this.transformMatrix=a;this.surfaceEl.setStyle({webkitTransformOrigin:"0 0",webkitTransform:a?a.toSvg():"matrix(1,0,0,1,0,0)"});this.renderFrame()},getDefaultAttribute:function(a){var b=this;if(a in b.availableAttrs){return b.availableAttrs[a]}return false}})})();Ext.define("Ext.draw.engine.Canvas",{extend:"Ext.draw.Surface",uses:["Ext.fx.Frame"],attributeMap:{stroke:"strokeStyle",fill:"fillStyle",lineWidth:"lineWidth","text-anchor":"textAlign","stroke-width":"lineWidth","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit",opacity:"globalAlpha",font:"font","font-family":"font","font-size":"font",shadowColor:"shadowColor",shadowOffsetX:"shadowOffsetX",shadowOffsetY:"shadowOffsetY",shadowBlur:"shadowBlur",textBaseline:"textBaseline",translate:"translate",scale:"scale",rotate:"rotate"},attributeDefaults:{strokeStyle:"rgba(0, 0, 0, 1)",fillStyle:"rgba(0, 0, 0, 1)",lineWidth:1,lineCap:"square",lineJoin:"miter",miterLimit:1,shadowColor:"none",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,font:"10px 'Helvetica', 'sans-serif'",textAlign:"start",globalAlpha:1,textBaseline:"middle",translate:{x:0,y:0},scale:{x:1,y:1},rotate:{degrees:0}},rgbRe:/\s*rgba?\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*(,\s*[0-9\.]+\s*)?\)\s*/,gradientRe:/\s*url\s*\(#([^\)]+)\)\s*/,srcRe:/^"?([^"]*)"?$/,loadedImages:{},attributeParsers:{font:function(e,b,c,d){var a=c.attr;if(!a.font&&a["font-size"]&&a["font-family"]){return a.font||a["font-size"]+"px '"+a["font-family"]+"'"}return a.font},fillStyle:function(d,a,b,c){if(!d){return d}if(Ext.isObject(d)){c.addGradient(d);d="url(#"+d.id+")"}var e=d.match(c.gradientRe);if(e){return c.createGradient(c._gradients[e[1]],b)}else{return d=="none"?"rgba(0, 0, 0, 0)":d}},strokeStyle:function(d,a,b,c){if(!d){return d}if(Ext.isObject(d)){c.addGradient(d);d="url(#"+d.id+")"}var e=d.match(c.gradientRe);if(e){return c.createGradient(c._gradients[e[1]],b)}else{return d=="none"?"rgba(0, 0, 0, 0)":d}},textAlign:function(c,a,b){if(c==="middle"){return"center"}return c}},statics:{zIndexSort:function(e,c){var h=e.attr,g=c.attr,f=h&&h.zIndex||-1,d=g&&g.zIndex||-1,j=f-d;if(!j){return(e.id>c.id)?1:-1}else{return j}},merge:function(e,d){var g=0,k=e.length,f=0,h=d.length,c=[];while(g<k&&f<h){if(this.zIndexSort(e[g],d[f])<=0){c.push(e[g++])}else{c.push(d[f++])}}while(g<k){c.push(e[g++])}while(f<h){c.push(d[f++])}return c},mergeSort:function(c){if(c.length<=1){return c}else{if(c.length===2){if(this.zIndexSort(c[0],c[1])>0){var a=c[1];c[1]=c[0];c[0]=a}return c}else{var b=c.length>>1;return this.merge(this.mergeSort(c.slice(0,b)),this.mergeSort(c.slice(b)))}}}},constructor:function(a){var b=this;b.initEvents="initEvents" in a?a.initEvents:true;b._gradients={};b.callParent(arguments);b.initCanvas(a.renderTo,a);Ext.fx.Frame.addFrameCallback(b.renderFrame,b);this.surfaceEl.on("contextmenu",function(){return false})},initCanvas:function(a,d){if(this.ctx){return}var g=this,f=Ext.get(a),b=f.getWidth()||d.width,j=f.getHeight()||d.height,e=g.createWrapEl(a),h=e.createChild({tag:"canvas",id:g.id+"-canvas",width:b,height:j}),c=h.dom,k=c.getContext("2d");e.setSize(b,j);g.element=e;g.surfaceEl=h;g.ctx=k;k.save();g.initializeEvents()},getSpriteForEvent:function(){return null},parseGradient:function(a){return Ext.draw.Draw.parseGradient(a)},transform:function(d){var a=new Ext.draw.Matrix(),f=d.transformations,g=f.length,c=0,b,e;for(;c<g;c++){b=f[c];e=b.type;if(e=="translate"){a.translate(b.x,b.y)}else{if(e=="rotate"){a.rotate(b.degrees,b.x,b.y)}else{if(e=="scale"){a.scale(b.x,b.y,b.centerX,b.centerY)}}}}d.matrix=a},setSize:function(b,e){var d,a,f=this,c=f.surfaceEl.dom;if(b&&typeof b=="object"){d=b.width;a=b.height}else{d=b;a=e}if(d!==c.width||a!==c.height){f.element.setSize(d,a);f.surfaceEl.setSize(d,a);c.width=d;c.height=a}f.callParent([d,a])},tween:function(){this.animatedFrame=true;this.callParent()},renderFrame:function(){this.render()},render:function(){var a=this;if(!a.surfaceEl){return}a.renderAll()},createItem:function(a){var b=new Ext.draw.Sprite(a);b.surface=this;b.matrix=new Ext.draw.Matrix();b.bbox={plain:0,transform:0};return b},renderAll:function(){if(this.dirty){var a=this;a.clear();Ext.draw.engine.Canvas.mergeSort(a.getItems().items);a.getItems().each(a.renderSprite,a);a.dirty=false}},renderSprite:function(j){j.dirtyHidden=j.dirtyPath=j.zIndexDirty=j.dirtyFont=j.dirty=false;if(j.attr.hidden){return}if(!j.matrix){j.matrix=new Ext.draw.Matrix()}var h=this,k=h.ctx,g=j.attr,f=h.attributeMap,d=h.attributeDefaults,a=h.attributeParsers,b,c,e;if(j.dirtyTransform){h.applyTransformations(j);j.dirtyTransform=false}k.save();j.matrix.toCanvas(k);for(b in f){c=f[b];if(c in a){e=a[c]((b in g)?g[b]:h.availableAttrs[b],b,j,h);if(e===undefined){e=d[c]}if(k[c]!=e){k[c]=e}}else{if(typeof k[c]!=="function"){e=(b in g)?g[b]:d[c];if(k[c]!=e){k[c]=e}}}}h[j.type+"Render"](j);k.restore()},circleRender:function(e){var f=this,d=f.ctx,c=e.attr,b=+(c.x||0),h=+(c.y||0),a=c.radius,g=Ext.draw.Draw.pi2;d.beginPath();d.arc(b,h,a,0,g,true);d.closePath();f.fill();f.stroke()},ellipseRender:function(n){var g=this,q=g.ctx,e=n.attr,a=e.width,o=e.height,j=+(e.x||0),h=+(e.y||0),m=1,k=1,c=1,b=1,d=0,f=Ext.draw.Draw.pi2;if(a>o){d=a/2;k=o/a;b=a/o}else{d=o/2;m=a/o;c=o/a}q.scale(m,k);q.beginPath();q.arc(j*c,h*b,d,0,f,true);q.closePath();g.stroke()},imageRender:function(k){var f=this,n=f.ctx,e=k.attr,c=e.width,m=e.height,j=+(e.x||0),g=+(e.y||0),b=e.src&&e.src.match(f.srcRe)[1],h,d;if(k._img&&k._img.src==b){d=k._img}else{k._img=d=new Image();d.height=m;d.width=c;h=document.createElement("a");h.href=b;b=h.href;if(!f.loadedImages[b]){d.onload=function(){if(!f.loadedImages[b]){f.loadedImages[b]=true;k.dirt();f.renderFrame()}}}d.src=b;e.src=b}if(f.loadedImages[b]){n.drawImage(d,j-c/2,g-m/2,c,m)}},rectRender:function(e){var g=this,d=g.ctx,c=e.attr,f=c.width,b=c.height,a=+(c.x||0),h=+(c.y||0);if(isFinite(a)&&isFinite(h)&&isFinite(f)&&isFinite(b)){g.fillRect(a,h,f,b);g.strokeRect(a,h,f,b)}},textRender:function(d){var e=this,c=e.ctx,g=d.getBBox(true),b=d.attr,a=+(b.x||0),h=+(b.y||0),f=b.text;if(isFinite(a)&&isFinite(h)){e.fillText(f,a,h)}},pathRender:function(g){if(!g.attr.path){return}var d=this,h=d.ctx,b=g.attr,j=Ext.draw.Draw.path2curve(b.path),c=j.length,f,e,a;h.beginPath();for(a=0;a<c;a++){switch(j[a][0]){case"M":h.moveTo(j[a][1],j[a][2]);if(f===null){f=j[a][1]}if(e===null){e=j[a][2]}break;case"C":h.bezierCurveTo(j[a][1],j[a][2],j[a][3],j[a][4],j[a][5],j[a][6]);break;case"Z":h.lineTo(f,e);break}}if(b.fill&&b.fill!="none"&&b.fill!="rgba(0, 0, 0, 0)"){d.fill()}if(b.stroke&&b.stroke!="none"&&b.stroke!="rgba(0, 0, 0, 0)"){d.stroke()}h.closePath()},contains:function(a,f){var e=this,c=e.getItems().items,b=c.length,d;while(b--){d=c[b];if(e.bboxContains(a,f,d)){if(e[d.type+"Contains"](a,f,d)){return{target:d}}}}return false},bboxContains:function(a,d,b){var c=b.getBBox();return(a>=c.x&&a<=(c.x+c.width)&&(d>=c.y&&d<=(c.y+c.height)))},circleContains:function(f,e,g){var d=g.attr,j=d.translation,b=(d.x||0)+(j&&j.x||0),a=(d.y||0)+(j&&j.y||0),k=f-b,h=e-a,c=d.radius;return(k*k+h*h)<=(c*c)},ellipseContains:function(h,g,m){var f=m.attr,q=f.translation,d=(f.x||0)+(q&&q.x||0),c=(f.y||0)+(q&&q.y||0),b=f.radiusX||(f.width/2)||0,a=f.radiusY||(f.height/2)||0,e=0,k=1,j=1,o,n;if(b>a){e=b;j=a/b}else{e=a;j=b/a}o=(h-d)/k;n=(g-c)/j;return(o*o+n*n)<=(e*e)},imageContains:function(a,c,b){return true},rectContains:function(a,c,b){return true},textContains:function(a,c,b){return true},pathContains:function(a,c,b){return false},createGradient:function(j,m){var r=this.ctx,o=m.getBBox(),d=o.x,k=o.y,c=o.width,q=o.height,b=d+c,f=k+q,h=Math.round(Math.abs(j.degrees||j.angle||0)%360),n=j.stops,e,g;if(h<=0){g=r.createLinearGradient(d,k,d,f)}else{if(h<=45){g=r.createLinearGradient(d,k,b,f)}else{if(h<=90){g=r.createLinearGradient(d,k,b,k)}else{if(h<=135){g=r.createLinearGradient(b,k,d,f)}else{if(h<=180){g=r.createLinearGradient(d,f,d,k)}else{if(h<=225){g=r.createLinearGradient(b,f,d,k)}else{if(h<=270){g=r.createLinearGradient(b,k,d,k)}else{if(h<=315){g=r.createLinearGradient(d,f,b,k)}else{g=r.createLinearGradient(d,k,b,f)}}}}}}}}for(e in n){if(n.hasOwnProperty(e)){g.addColorStop((n[e].offset||0)/100,n[e].color||"#000")}}return g},getBBox:function(a,b){if(a.type=="text"){return this.getBBoxText(a,b)}var c=Ext.draw.Surface["getPath"+a.type](a);if(b){a.bbox.plain=a.bbox.plain||Ext.draw.Draw.pathDimensions(c);return a.bbox.plain}a.bbox.transform=Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(c,a.matrix));return a.bbox.transform},getBBoxText:function(t,b){var E=this,w=E.ctx,v=t.attr,z,j=v.x||0,h=v.y||0,B,A,c,a,r,D,f,s,d,k,C,e,u,q,o=v.font,q=v["font-size"]||+(o&&o.match(/[0-9]+/)[1])||10,m=v.text,n=v.textBaseline||E.attributeDefaults.textBaseline,g=v["text-anchor"]||v.textAlign||E.attributeDefaults.textAlign;if(o&&w.font!==o){w.font=o}u=w.measureText(m).width;switch(n){case"top":h-=q;break;case"hanging":case"ideographic":case"alphabetic":h-=q*0.8;break;case"middle":case"center":h-=q*0.5;break;case"bottom":break}switch(g){case"end":case"right":j-=u;break;case"middle":case"center":j-=u*0.5;break}if(!b){if(t.dirtyTransform){E.applyTransformations(t)}z=t.matrix;B=j;c=h;A=j+u;a=h+q;r=z.x(B,c);d=z.y(B,c);D=z.x(B,a);k=z.y(B,a);f=z.x(A,c);C=z.y(A,c);s=z.x(A,a);e=z.y(A,a);j=Math.min(r,D,f,s);h=Math.min(d,k,C,e);u=Math.abs(j-Math.max(r,D,f,s));q=Math.abs(h-Math.max(d,k,C,e))}return{x:j,y:h,width:u,height:q}},getRegion:function(){var a=this.surfaceEl.dom,b=this.surfaceEl.getXY();return{left:b[0],top:b[1],right:b[0]+a.width,bottom:b[1]+a.height}},getShadowAttributesArray:function(a){if(a){return[{"stroke-width":6,"stroke-opacity":1,stroke:"rgba(200, 200, 200, 0.5)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgba(150, 150, 150, 0.5)",translate:{x:0.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgba(100, 100, 100, 0.5)",translate:{x:0.6,y:1}}]}else{return[]}},getShadowOptions:function(a){return{shadowOffsetX:2,shadowOffsetY:Ext.os.is("Android")?-2:2,shadowBlur:3,shadowColor:"#444"}},clear:function(){var b=this,a=b.surfaceEl.dom;b.ctx.clearRect(0,0,a.width,a.height)},getDefaultAttribute:function(a){var b=this,d=b.attributeMap,c=b.attributeDefaults;if(a in d){return c[d[a]]}else{if(a in c){return c[a]}}return false},destroy:function(){var a=this;delete a.ctx;a.surfaceEl.destroy();delete a.surfaceEl;a.element.destroy();delete a.element;Ext.fx.Frame.removeFrameCallback(a.renderFrame,a);a.callParent(arguments)}},function(){function a(c,b){b=b+"-opacity";return(function(){var g=this,d=g.ctx,f=+g.ctx.globalAlpha,e=g[b]===undefined?1:g[b];if(f>0){if(e!==undefined&&e<1&&e>0){d.globalAlpha=f*e;d[c].apply(d,arguments);d.globalAlpha=f}else{d[c].apply(d,arguments)}}})}this.addMembers({stroke:a("stroke","stroke"),fill:a("fill","fill"),strokeRect:a("strokeRect","stroke"),fillRect:a("fillRect","fill"),strokeText:a("strokeText","stroke"),fillText:a("fillText","fill")})});Ext.define("Ext.draw.engine.SvgExporter",{generate:function(f,b){var r=this,d=r.width,t=r.height,n=r.gradients,b=r.surfaces,m='<?xml version="1.0" standalone="yes"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="'+d+'px" height="'+t+'px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',s,k,q,h,a,u,o,c,g,e;for(k=0,q=b.length;k<q;k++){c=b[k];o=c.getItems().items;a=o.length;if(a==0){continue}e=parseFloat(c.element.getStyle("top"));g=parseFloat(c.element.getStyle("left"));e=isNaN(e)?0:e;g=isNaN(g)?0:g;m+='<svg x="'+g+'" y="'+e+'" width="'+c.width+'" height="'+c.height+'">';if(n.length>0){m+="<defs>";s=n[k];for(h=0,a=s.length;h<a;h++){m+=r.renderGradient(s[h])}m+="</defs>"}for(h=0;h<a;h++){u=o[h];if(!u.attr.hidden){m+=r[u.type](u)}}m+="</svg>"}m+="</svg>";return m},toPropertyString:function(c){var b=[];for(var a in c){if(c.hasOwnProperty(a)&&c[a]!==null){b.push(a,'="',c[a],'"')}}return b.join(" ")},path:function(h){var g=this,d=h.attr,j=d.path,b,c,e,a;if(Ext.isArray(j[0])){b=[];for(c=0,e=j.length;c<e;c++){a=j[c];b.push(a.join(" "))}b=b.join("")}else{if(Ext.isArray(j)){b=j.join(" ")}else{b=j.replace(/,/g," ")}}var f=g.toPropertyString({d:b,fill:d.fill,stroke:d.stroke,"fill-opacity":d.opacity,"stroke-width":d["stroke-width"],"stroke-opacity":d["stroke-opacity"],transform:h.matrix.toSvg()});return"<path "+f+"/>"},text:function(h){var g=this,e=h.attr,a=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)\s('*.*'*)/,d=a.exec(e.font),k=d[1],c=d[3],j=e.text,b="",f=g.toPropertyString({x:e.x,y:e.y,"font-size":k,"font-family":c,"font-weight":e["font-weight"],"text-anchor":e["text-anchor"],fill:e.fill||"#000","fill-opacity":e.opacity,transform:h.matrix.toSvg()});b+='<tspan x="'+e.x+'" dy="'+(k/4)+'">';b+=Ext.String.htmlEncode(j)+"</tspan>";return"<text "+f+">"+b+"</text>"},rect:function(b){var d=this,a=b.attr,c=d.toPropertyString({x:a.x,y:a.y,rx:a.rx,ry:a.ry,width:a.width,height:a.height,fill:a.fill,"fill-opacity":a.opacity,stroke:a.stroke,"stroke-width":a["stroke-width"],"stroke-opacity":a["stroke-opacity"],transform:b.matrix.toSvg()});return"<rect "+c+"/>"},circle:function(b){var d=this,a=b.attr,c=d.toPropertyString({cx:a.x,cy:a.y,r:a.radius,fill:a.translation.fill||a.fill,"fill-opacity":a.opacity,stroke:a.stroke,"stroke-width":a["stroke-width"],"stroke-opacity":a["stroke-opacity"],transform:b.matrix.toSvg()});return"<circle "+c+" />"},image:function(b){var d=this,a=b.attr,c=d.toPropertyString({x:a.x-(a.width/2>>0),y:a.y-(a.height/2>>0),width:a.width,height:a.height,"xlink:href":a.src,transform:b.matrix.toSvg()});return"<image "+c+" />"},renderGradient:function(e){var d=e.stops,c,b="";for(var a in d){if(d.hasOwnProperty(a)){c=d[a];b+='<stop offset="'+a+'%" stop-color="'+d[a].color+'" />'}}return'<linearGradient id="'+e.id+'" x1="0%" x2="0%" y1="0%" y2="100%" >'+b+"</linearGradient>"}});Ext.define("Ext.draw.engine.ImageExporter",{singleton:true,generate:function(f,a){var e=document.createElement("canvas"),m=f.type||"image/png",j=a.length,q=e.getContext("2d"),d=a[0].canvas.width,o=a[0].canvas.height;e.width=d;e.height=o;if(m=="image/jpeg"){q.save();q.fillStyle="rgb(255,255,255)";q.fillRect(0,0,d,o);q.restore()}for(var h=0;h<j;h++){var b=a[h],k=b.canvas,d=b.element.getWidth(),o=b.element.getHeight(),n=b.element.getStyle("top").replace(/px/,""),g=b.element.getStyle("left").replace(/px/,"");n=isNaN(n)?0:n;g=isNaN(g)?0:g;if(d&&o){q.drawImage(k,g,n)}}return e.toDataURL(f.type)}});Ext.define("Ext.draw.Component",{extend:"Ext.Component",uses:["Ext.draw.Surface"],enginePriority:["Canvas"],config:{baseCls:"ext-surface",componentLayout:"draw",viewBox:true,autoSize:false,gradients:[]},cls:"x-draw-component",initialize:function(){var d=this,j=d.getViewBox(),b=d.getAutoSize(),g,c,a,h,f,e;d.callParent();d.surface=d.createSurface();c=d.surface.getItems();if(j||b){g=c.getBBox();a=g.width;h=g.height;f=g.x;e=g.y;if(d.getViewBox()){d.surface.setViewBox(f,e,a,h)}else{d.autoSizeSurface()}}d.relayEvents(d.getEventsSurface(),Ext.draw.Surface.eventNames);d.on("painted","onPainted");d.sizeMonitor=new Ext.util.SizeMonitor({element:d.renderElement,callback:d.onResize,scope:d})},onPainted:function(){var a=this;a.sizeMonitor.refresh();a.onResize()},onResize:function(){var d=this,j=d.getViewBox(),b=d.getAutoSize(),c=d.surface.getItems(),g,c,a,h,f,e;if(j||b){g=c.getBBox();a=g.width;h=g.height;f=g.x;e=g.y;if(d.getViewBox()){d.surface.setViewBox(f,e,a,h)}else{d.autoSizeSurface()}}d.surface.setSize(d.element.getWidth(),d.element.getHeight());d.surface.updateSurfaceElBox();d.surface.renderFrame()},getEventsSurface:function(){return this.surface},autoSizeSurface:function(){var d=this,b=d.surface.getItems(),e=b.getBBox(),c=e.width,a=e.height;b.setAttributes({translate:{x:-e.x,y:-e.y+(+Ext.isOpera)}},true);if(d.rendered){d.setSize(c,a)}d.surface.setSize(c,a);d.element.setSize(c,a)},createSurface:function(b){var c=this,a=Ext.apply;return Ext.draw.Surface.create(a({},a({width:c.getWidth(),height:c.getHeight(),renderTo:c.element,id:Ext.id()},b),c.initialConfig))},repaint:function(){if(this.surface){this.surface.renderFrame()}},destroy:function(){var a=this.surface;if(a){a.destroy()}this.sizeMonitor.destroy();this.callParent()}});Ext.define("Ext.chart.Shape",{singleton:true,image:function(a,b){b.height=b.height||16;b.width=b.width||16;return a.add(Ext.applyIf({type:"image",x:b.x,y:b.y,height:b.height,width:b.width,src:b.src},b))},circle:function(a,b){return a.add(Ext.apply({type:"circle",x:b.x,y:b.y,stroke:null,radius:b.radius},b))},line:function(a,b){return a.add(Ext.apply({type:"rect",x:b.x-b.radius,y:b.y-b.radius,height:2*b.radius,width:2*b.radius/5},b))},square:function(a,b){return a.add(Ext.applyIf({type:"rect",x:b.x-b.radius,y:b.y-b.radius,height:2*b.radius,width:2*b.radius,radius:null},b))},triangle:function(a,b){b.radius*=1.75;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(b.x,",",b.y,"m0-",b.radius*0.58,"l",b.radius*0.5,",",b.radius*0.87,"-",b.radius,",0z")},b))},diamond:function(a,c){var b=c.radius;b*=1.5;return a.add(Ext.apply({type:"path",stroke:null,path:["M",c.x,c.y-b,"l",b,b,-b,b,-b,-b,b,-b,"z"]},c))},cross:function(a,c){var b=c.radius;b=b/1.7;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(c.x-b,",",c.y,"l",[-b,-b,b,-b,b,b,b,-b,b,b,-b,b,b,b,-b,b,-b,-b,-b,b,-b,-b,"z"])},c))},plus:function(a,c){var b=c.radius/1.3;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(c.x-b/2,",",c.y-b/2,"l",[0,-b,b,0,0,b,b,0,0,b,-b,0,0,b,-b,0,0,-b,-b,0,0,-b,"z"])},c))},arrow:function(a,c){var b=c.radius;return a.add(Ext.apply({type:"path",path:"M".concat(c.x-b*0.7,",",c.y-b*0.4,"l",[b*0.6,0,0,-b*0.4,b,b*0.8,-b,b*0.8,0,-b*0.4,-b*0.6,0],"z")},c))},drop:function(b,a,f,e,c,d){c=c||30;d=d||0;b.add({type:"path",path:["M",a,f,"l",c,0,"A",c*0.4,c*0.4,0,1,0,a+c*0.7,f-c*0.7,"z"],fill:"#000",stroke:"none",rotate:{degrees:22.5-d,x:a,y:f}});d=(d+90)*Math.PI/180;b.add({type:"text",x:a+c*Math.sin(d)-10,y:f+c*Math.cos(d)+5,text:e,"font-size":c*12/40,stroke:"none",fill:"#fff"})}});Ext.define("Ext.chart.Toolbar",{extend:"Ext.Container",isChartToolbar:true,config:{baseCls:Ext.baseCSSPrefix+"chart-toolbar",chart:null,position:false,docked:"top",defaultType:"button"},isOrientationSpecific:function(){var a=this.getPosition();return(a&&Ext.isObject(a)&&"portrait" in a)},getDockedPosition:function(){var c=this,a=c.getPosition(),b=c.getChart().getLegend();if(!a&&b){a=b.getDockedPosition()}else{if(c.isOrientationSpecific()){a=a[Ext.Viewport.getOrientation()]}}if(!a||!Ext.isString(a)){a="bottom"}return a},orient:function(){var b=this,a=Ext.Viewport.getOrientation();if(a!==b.lastOrientation){b.element.dom.setAttribute("data-side",b.getDockedPosition());b.lastOrientation=a}},updateChart:function(a){this.setRenderTo(a.element);this.orient()}});Ext.define("Ext.chart.Legend",{mixins:{identifiable:"Ext.mixin.Identifiable",observable:"Ext.util.Observable"},uses:["Ext.chart.legend.View"],config:{visible:true,position:"bottom",popup:Ext.os.is.Phone,doubleTapThreshold:250,view:{},chart:null,sheet:{ui:"legend",style:"padding: 0.3em",hideOnMaskTap:true,bottom:0,right:0,height:250,stretchX:true,zIndex:30,layout:"fit",scrollable:false,enter:"bottom",exit:"bottom",hidden:true,items:[{xtype:"toolbar",ui:"dark",docked:"top",title:"Legend",items:[{xtype:"spacer"},{ui:"plain",text:"&times;"}]}]},button:{hide:true,showAnimation:"fade",cls:Ext.baseCSSPrefix+"legend-button",iconCls:Ext.baseCSSPrefix+"legend-button-icon",iconMask:true}},constructor:function(a){var b=this;b.initConfig(a);b.callParent(arguments);b.mixins.observable.constructor.apply(b,arguments)},wire:function(){var g=this,b=g.getPopup(),e=g.getChart(),f=e&&e.getToolbar(),d=g.getButton(),a=g.getView(),c,h={type:"slide",duration:150,direction:"down"};if(a){a.setLegend(this)}if(f&&d){f.add(d)}if(b){if((c=g.getSheet())){if(d){d.show();d.setHandler(function(){c&&c.show()})}a.setParent(null);a.setScrollable(true);c.add(a);c.setConfig({enter:"bottom",anim:h,enterAnimation:h,exitAnimation:h});Ext.Viewport.add(c)}}else{d.hide();a.setConfig({parent:null,scrollable:false});a.setRenderTo(e&&e.element)}},updateDock:function(a){this.wire()},applyButton:function(b,a){return Ext.factory(b,"Ext.Button",a)},updateButton:function(b,a){if(a){a.destroy()}this.wire()},applySheet:function(b,a){return Ext.factory(b,"Ext.Sheet",a)},updateSheet:function(b,a){if(a){a.destroy()}b.on({delegate:"button",tap:function(){b.hide()}});this.wire()},updateChart:function(f,b){var g=this,d=g.getButton(),e=f&&f.element,a=g.getView(),c=g.getSheet(),h;g.wire();if(b){b.un("serieschange",g.orient,g)}if(f){f.on("serieschange",g.orient,g)}},applyView:function(a,b){return Ext.factory(a,"Ext.chart.legend.View",b)},updateView:function(a,b){if(b){b.setLegend(false)}this.wire()},isDisplayed:function(){return this.getVisible()&&this.getChart().getSeries().findIndex("showInLegend",true)!==-1},isOrientationSpecific:function(){var a=this.getPosition();return(Ext.isObject(a)&&"portrait" in a)},getDockedPosition:function(){var b=this,a=b.getPosition();if(b.isOrientationSpecific()){a=a[Ext.Viewport.getOrientation()]}if(b.getPopup()&&!Ext.isString(a)){a="bottom"}return a},isVertical:function(){var a=this.getDockedPosition();return this.getPopup()||(Ext.isObject(a)?a.vertical:"left|right|float".indexOf(""+a)!==-1)},orient:function(){var d=this,c=d.getSheet(),a=d.getDockedPosition(),b=Ext.Viewport.getOrientation(),e="auto";d.wire();d.getView().orient();if(d.getPopup()&&d.lastOrientation!==b){if(c){c.hide();c.enter=c.exit=a;c.setSize(null,null)}d.lastOrientation=b}d.getView().refreshStore()},updateLocation:function(){if(!this.getPopup()){var F=this,u=F.getChart(),r=u.chartBBox,z=u.getInsetPadding(),q=Ext.isObject(z),C=(q?z.left:z)||0,e=(q?z.right:z)||0,w=(q?z.bottom:z)||0,D=(q?z.top:z)||0,A=u.element.getWidth(),g=u.element.getHeight(),b=r.width-(C+e),h=r.height-(D+w),k=r.x+C,j=r.y+D,m=F.isVertical(),s=F.getView(),d=Math,c=d.floor,E=d.min,H=d.max,o,n,t,f,B,v,G,a;F.orient();if(F.isDisplayed()){s.show();s.element.setSize(m?a:null,m?null:a);t=s.element.getWidth();f=s.element.getHeight();G=F.getDockedPosition();if(Ext.isObject(G)){o=G.x;n=G.y}else{switch(G){case"left":o=C;n=c(j+h/2-f/2);break;case"right":o=c(A-t)-e;n=c(j+h/2-f/2);break;case"top":o=c(k+b/2-t/2);n=D;break;default:o=c(k+b/2-t/2);n=c(g-f)-w}o=H(o,C);n=H(n,D)}B=A-o-e;v=g-n-w;s.setLeft(o);s.setTop(n);if(t>B||f>v){s.element.setSize(E(t,B),E(f,v))}}else{s.hide()}}},getInsetSize:function(){var d=this,f=d.getDockedPosition(),b=d.getChart().insets,c=b.left,a=b.bottom,g=b.top,h=b.right,j=0,e;if(!d.getPopup()&&d.isDisplayed()){e=d.getView();e.show();if(f==="left"||f==="right"){j=e.element.getWidth()+c}else{if(f==="top"||f==="bottom"){j=e.element.getHeight()+g}}}return j},show:function(){(this.getPopup()?this.getSheet():this.getView()).show()},hide:function(){(this.getPopup()?this.getSheet():this.getView()).hide()},onCombine:function(a,d,c){var b=this;a.combine(d,c);b.getView().refreshStore();b.fireEvent("combine",b,a,d,c)},onSplit:function(b,a){var c=this;b.split(a);c.getView().refreshStore();c.fireEvent("split",c,b,a)},reset:function(){this.getView().reset()}});Ext.define("Ext.chart.legend.View",{extend:"Ext.dataview.DataView",require:["Ext.Viewport","Ext.draw.Draw"],config:{itemTpl:["<span class=\"x-legend-item-marker {[values.disabled?'x-legend-inactive':'']}\" style=\"background-color:{markerColor};\"></span>{label}"],store:{fields:["markerColor","label","series","seriesId","index","disabled"],data:[]},baseCls:Ext.baseCSSPrefix+"legend",disableSelection:true,scrollable:false,legend:false},componentCls:Ext.baseCSSPrefix+"legend",horizontalCls:Ext.baseCSSPrefix+"legend-horizontal",initialize:function(){var d=this,a=d.getScrollableBehavior().getScrollView(),c,b;d.callParent(arguments);d.on("itemtap",d.itemTap)},refresh:function(){this.callParent()},updateLegend:function(d,b){if(d&&d.getChart()){var c=d.getChart(),a=c.getSeries();c.on("serieschange",this.refreshStore,this);if(a){a.each(function(e){e.on("titlechange",this.refreshStore,this)})}}},onTapHold:function(b,a){return},updateDroppables:function(){var b=this,a=b.droppables,c;Ext.destroy(a)},onDrop:function(e,a){var d=this,c=d.getRecord(a.element.dom),b=d.getRecord(e.element.dom);d.getLegend().onCombine(c.get("series"),c.get("index"),b.get("index"))},onDragEnd:function(a,b){a.destroy()},getStoreData:function(){var b=[],c,a=this.getLegend().getChart().getSeries();if(a){a.each(function(d){if(d.showInLegend){c=d.getLegendInfo();Ext.each(c.items,function(f,e){b.push({label:f.label,markerColor:f.color,series:d,seriesId:Ext.id(d,"legend-series-"),index:e,disabled:f.disabled})})}})}return b},refreshStore:function(){var b=this,a=b.getStore(),c=b.getStoreData();a.setData(c);Ext.draw.Draw.updateIOS()},orient:function(b){var d=this,c=d.getLegend(),a=d.horizontalCls,e=c.isVertical(),f=c.getDockedPosition();b=b||Ext.Viewport.getOrientation();if(d.lastOrientation!==b){if(e){d.removeCls(a)}else{d.addCls(a)}d.setSize(null,null);d.setDocked(f);if(e){d.setSize(d.getWidth())}if(d.scroller){d.scroller.scrollTo({x:0,y:0})}d.lastOrientation=b}},itemTap:function(k,h,m){var r=this,t=Ext.get(k),d=r.getStore().getAt(h),c=d&&d.get("series"),f=r.getLegend().doubleTapThreshold,g=r.tapTask||(r.tapTask=new Ext.util.DelayedTask()),a=+new Date(),o,j,b;g.cancel();if(c.isCombinedItem(h)){if(a-(r.lastTapTime||0)<f){r.doItemDoubleTap(t,h)}else{g.delay(f,r.doItemTap,r,[t,h])}r.lastTapTime=a}else{c.onLegendItemTap(d,h);if(c.getAxesForXAndYFields){var n=c.getAxesForXAndYFields();b=n.xAxis&&c.getChart().getAxes().get(n.xAxis);if(b&&b.getRange){o=b.getRange()}b=n.yAxis&&c.getChart().getAxes().get(n.yAxis);if(b&&b.getRange){j=b.getRange()}}if(o&&j&&c.getAxesForXAndYFields){var s,q;s=n.xAxis&&c.getChart().getAxes().get(n.xAxis).getRange();q=n.xAxis&&c.getChart().getAxes().get(n.yAxis).getRange();if(s[0]!==o[0]||s[1]!==o[1]||q[0]!==j[0]||q[1]!==j[1]){c.getChart().redraw()}else{c.drawSeries();c.getSurface().renderFrame()}}else{c.getChart().redraw()}}r.refreshStore()},doItemDoubleTap:function(e,b){var d=this,a=d.getStore().getAt(b),c=a.get("series");if(a){d.getLegend().onSplit(a.get("series"),a.get("index"))}c.onLegendItemDoubleTap(a,b)},reset:function(){var a=this;a.getStore().each(function(b,d){var c=b.get("series");c._index=b.get("index");c.showAll();Ext.fly(a.getViewItems()[d]).removeCls(a.inactiveItemCls);c.clearCombinations();c.onLegendReset()});a.refreshStore()}});Ext.ComponentQuery.pseudos["nth-child"]=function(a,c){var b=+c-1;if(a[b]){return[a[b]]}return[]};Ext.ComponentQuery.pseudos.highlight=function(f,g){var e=0,c=0,b=f.length,h=[],k,m,a,d;for(;e<b;++e){k=f[e];if(k.isXType&&k.isXType("highlight")){h.push(k)}if(k.getRefItems){m=k.getRefItems(true);for(c=0,d=m.length;c<d;++c){a=m[c];if(a.isXType&&a.isXType("highlight")){h.push(a)}}}}return h};Ext.define("Ext.chart.theme.Theme",{uses:["Ext.chart.theme.Base","Ext.chart.theme.Style"],theme:"Base",timestamp:1,applyStyles:function(f){var u=this,m={getRefItems:function(){return[u]},isXType:function(){return false},initCls:function(){return[]},getItemId:function(){return""}},k=[Ext.chart.theme.Base.selectors.slice()],s=0,h=0,g=[],v,r,t,c,q,a,w,d,o,e;if(f||u.getTheme()!="Base"){k.push(Ext.chart.theme[f||u.getTheme()].selectors.slice())}var b=u.timestamp++;for(d=k.length;h<d;++h){e=k[h];o=e.length;e.sort(function(x,n){var j=x.specificity,z=n.specificity;return z[0]<j[0]||(z[0]==j[0]&&(z[1]<j[1]||(z[1]==j[1]&&z[2]<j[2])))});for(s=0;s<o;++s){c=e[s];r=c.selector;t=c.style;a=Ext.ComponentQuery.query(r,m);for(q=0,w=a.length;q<w;++q){if(a[q] instanceof Ext.chart.theme.Style){if(a[q].$themeTimestamp!==b){a[q].$themeTimestamp=b;g.push(a[q]);a[q].themeStyle.reset()}Ext.merge(a[q].themeStyle,t)}else{if(a[q].$themeTimestamp!==b){a[q].$themeTimestamp=b;g.push(a[q]);a[q].themeStyle={};if(!a[q].configStyle){a[q].configStyle=a[q].style}a[q].style=Ext.Object.chain(a[q].themeStyle);Ext.apply(a[q].style,a[q].configStyle)}a[q].themeStyle=Ext.merge(a[q].themeStyle||{},t)}}}}for(q=0,w=g.length;q<w;++q){v=g[q];delete v.$themeTimestamp}}});Ext.define("Ext.chart.theme.Base",{singleton:true,selectors:[{selector:"chart",style:{padding:10,colors:["#115fa6","#94ae0a","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"]},specificity:[0,0,1]},{selector:"chart axis",style:{color:"#354f6e",fill:"#354f6e",stroke:"#cccccc","stroke-width":1},specificity:[0,0,2]},{selector:"chart axis label",style:{color:"#354f6e",fill:"#354f6e",font:'12px "Helvetica", "Arial", "sans-serif"',"font-weight":"bold",spacing:2,padding:5},specificity:[0,0,3]},{selector:"chart axis title",style:{font:'18px "Helvetica", "Arial", "sans-serif"',color:"#354f6e",fill:"#354f6e",padding:5},specificity:[0,0,3]},{selector:'chart axis[position="left"] title',style:{rotate:{x:0,y:0,degrees:270}},specificity:[0,1,3]},{selector:'chart axis[position="right"] title',style:{rotate:{x:0,y:0,degrees:270}},specificity:[0,1,3]},{selector:'chart axis[position="radial"]',style:{fill:"none"},specificity:[0,1,2]},{selector:'chart axis[position="radial"] label',style:{font:'10px "Helvetica", "Arial", "sans-serif"',"text-anchor":"middle"},specificity:[0,1,3]},{selector:'chart axis[position="gauge"]',style:{fill:"none"},specificity:[0,1,2]},{selector:'chart axis[position="gauge"] label',style:{font:'10px "Helvetica", "Arial", "sans-serif"',"text-anchor":"middle"},specificity:[0,1,3]},{selector:"chart series",style:{"stroke-width":1},specificity:[0,0,2]},{selector:"chart series label",style:{font:'12px "Helvetica", "Arial", "sans-serif"',fill:"#333333",display:"none",field:"name",minMargin:"50",orientation:"horizontal"},specificity:[0,0,3]},{selector:"chart series:nth-child(1)",style:{fill:"#115fa6"},specificity:[0,1,2]},{selector:"chart series:nth-child(2)",style:{fill:"#94ae0a"},specificity:[0,1,2]},{selector:"chart series:nth-child(3)",style:{fill:"#a61120"},specificity:[0,1,2]},{selector:"chart series:nth-child(4)",style:{fill:"#ff8809"},specificity:[0,1,2]},{selector:"chart series:nth-child(5)",style:{fill:"#ffd13e"},specificity:[0,1,2]},{selector:"chart series:nth-child(6)",style:{fill:"#a61187"},specificity:[0,1,2]},{selector:"chart series:nth-child(7)",style:{fill:"#24ad9a"},specificity:[0,1,2]},{selector:"chart series:nth-child(8)",style:{fill:"#7c7474"},specificity:[0,1,2]},{selector:"chart series:nth-child(9)",style:{fill:"#a66111"},specificity:[0,1,2]},{selector:"chart series:highlight",style:{radius:20,"stroke-width":5,stroke:"#ff5555",zIndex:"100"},specificity:[0,1,2]},{selector:'chart series[type="line"]:highlight',style:{"stroke-width":3},specificity:[0,2,2]},{selector:'chart series[type="bar"]:highlight',style:{"stroke-width":3,stroke:"#5555cc",opacity:0.8},specificity:[0,2,2]},{selector:'chart series[type="area"]:highlight',style:{"stroke-width":3,stroke:"#111111"},specificity:[0,2,2]},{selector:'chart series[type="pie"]:highlight',style:{stroke:"none","stroke-width":0},specificity:[0,2,2]},{selector:'chart series[type="scatter"]:highlight',style:{stroke:"none","stroke-width":0},specificity:[0,2,2]},{selector:"chart marker",style:{stroke:"#ffffff","stroke-width":1,type:"circle",fill:"#000000",radius:5,size:5},specificity:[0,0,2]},{selector:"chart marker:nth-child(1)",style:{fill:"#115fa6",type:"circle"},specificity:[0,1,2]},{selector:"chart marker:nth-child(2)",style:{fill:"#94ae0a"},specificity:[0,1,2]},{selector:"chart marker:nth-child(3)",style:{fill:"#a61120"},specificity:[0,1,2]},{selector:"chart marker:nth-child(3)",style:{fill:"#a61120"},specificity:[0,1,2]},{selector:"chart marker:nth-child(4)",style:{fill:"#ff8809"},specificity:[0,1,2]},{selector:"chart marker:nth-child(5)",style:{fill:"#ffd13e"},specificity:[0,1,2]},{selector:"chart marker:nth-child(6)",style:{fill:"#a61187"},specificity:[0,1,2]},{selector:"chart marker:nth-child(7)",style:{fill:"#24ad9a"},specificity:[0,1,2]},{selector:"chart marker:nth-child(8)",style:{fill:"#7c7474"},specificity:[0,1,2]},{selector:"chart marker:nth-child(9)",style:{fill:"#a66111"},specificity:[0,1,2]},{selector:'chart interaction[type="itemcompare"] circle',style:{fill:"rgba(0, 0, 0, 0)",stroke:"#0d75f2",radius:5},specificity:[0,1,3]},{selector:'chart interaction[type="itemcompare"] line',style:{stroke:"#0d75f2","stroke-width":3},specificity:[0,1,3]},{selector:'chart interaction[type="itemcompare"] arrow',style:{fill:"#0d75f2",radius:8},specificity:[0,1,3]},{selector:'chart interaction[type="piegrouping"] slice',style:{stroke:"#0d75f2","stroke-width":2,fill:"#0d75f2",opacity:0.5},specificity:[0,1,3]},{selector:'chart interaction[type="piegrouping"] handle',style:{stroke:"#0d75f2","stroke-width":2,fill:"#0d75f2"},specificity:[0,1,3]}]});Ext.define("Ext.chart.theme.Demo",{singleton:true,selectors:[{selector:'chart[themeCls="area1"] axis[position="left"] grid even',style:{opacity:1,fill:"#dddddd",stroke:"#bbbbbb","stroke-width":1},specificity:[0,2,4]},{selector:'chart[themeCls="area1"] axis[position="bottom"] label',style:{rotate:{degrees:45}},specificity:[0,2,3]},{selector:'chart[themeCls="area1"] series',style:{opaciy:"0.93"},specificity:[0,1,2]},{selector:'chart[themeCls="bar1"] axis[position="bottom"] grid',style:{stroke:"#cccccc"},specificity:[0,2,3]},{selector:'chart[themeCls="column1"]',style:{background:"#111111"},specificity:[0,1,1]},{selector:'chart[themeCls="column1"] axis',style:{stroke:"#eeeeee",fill:"#eeeeee"},specificity:[0,1,2]},{selector:'chart[themeCls="column1"] axis label',style:{fill:"#ffffff"},specificity:[0,1,3]},{selector:'chart[themeCls="column1"] axis title',style:{fill:"#ffffff"},specificity:[0,1,3]},{selector:'chart[themeCls="column1"] axis[position="left"] grid odd',style:{stroke:"#555555"},specificity:[0,2,4]},{selector:'chart[themeCls="column1"] axis[position="left"] grid even',style:{stroke:"#555555"},specificity:[0,2,4]},{selector:'chart[themeCls="column1"] series label',style:{fill:"#ffffff",font:"17px Arial",display:"insideEnd","text-anchor":"middle",orientation:"horizontal"},specificity:[0,1,3]},{selector:'chart[themeCls="barcombo1"] axis[position="bottom"] grid',style:{stroke:"#cccccc"},specificity:[0,2,3]},{selector:'chart[themeCls="piecombo1"]',style:{padding:20},specificity:[0,1,1]},{selector:'chart[themeCls="piecombo1"] series label',style:{display:"rotate",contrast:true,font:"14px Arial"},specificity:[0,1,3]},{selector:'chart[themeCls="gaugecombo1"]',style:{padding:30},specificity:[0,1,1]},{selector:'chart[themeCls="gaugecombo1"] axis',style:{stroke:"#cccccc"},specificity:[0,1,2]},{selector:'chart[themeCls="gaugecombo1"] axis label',style:{font:"15px Arial"},specificity:[0,1,3]},{selector:'chart[themeCls="radarcombo1"]',style:{padding:20},specificity:[0,1,1]},{selector:'chart[themeCls="radarcombo1"] axis',style:{stroke:"#cccccc",fill:"none"},specificity:[0,1,2]},{selector:'chart[themeCls="radarcombo1"] axis label',style:{font:"11px Arial","text-anchor":"middle"},specificity:[0,1,3]},{selector:'chart[themeCls="radarcombo1"] series',style:{opacity:0.4},specificity:[0,1,2]},{selector:'chart[themeCls="line1"] axis[position="left"] grid odd',style:{opacity:1,fill:"#dddddd",stroke:"#bbbbbb","stroke-width":0.5},specificity:[0,2,4]},{selector:'chart[themeCls="line1"] marker',style:{size:4,radius:4,"stroke-width":0},specificity:[0,1,2]},{selector:'chart[themeCls="line1"] series:nth-child(1) marker',style:{type:"image",height:"46",width:"46",src:'"../resources/shared/img/iphone.png"'},specificity:[0,2,3]},{selector:'chart[themeCls="line1"] series:nth-child(2) marker',style:{type:"image",height:"46",width:"46",src:'"../resources/shared/img/android.png"'},specificity:[0,2,3]},{selector:'chart[themeCls="line1"] series:nth-child(3) marker',style:{type:"image",height:"46",width:"46",src:'"../resources/shared/img/ipad.png"'},specificity:[0,2,3]},{selector:'chart[themeCls="pie1"]',style:{padding:10},specificity:[0,1,1]},{selector:'chart[themeCls="pie1"] series label',style:{display:"rotate",contrast:true,font:"18px Helvetica, Arial, sans-serif"},specificity:[0,1,3]},{selector:'chart[themeCls="radar1"]',style:{padding:20},specificity:[0,1,1]},{selector:'chart[themeCls="radar1"] axis',style:{stroke:"#cccccc",fill:"none"},specificity:[0,1,2]},{selector:'chart[themeCls="radar1"] axis label',style:{font:"11px Arial","text-anchor":"middle"},specificity:[0,1,3]},{selector:'chart[themeCls="radar1"] series',style:{opacity:0.4},specificity:[0,1,2]},{selector:'chart[themeCls="scatter1"]',style:{padding:40},specificity:[0,1,1]},{selector:'chart[themeCls="scatter1"] axis[position="left"] grid odd',style:{opacity:1,fill:"#dddddd",stroke:"#bbbbbb","stroke-width":0.5},specificity:[0,2,4]},{selector:'chart[themeCls="scatter1"] marker',style:{size:8,radius:8},specificity:[0,1,2]},{selector:'chart[themeCls="stock1"] axis label',style:{font:"12px Arial"},specificity:[0,1,3]},{selector:'chart[themeCls="stock1"] axis[position="left"] grid',style:{stroke:"#cccccc"},specificity:[0,2,3]}]});Ext.define("Ext.chart.theme.Energy",{singleton:true,selectors:[{selector:"chart",style:{colors:["rgba(17, 95, 166, 0.85)","rgba(148, 174, 10, 0.85)","rgba(166, 17, 32, 0.85)","rgba(255, 136, 9, 0.85)","rgba(255, 209, 62, 0.85)","rgba(166, 17, 135, 0.85)","rgba(36, 173, 154, 0.85)","rgba(124, 116, 116, 0.85)","rgba(166, 97, 17, 0.85)"]},specificity:[0,0,1]},{selector:"chart series",style:{"stroke-width":2},specificity:[0,0,2]},{selector:"chart series grid odd",style:{stroke:"#333333"},specificity:[0,0,4]},{selector:"chart series grid even",style:{stroke:"#222222"},specificity:[0,0,4]},{selector:"chart axis",style:{stroke:"#555555",fill:"#555555"},specificity:[0,0,2]},{selector:"chart axis label",style:{fill:"#666666"},specificity:[0,0,3]},{selector:"chart axis title",style:{fill:"#cccccc"},specificity:[0,0,3]},{selector:'chart axis[position="radial"]',style:{fill:"none"},specificity:[0,1,2]},{selector:'chart axis[position="radial"] label',style:{fill:"#ffffff","text-anchor":"center",translate:{x:0,y:-10}},specificity:[0,1,3]},{selector:'chart[themeCls="radar"]',style:{padding:40},specificity:[0,1,1]},{selector:'chart[themeCls="radar"] series',style:{opacity:0.4},specificity:[0,1,2]}]});Ext.define("Ext.chart.theme.WorldData",{singleton:true,selectors:[{selector:"chart",style:{colors:["#49080e","#49080e","#d7a400"],background:"#dbddd8"},specificity:[0,0,1]},{selector:"chart series:highlight",style:{radius:5,"stroke-width":3,stroke:"#ffffff"},specificity:[0,1,2]},{selector:"chart axis",style:{stroke:"#c2c4be",fill:"#c2c4be"},specificity:[0,0,2]},{selector:"chart axis grid",style:{stroke:"#c2c4be"},specificity:[0,0,3]},{selector:"chart axis label",style:{fill:"#909488"},specificity:[0,0,3]},{selector:"chart axis title",style:{fill:"#43453e"},specificity:[0,0,3]}]});Ext.define("Ext.chart.theme.Style",{constructor:function(a){a=a||{};if(a.parent){this.themeStyle=Ext.Object.chain(a.parent)}else{this.themeStyle={}}this.themeStyle.reset=function(){Ext.Object.each(this,function(b){delete this[b]})};this.themeStyle=Ext.Object.chain(this.themeStyle);this.style=Ext.Object.chain(this.themeStyle);Ext.apply(this.style,a)}});Ext.define("Ext.chart.theme.LabelStyle",{extend:"Ext.chart.theme.Style",constructor:function(a){this.callParent(arguments)},isXType:function(a){return a==="label"}});Ext.define("Ext.chart.theme.HighlightStyle",{extend:"Ext.chart.theme.Style",constructor:function(a){this.callParent(arguments)},isXType:function(a){return a==="highlight"},getRefItems:function(a){return[]}});Ext.define("Ext.chart.theme.MarkerStyle",{extend:"Ext.chart.theme.Style",constructor:function(a){this.callParent(arguments)},isXType:function(a){return a==="marker"}});Ext.define("Ext.chart.theme.TitleStyle",{extend:"Ext.chart.theme.Style",constructor:function(a){this.callParent(arguments)},isXType:function(a){return a==="title"}});Ext.define("Ext.chart.theme.CalloutStyle",{extend:"Ext.chart.theme.Style",uses:["Ext.chart.theme.OddStyle","Ext.chart.theme.EvenStyle"],constructor:function(a){this.callParent(arguments);this.oddStyle=new Ext.chart.theme.OddStyle();this.evenStyle=new Ext.chart.theme.EvenStyle()},isXType:function(a){return a==="callout"},getRefItems:function(a){return[]}});Ext.define("Ext.chart.theme.GridStyle",{extend:"Ext.chart.theme.Style",uses:["Ext.chart.theme.OddStyle","Ext.chart.theme.EvenStyle"],constructor:function(a){var b=this,c=a.odd,d=a.even;delete a.odd;delete a.even;b.callParent(arguments);b.oddStyle=Ext.create("Ext.chart.theme.OddStyle",Ext.apply({parent:b.style},c));b.evenStyle=Ext.create("Ext.chart.theme.EvenStyle",Ext.apply({parent:b.style},d))},isXType:function(a){return a==="grid"},getRefItems:function(a){return[this.oddStyle,this.evenStyle]}});Ext.define("Ext.chart.theme.EvenStyle",{extend:"Ext.chart.theme.Style",constructor:function(a){this.callParent(arguments)},isXType:function(a){return a==="even"}});Ext.define("Ext.chart.theme.OddStyle",{extend:"Ext.chart.theme.Style",constructor:function(a){this.callParent(arguments)},isXType:function(a){return a==="odd"}});Ext.define("Ext.chart.Chart",{extend:"Ext.draw.Component",xtype:"chart",mixins:{theme:"Ext.chart.theme.Theme"},uses:["Ext.draw.Draw","Ext.chart.Legend","Ext.chart.interactions.Abstract","Ext.chart.axis.Axis","Ext.util.SizeMonitor"],version:"2.0.0b",viewBox:false,config:{store:null,shadow:false,animate:false,series:[],axes:[],legend:null,theme:"Base",themeCls:"",colors:null,insetPadding:10,background:false,maxGutter:[0,0],interactions:[],toolbar:{}},colorArrayStyle:[],surfaceZIndexes:{main:0,axis:1,series:2,overlay:3,events:4},constructor:function(d){var h=this,c,b,g,e,a,f,j;d=Ext.apply({},d);if(h.gradients){Ext.apply(d,{gradients:h.gradients})}if(h.background){Ext.apply(d,{background:h.background})}if(d.animate){c={easing:"easeInOut",duration:500};if(Ext.isObject(d.animate)){d.animate=Ext.applyIf(d.animate,c)}else{d.animate=c}}h.chartBBox={x:0,y:0,width:0,height:0};if(d.theme){h.applyStyles(d.theme)}h.callParent(arguments);this.surface.destroy();delete this.surface},applyStyles:function(b){var a=this;a.mixins.theme.applyStyles.call(a,b);a.colorArrayStyle=[];if(a.style&&a.style.colors){colors=a.style.colors;colorArrayStyle=a.colorArrayStyle;for(i=0,l=colors.length;i<l;++i){color=colors[i];if(Ext.isObject(color)){for(p in a.surfaces){a.surfaces[p].addGradient(color)}colorArrayStyle.push("url(#"+color.id+")")}else{colorArrayStyle.push(color)}}}},initialize:function(){var b=this,a;Ext.applyIf(b,{zoom:{width:1,height:1,x:0,y:0}});b.maxGutter=b.maxGutter||[0,0];if(b.tipRenderer){a=b.getFunctionRef(b.tipRenderer);b.setTipRenderer(a.fn,a.scope)}b.callParent();b.getAxes().each(function(c){if(c.initialize){c.initialize()}});b.getSeries().each(function(c){if(c.initialize){c.initialize()}});b.getInteractions().each(function(c){c.initializeDefaults({type:"beforerender"});if(b.getAnimate()){var d=function(){b.getInteractions().each(function(e){e.initializeDefaults({type:"afterrender"})});b.getSeries().get(0).removeListener("afterrender",d)}}else{c.initializeDefaults()}if(c.initialize){c.initialize()}});Ext.Viewport.on("orientationchange",b.redraw,b)},onPainted:function(){this.callParent();var a=this;a.getSurface("main");a.applyStyles();a.onResize()},onResize:function(){var a=this;if(!a.resizeTask){a.resizeTask=new Ext.util.DelayedTask(function(){a.redraw(true)},a)}else{a.resizeTask.cancel()}a.resizeTask.delay(1)},getEventsSurface:function(){return this.getSurface("events")},getSurface:function(c){var e=this,b=e.surfaces||(e.surfaces={}),a=b[c],f=e.surfaceZIndexes,d;if(!a){a=b[c]=e.createSurface({background:null,initEvents:(c=="events")});d=a.element;d.setStyle("position","absolute");d.setStyle("top",0);d.setStyle("left",0);if(c in f){d.setStyle("zIndex",f[c])}else{d.setStyle("zIndex",f.main)}}return a},applyColors:function(c){if(Ext.isArray(c)){var f=this,a=c.slice(0),e,b,d;for(e=0,b=c.length;e<b;++e){d=c[e];if(Ext.isObject(d)){for(p in f.surfaces){f.surfaces[p].addGradient(d)}a.push("url(#"+d.id+")")}else{a.push(d)}}return a}return c},getColorsStyle:function(){return this.getColors()||this.colorArrayStyle},applyToolbar:function(b,a){return Ext.factory(b,Ext.chart.Toolbar,a)},updateToolbar:function(a){if(a){a.setChart(this)}},applyAxes:function(d,f){var c=this,e=new Ext.util.MixedCollection(false,function(g){return g.getPosition()}),b=d.length,a;if(!d){return}if(!Ext.isArray(d)&&!(d instanceof Ext.util.MixedCollection)){d=[d];b=1}if(Ext.isArray(d)){d.each=function(g){Ext.each(d,g)}}d.each(function(g){if(!(g instanceof Ext.chart.axis.Axis)){g.chart=c;e.add(g=Ext.create("Ext.chart.axis."+c.capitalize(g.type),g))}});if(f){f.each(function(g){if(!e.contains(g)){g.destroy()}})}return e},updateTheme:function(b,a){this.applyStyles()},updateAxes:function(b,a){this.applyStyles()},updateSeries:function(b,a){this.applyStyles()},applySeries:function(c,a){var e=this,f=new Ext.util.MixedCollection(false,function(g){return g.seriesId}),d=c.length,b;if(!c){return}if(!Ext.isArray(c)&&!(c instanceof Ext.util.MixedCollection)){c=[c];d=1}if(Ext.isArray(c)){c.each=function(g){Ext.each(c,g)}}c.each(function(g){if(!(g instanceof Ext.chart.series.Series)){g.chart=e;f.add(g=Ext.create("Ext.chart.series."+e.capitalize(g.type),g))}});if(a){a.each(function(g){if(!f.contains(g)){g.destroy()}})}return f},applyInteractions:function(e){var c=this,d=new Ext.util.MixedCollection(false,function(f){return f.type}),b=e.length,a;if(!e){return}if(!Ext.isArray(e)&&!(e instanceof Ext.util.MixedCollection)){e=[e];b=1}if(Ext.isArray(e)){e.each=function(f){Ext.each(e,f)}}e.each(function(f){if(Ext.isString(f)){f={type:f}}if(!(f instanceof Ext.chart.interactions.Abstract)){f.chart=c;d.add(f=Ext.chart.interactions.Manager.create(f))}});return d},applyLegend:function(b,a){var c=this;if(b===a){return b}b=Ext.factory(b,Ext.chart.Legend,a);if(a&&a!==b){a.un({scope:c,combine:c.redraw,split:c.redraw})}return b},updateLegend:function(a){var b=this;if(a){a.setChart(this);a.un({scope:b,combine:b.redraw,split:b.redraw})}return a},applyStore:function(b,a){var d=this,c=!d.storeIsBound;b=b&&Ext.StoreMgr.lookup(b);if(!c&&a&&b!==a){if(a.autoDestroy){a.destroy()}else{a.un({scope:d,refresh:d.delayRefresh})}}if(b&&(c||b!==a)){b.on({scope:d,refresh:d.delayRefresh})}d.storeIsBound=true;if(b&&!c){d.refresh()}return b},repaint:Ext.emptyFn,redraw:function(b){var g=this,f,e=g.getWidth(),a=g.getHeight(),d=g.getLegend(),c=false;if(!Ext.isNumber(e)||!Ext.isNumber(a)){e=g.element.getWidth();a=g.element.getHeight()}c=e!=g.curWidth||a!=g.curHeight;if(c){b=true}if(b){g.curWidth=e;g.curHeight=a;g.chartBBox={x:0,y:0,height:g.curHeight,width:g.curWidth};if(c){g.getEventsSurface().setSize(e,a);g.getSurface("main").setSize(e,a)}if(d){d.updateLocation()}g.updateMaxGutter();g.dirtyStore=false;g.getAxes().each(g.preprocessAxis,g);d=g.getLegend();if(d){d.orient()}f=g.getToolbar();if(f){f.orient()}}g.getAxes().each(function(h){h.processView()});g.getAxes().each(function(h){if(h.getHidden()){return}h.drawAxis(true)});g.alignAxes();if(c){if(d){d.updateLocation()}}g.resizing=!!b;g.getAxes().each(g.drawAxis,g);g.getSeries().each(g.drawCharts,g);Ext.iterate(g.surfaces,function(j,h){h.renderFrame()});g.resizing=false;g.fireEvent("redraw",g)},getEventXY:function(f){f=(f.changedTouches&&f.changedTouches[0])||f.event||f.browserEvent||f;var c=this,d=c.element.getXY(),b=c.chartBBox,a=f.pageX-d[0]-b.x,g=f.pageY-d[1]-b.y;return[a,g]},getItemForPoint:function(a,h){var g=this,e=0,c=g.getSeries().items,b=c.length,d,f;for(;e<b;e++){d=c[e];f=d.getItemForPoint(a,h);if(f){return f}}return false},getItemsForPoint:function(a,d){var c=this,b=[];c.getSeries().each(function(e){var f=e.getItemForPoint(a,d);if(f){b.push(f)}});return b},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},delayRefresh:function(){var a=this;if(!a.refreshTask){a.refreshTask=new Ext.util.DelayedTask(a.refresh,a)}a.refreshTask.delay(1)},refresh:function(){var b=this,a;if(b.refreshTask){b.refreshTask.cancel()}b.dirtyStore=true;if(b.curWidth!=a&&b.curHeight!=a&&b.fireEvent("beforerefresh",b)!==false){b.redraw();b.fireEvent("refresh",b)}},bindStore:function(a){this.setStore(a)},preprocessAxis:function(f){var g=this,e=g.chartBBox,b=e.width,d=e.height,a=e.x,j=e.y,c={chart:g,parent:g,x:0,y:0};switch(f.getPosition()){case"top":Ext.apply(c,{length:b,width:d,startX:a,startY:j});break;case"bottom":Ext.apply(c,{length:b,width:d,startX:a,startY:d});break;case"left":Ext.apply(c,{length:d,width:b,startX:a,startY:d});break;case"right":Ext.apply(c,{length:d,width:b,startX:b,startY:d});break}f.setConfig(c)},alignAxes:function(){var f=this,g=f.getAxes(),e=f.getLegend(),b=["top","right","bottom","left"],d,c=f.getInsetPadding()||+f.style.padding||10,a;if(Ext.isObject(c)){f.setInsetPadding(Ext.apply({},c));a={top:c.top||0,right:c.right||0,bottom:c.bottom||0,left:c.left||0}}else{f.setInsetPadding(c);a={top:c,right:c,bottom:c,left:c}}f.insets=a;function h(j){return g.get(j)}Ext.each(b,function(k){var n=(k==="left"||k==="right"),j=h(k),m;if(e){if(e.getDockedPosition()===k){a[k]+=e.getInsetSize()}}if(j&&j.bbox){m=j.bbox;a[k]+=(n?m.width:m.height)}});d={x:a.left,y:a.top,width:f.curWidth-a.left-a.right,height:f.curHeight-a.top-a.bottom};f.chartBBox=d;g.each(function(m){var o=m.getPosition(),j=!m.getHidden()&&m.bbox||{width:0,height:0},n=(o==="left"||o==="right"),k={x:(o==="left"?d.x-j.width:d.x),y:(o==="top"?d.y-j.height:d.y),width:(n?j.width+d.width:j.height+d.height),length:(n?d.height:d.width),startX:(n?(o==="left"?j.width:d.width):0),startY:(o==="top"?j.height:d.height)};m.setConfig(k)})},updateMaxGutter:function(){var b=this,a=b.getMaxGutter().slice();b.getSeries().each(function(c){var d=c.getGutters&&c.getGutters()||[0,0];a[0]=Math.max(a[0],d[0]);a[1]=Math.max(a[1],d[1])});b.maxGutter=a},drawAxis:function(a){if(a.getHidden()){return}a.drawAxis()},drawCharts:function(a){a.drawSeries();if(!this.getAnimate()){a.fireEvent("afterrender")}},save:function(a){return Ext.draw.Surface.save(a,this.surfaces)},reset:function(c){var b=this,a=b.getLegend();b.getAxes().each(function(d){if(d.reset){d.reset()}});b.getSeries().each(function(d){if(d.reset){d.reset()}});if(a&&a.reset){a.reset()}if(!c){b.redraw()}},destroy:function(){var a=this;Ext.iterate(this.surfaces,function(c,b){b.destroy()});a.setStore(null);a.setLegend(false);a.setSeries([]);a.setAxes([]);a.setInteractions([]);a.setToolbar(null);Ext.Viewport.un("orientationchange",a.redraw,a);this.callParent(arguments)},parent:null,getItemId:function(){return this.element&&this.element.id||this.id||null},initCls:function(){var b=this.cls,a=this.callParent();this.cls=b;return a},isXType:function(a){return a==="chart"},getRefItems:function(a){var c=this,b=[];c.getSeries()&&c.getSeries().each(function(d){if(d.getRefItems){b.push(d);if(a){if(d.markerStyle){b.push(d.markerStyle)}if(d.labelStyle){b.push(d.labelStyle)}if(d.calloutStyle){b.push(d.calloutStyle)}}}});c.getAxes()&&c.getAxes().each(function(d){if(d.getRefItems){b.push(d);if(d.labelStyle){b.push(d.labelStyle)}if(d.gridStyle){b.push(d.gridStyle);b.push(d.gridStyle.oddStyle);b.push(d.gridStyle.evenStyle)}}});c.getInteractions()&&c.getInteractions().each(function(d){b.push(d);if(a){b=b.concat(d.getRefItems(a))}});return b}});if(!Ext.util.DelayedTask){Ext.util.DelayedTask=function(d,c,a){var e=this,f,b=function(){clearInterval(f);f=null;d.apply(c,a||[])};this.delay=function(h,k,j,g){e.cancel();d=k||d;c=j||c;a=g||a;f=setInterval(b,h)};this.cancel=function(){if(f){clearInterval(f);f=null}}}}Ext.define("Ext.chart.Spark",{extend:"Ext.chart.Chart",constructor:function(b){var a={},c={line:{xField:"name",yField:"value",axis:"left",showMarkers:false},column:{gutter:1,groupGutter:1,xField:"name",yField:"value",axis:"left"},area:{gutter:1,xPadding:0,yPadding:0,groupGutter:1,xField:"name",yField:"value",axis:"left"},chart:{animate:false,width:100,height:20,componentCls:"x-spark",insetPadding:{left:0,bottom:0,top:0,right:0}}};a=Ext.apply(c.chart,b);if(typeof b.series=="string"){b.series=[{type:b.series}]}a.series=[Ext.apply(c[b.series[0].type],b.series[0])];a.axes=[{hidden:true,type:"numeric",fields:[a.series[0].yField]},{hidden:true,type:"category",fields:[a.series[0].xField]}];return this.callParent([a])}});Ext.define("Ext.chart.Panel",{extend:"Ext.Container",requires:["Ext.chart.Chart"],config:{chart:null,buttons:[],defaultType:"chart",layout:"fit",title:""},constructor:function(a){var c=a.ui||"dark",b={xtype:"panel",height:"2.6em",docked:"top",layout:{type:"card",align:"stretch"},activeItem:0,ui:c,items:[{xtype:"toolbar",ui:c,title:"",items:{xtype:"spacer"}},{xtype:"toolbar",ui:c,title:""}]};a.items=[b];this.callParent([a])},initialize:function(a){var b=this,c;b.callParent(arguments);c=b.headerPanel=b.getItems().get(0);b.descriptionPanel=c.getItems().get(1)},updateTitle:function(a){this.getItems().get(0).getItems().get(0).setTitle(a)},applyButtons:function(a){return this.getItems().get(0).getItems().get(0).add(a)},applyChart:function(b,a){if(b!==a){b=Ext.factory(b,"Ext.chart.Chart",a)}if(!a){this.add(b)}return b}});Ext.define("Ext.chart.Callout",{uses:["Ext.chart.theme.CalloutStyle"],constructor:function(a){var b=this;if(a.callouts){a.callouts.styles=Ext.apply({},a.callouts.styles||{});b.callouts=Ext.apply(b.callouts||{},a.callouts);b.calloutsArray=[]}b.calloutStyle=new Ext.chart.theme.CalloutStyle()},renderCallouts:function(){if(!this.callouts){return}var v=this,m=v.items,a=v.getChart().getAnimate(),u=v.callouts,g=u.styles,e=v.calloutsArray,b=v.getChart().getStore(),s=b.getCount(),d=m.length/s,k=[],r,c,q,n;for(r=0,c=0;r<s;r++){for(q=0;q<d;q++){var t=m[c],f=e[c],h=b.getAt(r),o;o=((t&&t.useCallout)||u.filter(h,t,r,o,q,c))&&(Math.abs(t.endAngle-t.startAngle)>0.8);if(!o&&!f){c++;continue}if(!f){e[c]=f=v.onCreateCallout(h,t,r,o,q,c)}for(n in f){if(f[n]&&f[n].setAttributes){f[n].setAttributes(g,true)}}if(!o){for(n in f){if(f[n]){if(f[n].setAttributes){f[n].setAttributes({hidden:true},true)}else{if(f[n].setVisible){f[n].setVisible(false)}}}}}u.renderer(f,h);if(o){v.onPlaceCallout(f,h,t,r,o,a,q,c,k)}k.push(f);c++}}this.hideCallouts(c)},onCreateCallout:function(f,k,e,g){var h=this,d=h.callouts,m=d.styles,c=m.width||100,j=m.height||100,b=h.getSurface(),a={label:false,box:false,lines:false};a.lines=b.add(Ext.apply({},{type:"path",path:"M0,0",stroke:h.getLegendColor(e)||"#555"},d.lines||{}));a.box=b.add(Ext.apply({type:"rect",width:c,height:j},d.box||{}));a.label=b.add(Ext.apply({type:"text",text:"some text"},d.label||{}));return a},hideCallouts:function(b){var d=this.calloutsArray,a=d.length,e,c;while(a-->b){e=d[a];for(c in e){if(e[c]){e[c].hide(true)}}}},parent:null,getItemId:function(){return this.element&&this.element.id||this.id||null},initCls:function(){return(this.cls||"").split(" ")},isXType:function(a){return a==="callout"},getRefItems:function(a){return[]}});Ext.define("Ext.chart.Highlight",{uses:["Ext.chart.theme.HighlightStyle"],statics:{getOriginal:function(d,c,b){var a={};for(var e in c){if(typeof c[e]==="function"){continue}else{a[e]=d[e]===undefined?b.availableAttrs[e]:d[e];if(a[e]===c[e]){delete a[e]}else{if(typeof c[e]==="object"){a[e]=this.getOriginal(a[e],c[e],b)}}}}return a}},config:{highlightDuration:500,highlight:true,highlightCfg:{}},highlightedSprites:null,applyHighlight:function(a){if(!Ext.isBoolean(a)){this.setHighlightCfg(a);return true}return a},applyHighlightCfg:function(b,a){return Ext.merge(a||{},b||{})},constructor:function(a){this.highlightStyle=Ext.create("Ext.chart.theme.HighlightStyle");this.highlightedSprites=new Ext.util.MixedCollection()},highlightSprite:function(b,a){var d=this,c=Ext.merge({},d.highlightStyle.style,d.getHighlightCfg());if(a===undefined){a=d.getChart().getAnimate()}if(d.highlightedSprites.contains(b)){return}d.highlightedSprites.add(b);if(!b.originalAttr){b.originalAttr=Ext.chart.Highlight.getOriginal(b.attr,c,b.surface)}if(b.highlightFx){b.highlightFx.stop()}if(a){b.highlightFx=new Ext.fx.Sprite({sprite:b,easing:c.easing||a.easing||"easeInOut",duration:d.getHighlightDuration()||c.duration||a.duration||500,onComplete:function(){delete b.highlightFx}});b.highlightFx.start(c)}else{b.setAttributes(c,true)}},unHighlightSprite:function(b,a){var d=this,c=Ext.merge({},d.highlightStyle.style,d.getHighlightCfg());if(!b){while(d.highlightedSprites.length){d.unHighlightSprite(d.highlightedSprites.first(),a)}return}if(a===undefined){a=this.getChart().getAnimate()}if(b.highlightFx){b.highlightFx.stop()}if(a){b.highlightFx=new Ext.fx.Sprite({sprite:b,easing:c.easing||a.easing||"easeInOut",duration:d.getHighlightDuration()||c.duration||a.duration||500,onComplete:function(){delete b.highlightFx}});b.highlightFx.start(b.originalAttr)}else{b.setAttributes(b.originalAttr,true)}d.highlightedSprites.remove(b)},highlightItem:function(d){if(!d){return}var c=this,b=d.sprite,a=c.getChart().getAnimate();if(c.getHighlight()===false||!b){return}c.highlightSprite(b,a);c.fireEvent("highlight",d)},unHighlightItem:function(c){var b=this,a=b.getChart().getAnimate();if(b.getHighlight()===false){return}b.unHighlightSprite(c&&c.sprite,a);b.fireEvent("unhighlight")},cleanHighlights:function(){if(this.highlightedItem){delete this.highlightedItem}this.unHighlightSprite()}});Ext.define("Ext.chart.Label",{colorStringRe:/url\s*\(\s*#([^\/)]+)\s*\)/,labelFilterModel:false,constructor:function(a){var b=this;b.label=Ext.applyIf(a.label||{},{renderer:function(c){return c}})},initialize:function(){var a=this;if(a.label.display!=="none"){a.labelsGroup=a.getChart().getSurface("labels").getGroup(a.seriesId+"-labels")}},renderLabels:function(){var q=this,n=q.getChart(),o=q.items,a=Ext.apply(q.labelStyle.style||{},q.label||{}),m=a.display,s=[].concat(a.field),u=q.labelsGroup,g=q.getRecordCount(),f=(o||0)&&o.length,h=f/g,e=0,d,c,b,v,r,t;if(m=="none"){return}q.eachRecord(function(k,j){d=0;for(c=0;c<h;c++){v=o[e];r=u.getAt(e);if(!q.labelFilterModel){while(q.getExcludes()&&q.getExcludes()[d]){d++}if(!v&&r){r.hide(true)}if(v&&s[c]){q.renderLabel(r,v,j,c,d,k)}}else{if(q.itemHidden(v)&&r){r.hide(true)}if(!q.itemHidden(v)&&s[c]){q.renderLabel(r,v,j,c,d,k)}}e++;d++}});q.hideLabels(e)},renderLabel:function(h,B,x,w,e,o){var E=this,r=E.getChart(),t=r.gradients,d=r.getAnimate(),C=Ext.apply(E.labelStyle.style||{},E.label||{}),v=C.display,a=[].concat(C.field),c=(t||0)&&t.length,G=Ext.draw.Color,b,f=0,u,q,A,n,s,m,z,D,F,g;if(!h){h=E.onCreateLabel(o,B,x,v,w,e)}h.show(true);E.onPlaceLabel(h,o,B,x,v,d,w,e);if(C.contrast&&B.sprite){s=B.sprite;if(s._endStyle){F=s._endStyle.fill}else{if(s._to){F=s._to.fill}else{F=s.attr.fill}}F=F||s.attr.fill;m=F&&G.fromString(F);if(F&&!m){F=(g=F.match(E.colorStringRe))&&g[1];for(u=0;u<c;u++){b=t[u];if(b.id==F){n=0;q=0;for(A in b.stops){n++;q+=G.fromString(b.stops[A].color).getGrayscale()}z=(q/n)/255;break}}}else{if(m){z=m.getGrayscale()/255}}if(h.isOutside){z=1}D=G.fromString(h.attr.color||h.attr.fill).getHSL();D[2]=z>0.5?0.2:0.8;h.setAttributes({fill:String(G.fromHSL.apply({},D))},true)}},itemHidden:function(a){return false},hideLabels:function(c){var b=this.labelsGroup,a;c=c||0;if(b){a=b.getCount();while(a-->c){b.getAt(a).hide(true)}}}});Ext.define("Ext.chart.Transformable",{zoomX:1,zoomY:1,panX:0,panY:0,setTransform:function(b,a,e,d){var c=this;c.panX=b;c.panY=a;c.zoomX=e;c.zoomY=d;c.clearFastTransform();Ext.each(c.getTransformableSurfaces(),function(f){f.setSurfaceTransform(b,a,e,d)});c.fireEvent("transform",c,false)},transformBy:function(b,a,e,d){var c=this;c.setTransform(c.panX+b,c.panY+a,c.zoomX*e,c.zoomY*d)},setTransformFast:function(b,a,e,d){var c=this;b-=c.panX;a-=c.panY;e/=c.zoomX;d/=c.zoomY;c.clearFastTransform();c.transformByFast(b,a,e,d)},transformByFast:function(b,a,d,c){this.setFastTransformMatrix(this.getFastTransformMatrix().translate(b,a).scale(d,c,0,0))},getTransformMatrix:function(){var a=this;return a.getFastTransformMatrix().clone().translate(a.panX,a.panY).scale(a.zoomX,a.zoomY,0,0)},getFastTransformMatrix:function(){return this.fastTransformMatrix||new Ext.draw.Matrix()},setTransformMatrixFast:function(a){var b=a.split();this.setTransformFast(b.translateX,b.translateY,b.scaleX,b.scaleY)},setFastTransformMatrix:function(a){var b=this;b.fastTransformMatrix=a;Ext.each(b.getTransformableSurfaces(),function(c){c.setSurfaceFastTransform(a)});if(a){b.fireEvent("transform",b,true)}},clearFastTransform:function(){this.setFastTransformMatrix(null)},hasFastTransform:function(){var a=this.fastTransformMatrix;return a},clearTransform:function(){this.setTransform(0,0,1,1)},syncToFastTransform:function(){var b=this,a=b.getFastTransformMatrix(),c=a.split();delete b.fastTransformMatrix;b.transformBy(c.translateX,c.translateY,c.scaleX,c.scaleY)},getTransformableSurfaces:function(){return[]}});Ext.define("Ext.chart.axis.Abstract",{uses:["Ext.chart.theme.TitleStyle","Ext.chart.theme.LabelStyle","Ext.chart.theme.GridStyle"],config:{position:"bottom",fields:[],labels:[],labelTitle:null,label:null,grid:null,chart:null,steps:10,x:0,y:0,length:0,width:0,startX:0,startY:0,hidden:false},mixins:{identifiable:"Ext.mixin.Identifiable",observable:"Ext.util.Observable",transformable:"Ext.chart.Transformable"},applyPosition:function(a){return a.toLowerCase()},constructor:function(a){var b=this;b.titleStyle=Ext.create("Ext.chart.theme.TitleStyle",a.labelTitle||{});b.labelStyle=Ext.create("Ext.chart.theme.LabelStyle",a.label||{});b.gridStyle=Ext.create("Ext.chart.theme.GridStyle",a.grid||{});this.initConfig(a);b.getId();b.mixins.observable.constructor.apply(b,arguments);b.mixins.transformable.constructor.apply(b,arguments)},applyLabel:function(b){var a=this;Ext.apply(a.labelStyle.style,b);return b},getLabel:function(){var a=this;Ext.applyIf(a._label,a.labelStyle.style);return a._label},initialize:function(){var a=this;a.labelGroup=a.getSurface().getGroup(a.axisId+"-labels")},getId:function(){return this.axisId||(this.axisId=Ext.id(null,"ext-axis-"))},processView:Ext.emptyFn,drawAxis:Ext.emptyFn,getSurface:function(){var c=this,a=c.surface,b=c.getChart();if(!a){a=c.surface=b.getSurface(c.getPosition()+"Axis");a.element.setStyle("zIndex",b.surfaceZIndexes.axis)}return a},hideLabels:function(){this.labelGroup.hide()},updateSurfaceBox:function(){var c=this,a=c.getSurface(),b=c.getChart();a.element.setTop(0);a.element.setLeft(0);a.setSize(b.getWidth()||b.element.getWidth(),b.getHeight()||b.element.getHeight())},getTransformableSurfaces:function(){return[this.getSurface()]},reset:function(){this.clearTransform()},renderFrame:function(){this.getSurface().renderFrame()},parent:null,getItemId:function(){return this.element&&this.element.id||this.id||null},initCls:function(){return(this.cls||"").split(" ")},isXType:function(a){return a==="axis"},getRefItems:function(a){var c=this,b=[];if(c.labelStyle){b.push(c.labelStyle)}if(c.titleStyle){b.push(c.titleStyle)}if(c.gridStyle){b.push(c.gridStyle);b.push(c.gridStyle.oddStyle);b.push(c.gridStyle.evenStyle)}return b}});Ext.define("Ext.chart.axis.Axis",{extend:"Ext.chart.axis.Abstract",config:{majorTickSteps:false,minorTickSteps:false,title:false,dashSize:3,minimum:NaN,maximum:NaN,adjustMaximumByMajorUnit:false,adjustMinimumByMajorUnit:false,increment:null},applyData:Ext.emptyFn,calcLabels:false,overflowBuffer:1.25,renderFrame:function(){var b=this,a=b.getSurface(),c=b.getLabelSurface();a.renderFrame();if(c!==a){c.renderFrame()}},updatePosition:function(a){if(a==="left"||a==="right"){this.isSide=function(){return true}}else{this.isSide=function(){return false}}},isSide:function(){var a=this.getPosition();return a==="left"||a==="right"},updateSurfaceBox:function(){var e=this,c=e.isSide(),d=e.getLength(),f=d+1,b=e.getWidth(),a=e.getSurface();a.element.setTop(e.getY());a.element.setLeft(e.getX());a.setSize(c?b:f,c?f:b)},calcEnds:Ext.emptyFn,drawAxis:function(N){var j=this,L=j.zoomX,K=j.zoomY,I=j.getSurface(),G=j.getStartX()*L,F=j.getStartY()*K,C=j.getChart().maxGutter[0]*L,A=j.getChart().maxGutter[1]*K,T=j.getDashSize(),z=j.getMinorTickSteps()||0,w=j.getMinorTickSteps()||0,Q=j.isSide(),e=j.getLength(),q=e*j.overflowBuffer,M=e*(Q?K:L),H=j.getPosition(),g=[],f=j.calcLabels,s=j.applyData(),v=s.step,d=s.from,S=s.to,r=Math,m=r.floor,b=r.max,B=r.min,a=r.round,c=[],E=j.getIncrement(),P,u,t,o,n,J,k,h,D,R,O;j.updateSurfaceBox();if(E){v=E}if(j.hidden||!j.getChart().getStore()||j.getChart().getStore().getCount()<1||s.steps<=0){j.getSurface().getItems().hide(true);if(j.displaySprite){j.displaySprite.hide(true)}return}j.from=s.from;j.to=s.to;if(Q){u=m(G)+0.5;J=["M",u,F,"l",0,-M];P=M-(A*2)}else{t=m(F)+0.5;J=["M",G,t,"l",M,0];P=M-(C*2)}D=P*v/(S-d);R=j.skipTicks=m(b(0,(Q?M+j.panY-e-q:-j.panX-q))/D);k=b(z+1,0);h=b(w+1,0);if(f){c=[s.from+R*v]}if(Q){t=n=F-A-D*R;u=G-((H=="left")*T*2);while(t>=n-B(P,e+q*2)){J.push("M",u,m(t)+0.5,"l",T*2+1,0);if(t!=n){for(O=1;O<h;O++){J.push("M",u+T,m(t+D*O/h)+0.5,"l",T+1,0)}}g.push([m(G),m(t)]);t-=D;if(f){c.push(+(c[c.length-1]+v).toFixed(10))}if(D===0){break}}if(a(t+D-(F-A-P))){J.push("M",u,m(F-M+A)+0.5,"l",T*2+1,0);for(O=1;O<h;O++){J.push("M",u+T,m(F-M+A+D*O/h)+0.5,"l",T+1,0)}g.push([m(G),m(t)]);if(f){c.push(+(c[c.length-1]+v).toFixed(10))}}}else{u=o=G+C+D*R;t=F-((H=="top")*T*2);while(u<=o+B(P,e+q*2)){J.push("M",m(u)+0.5,t,"l",0,T*2+1);if(u!=o){for(O=1;O<k;O++){J.push("M",m(u-D*O/k)+0.5,t,"l",0,T+1)}}g.push([m(u),m(F)]);u+=D;if(f){c.push(+(c[c.length-1]+v).toFixed(10))}if(D===0){break}}if(a(u-D-(G+C+P))){J.push("M",m(G+M-C)+0.5,t,"l",0,T*2+1);for(O=1;O<k;O++){J.push("M",m(G+M-C-D*O/k)+0.5,t,"l",0,T+1)}g.push([m(u),m(F)]);if(f){c.push(+(c[c.length-1]+v).toFixed(10))}}}if(f){j.setLabels(c)}if(!j.axis){j.axis=I.add(Ext.apply({type:"path",path:J,hidden:false},j.style));I.renderItem(j.axis)}else{j.axis.setAttributes({path:J,hidden:false},true)}j.inflections=g;if(!N){if(j.getGrid()||j.gridStyle.style||j.gridStyle.oddStyle.style||j.gridStyle.evenStyle.style){j.drawGrid()}}j.axisBBox=j.axis.getBBox();j.drawLabel()},drawGrid:function(){var v=this,q=v.getSurface(),b=v.gridStyle.style||v.getGrid(),e=v.gridStyle.oddStyle.style||b.odd,f=v.gridStyle.evenStyle.style||b.even,h=v.inflections,k=h.length-((e||f)?0:1),w=v.getPosition(),d=v.getChart().maxGutter,o=v.getWidth()-2,r,s,t=1,c=v.isSide(),n=[],g,a,j,m=[],u=[];for(;t<k;t++){r=h[t]||h[0];s=h[t-1];if(e||f){n=(t%2)?m:u;g=((t%2)?e:f)||{};a=(g.lineWidth||g["stroke-width"]||0)/2;j=2*a;if(w=="left"){n.push("M",s[0]+1+a,s[1]+0.5-a,"L",s[0]+1+o-a,s[1]+0.5-a,"L",r[0]+1+o-a,r[1]+0.5+a,"L",r[0]+1+a,r[1]+0.5+a,"Z")}else{if(w=="right"){n.push("M",s[0]-a,s[1]+0.5-a,"L",s[0]-o+a,s[1]+0.5-a,"L",r[0]-o+a,r[1]+0.5+a,"L",r[0]-a,r[1]+0.5+a,"Z")}else{if(w=="top"){n.push("M",s[0]+0.5+a,s[1]+1+a,"L",s[0]+0.5+a,s[1]+1+o-a,"L",r[0]+0.5-a,r[1]+1+o-a,"L",r[0]+0.5-a,r[1]+1+a,"Z")}else{n.push("M",s[0]+0.5+a,s[1]-a,"L",s[0]+0.5+a,s[1]-o+a,"L",r[0]+0.5-a,r[1]-o+a,"L",r[0]+0.5-a,r[1]-a,"Z")}}}}else{if(w=="left"){n=n.concat(["M",r[0]+0.5,r[1]+0.5,"l",o,0])}else{if(w=="right"){n=n.concat(["M",r[0]-0.5,r[1]+0.5,"l",-o,0])}else{if(w=="top"){n=n.concat(["M",r[0]+0.5,r[1]+0.5,"l",0,o])}else{n=n.concat(["M",r[0]+0.5,r[1]-0.5,"l",0,-o])}}}}}if(e||f){if(m.length){if(!v.gridOdd&&m.length){v.gridOdd=q.add({type:"path",path:m})}v.gridOdd.setAttributes(Ext.apply({path:m,hidden:false},e||{}),true)}if(u.length){if(!v.gridEven){v.gridEven=q.add({type:"path",path:u})}v.gridEven.setAttributes(Ext.apply({path:u,hidden:false},f||{}),true)}}else{if(n.length){if(!v.gridLines){v.gridLines=v.getSurface().add({type:"path",path:n,"stroke-width":v.lineWidth||1,stroke:v.gridColor||"#ccc"})}v.gridLines.setAttributes({hidden:false,path:n},true)}else{if(v.gridLines){v.gridLines.hide(true)}}}},isPannable:function(){var g=this,f=g.getLength(),c=g.isSide(),e=Math,b=e.ceil,d=e.floor,a=g.getTransformMatrix();return a&&((c?b(a.y(0,0))<0:d(a.x(f,0))>f)||(c?d(a.y(0,f))>f:b(a.x(0,0))<0))},getOrCreateLabel:function(d,g){var e=this,c=e.labelGroup,f=c.getAt(d),b,a=e.labelStyle.style;if(f){if(g!=f.attr.text){f.setAttributes(Ext.apply({text:g},a),true);f._bbox=f.getBBox()}}else{b=e.getLabelSurface();f=b.add(Ext.apply({group:c,type:"text",x:0,y:0,text:g},a));b.renderItem(f);f._bbox=f.getBBox()}if(a.rotation){f.setAttributes({rotation:{degrees:0}},true);f._ubbox=f.getBBox();f.setAttributes(a,true)}else{f._ubbox=f._bbox}return f},intersect:function(d,a,c){var e=d.r||(d.r=this.rect2pointArray(d,c)),b=a.r||(a.r=this.rect2pointArray(a,c));return !(e[0]>b[1]||e[1]<b[0]||e[2]>b[3]||e[3]<b[2])},rect2pointArray:function(e,c){var f=e.getBBox(true),b=f.width*0.5,d=f.height*0.5,a=(e.attr.translation.x||0)+f.x+b,h=(e.attr.translation.y||0)+f.y+d,g=[a,h];if(c){a=c.x(g[0],g[1]);h=c.y(g[0],g[1])}return[a-b,a+b,h-d,h+d]},drawHorizontalLabels:function(){var D=this,d=D.labelStyle.style,s=(D.getLabel()||{}).renderer||function(x){return x},o=d.filter||function(){return true},c=Math,A=c.floor,w=c.max,z=D.getChart().getAxes(),E=D.getPosition(),f=D.inflections,k=f.length,C=D.getLabels(),n=D.skipTicks,r=0,e,a,t,j,B,q,v=false,h,m,g,u,b;if(d.rotate){v=new Ext.draw.Matrix();v.rotate(d.rotate.degrees,0,0)}if(!D.calcLabels&&n){C=C.slice(n);k-=n}h=k-1;t=f[0];b=D.getOrCreateLabel(0,s(C[0]));e=c.abs(c.sin(d.rotate&&(d.rotate.degrees*c.PI/180)||0))>>0;for(u=0;u<k;u++){t=f[u]||f[0];q=s(C[u]);B=D.getOrCreateLabel(u,q);a=B._bbox;r=w(r,a.height+D.getDashSize()+(d.padding||0));m=A(t[0]-(e?a.height:a.width)/2);if(D.getChart().maxGutter[0]==0){if(u==0&&!z.get("left")){m=t[0]}else{if(u==h&&!z.get("right")){m=t[0]-a.width}}}if(E=="top"){g=t[1]-(D.getDashSize()*2)-d.padding-(a.height/2)}else{g=t[1]+(D.getDashSize()*2)+d.padding+(a.height/2)}if(!D.isPannable()){m+=D.panX}B.setAttributes({hidden:false,x:m,y:g},true);if(d.rotate){B.setAttributes(d,true)}delete B.r;if(u!=0&&(D.intersect(B,j,v)||!o(B,q,u))){B.hide(true);continue}j=B}return r},drawVerticalLabels:function(){var D=this,d=D.labelStyle.style,q=(D.getLabel()||{}).renderer||function(x){return x},n=d.filter||function(){return true},e=D.inflections,E=D.getPosition(),j=e.length,C=D.getLabels().slice(),m=D.skipTicks,z=0,c=Math,u=c.max,w=c.floor,b=c.ceil,v=D.getChart().getAxes(),A=D.getChart().maxGutter[1],a,r,h,B,o,t,g,k,f,s;if(d.rotate){t=new Ext.draw.Matrix();t.rotate(d.rotate.degrees,0,0)}if(!D.calcLabels&&m){C=C.slice(m);j-=m}g=j;for(s=0;s<g;s++){r=e[s]||e[0];o=q(C[s]);B=D.getOrCreateLabel(s,o);a=B._bbox;z=u(z,a.width+D.getDashSize()+(d.padding||0));f=r[1];if(A<a.height/2){if(s==g-1&&!v.get("top")){f+=b(a.height/2)}else{if(s==0&&!v.get("bottom")){f-=w(a.height/2)}}}if(E=="left"){k=r[0]-a.width-D.getDashSize()-(d.padding||0)-2}else{k=r[0]+D.getDashSize()+(d.padding||0)+2}if(!D.isPannable()){f+=D.panY}B.setAttributes(Ext.apply({hidden:false,x:k,y:f},d),true);delete B.r;if(s!=0&&(D.intersect(B,h,t)||!n(B,o,s))){B.hide(true);continue}h=B}return z},drawLabel:function(){if(!this.inflections){return 0}var g=this,b=g.labelGroup,h=g.inflections,a=g.getLabelSurface(),f=0,e=0,d,c;if(g.lastLabelSurface!==a){b.each(function(j){j.destroy()});b.clear();g.lastLabelSurface=a}if(g.isSide()){f=g.drawVerticalLabels()}else{e=g.drawHorizontalLabels()}d=b.getCount();c=h.length;for(;c<d;c++){b.getAt(c).hide(true)}g.bbox={};Ext.apply(g.bbox,g.axisBBox);g.bbox.height=e;g.bbox.width=f;if(Ext.isString(g.getTitle())){g.drawTitle(f,e)}},getLabelSurface:function(){return this.getSurface();if(this.labelSurface){return this.labelSurface}var a=this;return a.labelSurface=(a.isPannable()?a.getSurface():a.getChart().getSurface("main"))},updateTitle:function(a){this.drawLabel()},drawTitle:function(n,o){var h=this,g=h.getPosition(),b=h.getChart().getSurface("main"),d=h.displaySprite,m=h.getTitle(),c=h.getLength(),f=h.isSide(),k=h.getStartX()+h.getX(),j=h.getStartY()+h.getY(),a,q,e;if(d){d.setAttributes({text:m},true)}else{a={type:"text",x:0,y:0,text:m};d=h.displaySprite=b.add(Ext.apply(a,h.titleStyle.style,h.labelTitle));b.renderItem(d)}q=d.getBBox();e=h.getDashSize()+(h.titleStyle.style.padding||0);if(f){j-=((c/2)-(q.height/2));if(g=="left"){k-=(n+e+(q.width/2))}else{k+=(n+e+q.width-(q.width/2))}h.bbox.width+=q.width+10}else{k+=(c/2)-(q.width*0.5);if(g=="top"){j-=(o+e+(q.height*0.3))}else{j+=(o+e+(q.height*0.8))}h.bbox.height+=q.height+10}d.setAttributes({hidden:false,translate:{x:k,y:j}},true)},getBoundSeries:function(){var b=this,a=b.getChart().getSeries();return a.filterBy(function(d){var e=[].concat(d.getXField&&d.getXField(),d.getYField&&d.getYField()),c=e.length;while(c--){if(b.isBoundToField(e[c])){return true}}return false})},isBoundToField:function(c){var a=this.getFields(),b=a.length;while(b--){if(a[b]===c){return true}}return false},getTransformableSurfaces:function(){return[this.getSurface(),this.getLabelSurface()]}});Ext.define("Ext.chart.axis.Category",{extend:"Ext.chart.axis.Axis",type:"category",config:{categoryNames:null,calculateCategoryCount:false},deduceLabels:function(){var f=this,d=f.getChart(),b=d.getStore(),a=Ext.Array.from(f.getFields()),e=a.length,g=[],c;b.each(function(h){for(c=0;c<e;c++){g.push(h.get(a[c]))}},this);this.setLabels(g)},calcEnds:function(){var a=this.getChart().getStore().getCount();return{from:0,to:a-1,power:1,step:1,steps:a-1}},applyData:function(){this.callParent();this.deduceLabels();return this.calcEnds()}});Ext.define("Ext.chart.axis.Gauge",{extend:"Ext.chart.axis.Abstract",config:{minimum:NaN,maximum:NaN,steps:10,margin:10,position:"gauge",title:false},applyPosition:function(){return"gauge"},drawAxis:function(s){var k=this,h=k.getChart(),a=k.getSurface(),r=h.chartBBox,d=r.x+(r.width/2),b=r.y+r.height,c=k.getMargin(),n=Math.min(r.width,2*r.height)/2+c,g=[],o,m=k.getSteps(),e,f=Math.PI,q=Math.cos,j=Math.sin;if(k.sprites&&!h.resizing){k.drawLabel();return}k.updateSurfaceBox();if(c>=0){if(!k.sprites){for(e=0;e<=m;e++){o=a.add({type:"path",path:["M",d+(n-c)*q(e/m*f-f),b+(n-c)*j(e/m*f-f),"L",d+n*q(e/m*f-f),b+n*j(e/m*f-f),"Z"],stroke:"#ccc"});o.setAttributes(Ext.apply(k.style||{},{hidden:false}),true);g.push(o)}}else{g=k.sprites;for(e=0;e<=m;e++){g[e].setAttributes({path:["M",d+(n-c)*q(e/m*f-f),b+(n-c)*j(e/m*f-f),"L",d+n*q(e/m*f-f),b+n*j(e/m*f-f),"Z"]},true)}}}k.sprites=g;k.drawLabel();if(k.getTitle()){k.drawTitle()}},drawTitle:function(){var e=this,d=e.getChart(),a=e.getSurface(),f=d.chartBBox,c=e.titleSprite,b;if(!c){e.titleSprite=c=a.add({type:"text",zIndex:2})}c.setAttributes(Ext.apply({text:e.getTitle()},Ext.apply(e.titleStyle&&e.titleStyle.style||{},e.getLabel()||{})),true);b=c.getBBox();c.setAttributes({x:f.x+(f.width/2)-(b.width/2),y:f.y+f.height-(b.height/2)-4},true)},updateTitle:function(a){},drawLabel:function(){var v=this,j=v.getChart(),o=v.getSurface(),b=j.chartBBox,h=b.x+(b.width/2),g=b.y+b.height,k=v.getMargin(),d=Math.min(b.width,2*b.height)/2+2*k,u=Math.round,m=[],f,s=v.getMaximum()||0,r=v.getSteps(),q=0,w,t=Math.PI,c=Math.cos,a=Math.sin,e=v.labelStyle.style,n=e.renderer||function(x){return x};if(!v.labelArray){for(q=0;q<=r;q++){w=(q===0||q===r)?7:0;f=o.add({type:"text",text:n(u(q/r*s)),x:h+d*c(q/r*t-t),y:g+d*a(q/r*t-t)-w,"text-anchor":"middle","stroke-width":0.2,zIndex:10,stroke:"#333"});f.setAttributes(Ext.apply(v.labelStyle.style||{},{hidden:false}),true);m.push(f)}}else{m=v.labelArray;for(q=0;q<=r;q++){w=(q===0||q===r)?7:0;m[q].setAttributes({text:n(u(q/r*s)),x:h+d*c(q/r*t-t),y:g+d*a(q/r*t-t)-w},true)}}v.labelArray=m}});Ext.define("Ext.chart.axis.Numeric",{extend:"Ext.chart.axis.Axis",type:"numeric",config:{roundToDecimal:false,decimals:2,scale:"linear",position:"left",adjustMaximumByMajorUnit:false,adjustMinimumByMajorUnit:false},calcLabels:true,constructor:function(b){var c=this,a=b.label||{},d;c.callParent([b]);if(c.getRoundToDecimal()===false){return}if(a.renderer){d=a.renderer;a.renderer=function(e){return c.roundToDecimal(d(e),c.getDecimals())}}else{a.renderer=function(e){return c.roundToDecimal(e,c.getDecimals())}}c.setLabel(a)},roundToDecimal:function(a,c){var b=Math.pow(10,c||0);return((a*b)>>0)/b},getRange:function(){var c=this,b=isNaN(c.getMinimum())?Infinity:c.getMinimum(),a=isNaN(c.getMaximum())?-Infinity:c.getMaximum(),d=c.getBoundSeries();d.each(function(f){var e=c.isBoundToField(f.getXField())?f.getMinMaxXValues():f.getMinMaxYValues();if(e[0]<b){b=e[0]}if(e[1]>a){a=e[1]}});if(!isFinite(a)){a=c.prevMax||0}if(!isFinite(b)){b=c.prevMin||0}return{min:b,max:a}},calcEnds:function(){var d=this,b,e,c,h=d["zoom"+(d.isSide()?"Y":"X")],j=d.getChart().endsLocked&&(d.prevFrom!==undefined),g,f,a;if(j){b=d.prevFrom;e=d.prevTo}else{c=d.getRange();b=c.min;e=c.max;if(b!=e&&Ext.isNumber(e)&&(e!=(Math.floor(e)))){e=Math.ceil(e)}}if(d.type=="numeric"&&b===e){if(e!==0){b=e/2}else{b=-1}}a=Ext.draw.Draw.snapEnds(b,e,(d.getMajorTickSteps()!==false?(d.getMajorTickSteps()+1):d.getSteps())*h,j);g=a.from;f=a.to;if(!j){if(!isNaN(d.getMaximum())){a.to=d.getMaximum()}if(!isNaN(d.getMinimum())){a.from=d.getMinimum()}}a.step=(a.to-a.from)/(f-g)*a.step;if(d.getAdjustMaximumByMajorUnit()){a.to+=a.getStep()}if(d.getAdjustMinimumByMajorUnit()){a.from-=a.getStep()}if(!j){d.prevTo=a.to;d.prevFrom=a.from;d.prevMin=b==e?0:b;d.prevMax=e}return a},applyData:function(){this.callParent(arguments);return this.calcEnds()}});Ext.define("Ext.chart.axis.Radial",{extend:"Ext.chart.axis.Abstract",config:{maximum:false,step:10,position:"radial",rotation:0},applyPosition:function(){return"radial"},drawAxis:function(s){var v=this,k=v.getChart(),n=v.getSurface(),b=k.chartBBox,f=k.getStore(),q=f.getCount(),j=b.x+(b.width/2),h=b.y+(b.height/2),e=Math,x=e.max,d=e.min(b.width,b.height)/2,g=[],m,t=v.getSteps(),o=-v.getRotation(),w=Ext.draw.Draw.rad,c=e.cos,a=e.sin,r,u;if(!q){n.getItems().hide(true);return}v.updateSurfaceBox();v.centerX=j;v.centerY=h;if(!v.sprites){for(r=1;r<=t;r++){m=n.add(Ext.apply(v.style||{},{type:"circle",x:j,y:h,"stroke-width":1.5,radius:x(d*r/t,0),stroke:"#ccc"}));m.setAttributes({hidden:false},true);g.push(m)}f.each(function(A,z){u=w(o+z/q*360);m=n.add(Ext.apply(v.style||{},{type:"path",path:["M",j,h,"L",j+d*c(u),h+d*a(u),"Z"]}));m.setAttributes({hidden:false},true);g.push(m)})}else{g=v.sprites;for(r=0;r<t;r++){g[r].setAttributes({hidden:false,x:j,y:h,radius:x(d*(r+1)/t,0)},true)}f.each(function(A,z){u=w(o+z/q*360);g[r+z].setAttributes(Ext.apply(v.style||{},{hidden:false,path:["M",j,h,"L",j+d*c(u),h+d*a(u),"Z"]}),true)})}v.sprites=g;v.drawLabel()},drawLabel:function(){var N=this,v=N.getChart(),B=(N.getLabel()||{}).renderer||function(j){return j},C=N.getSurface(),c=v.chartBBox,h=v.getStore(),n=N.centerX,m=N.centerY,f=Math.min(c.width,c.height)/2,H=Math.max,L=Math.round,w=[],k,z=[],d,A=[],g,u=!N.getMaximum(),K=N.getMaximum()||0,I=N.getSteps(),G=0,F,r,q,D=-N.getRotation(),M=Ext.draw.Draw.rad,e=Math.cos,b=Math.sin,E=N.getLabel().display,o=E!=="none",x=N.labelGroup,a=N.labelStyle.style,s=Ext.apply({},a),t=10,J;if(!o){return}v.getSeries().each(function(j){z.push(j.getYField());g=j.getXField()});h.each(function(j,O){if(u){for(O=0,d=z.length;O<d;O++){K=H(+j.get(z[O]),K)}}A.push(j.get(g))});if(!N.labelArray){if(E!="categories"){for(G=1;G<=I;G++){k=C.add({group:x,type:"text",text:B(L(G/I*K)),x:n,y:m-f*G/I});if(a){k.setAttributes(a,true)}w.push(k)}}if(E!="scale"){delete s.translate;for(F=0,I=A.length;F<I;F++){J=M(D+F/I*360);r=e(J)*(f+t);q=b(J)*(f+t);k=C.add({group:x,type:"text",text:B(A[F]),x:n+r,y:m+q,"text-anchor":r*r<=0.001?"middle":(r<0?"end":"start")});if(a){k.setAttributes(s,true)}w.push(k)}}}else{w=N.labelArray;if(E!="categories"){for(G=0;G<I;G++){w[G].setAttributes({text:B(L((G+1)/I*K)),x:n,y:m-f*(G+1)/I,hidden:false},true)}}if(E!="scale"){for(F=0,I=A.length;F<I;F++){J=M(D+F/I*360);r=e(J)*(f+t);q=b(J)*(f+t);if(w[G+F]){w[G+F].setAttributes({type:"text",text:B(A[F]),x:n+r,y:m+q,"text-anchor":r*r<=0.001?"middle":(r<0?"end":"start"),hidden:false},true)}}}}N.labelArray=w},getSurface:function(){return this.getChart().getSurface("main")},reset:function(){this.setRotation(0);this.callParent()}});Ext.define("Ext.chart.axis.Time",{extend:"Ext.chart.axis.Numeric",type:"time",config:{calculateByLabelSize:true,dateFormat:false,fromDate:false,toDate:false,step:[Ext.Date.DAY,1],constrain:false},constructor:function(b){var c=this,a,d,e;c.callParent([b]);a=c.getLabel()||{};e=this.getDateFormat();if(e){if(a.renderer){d=a.renderer;a.renderer=function(f){var g=new Date(d(f));if(isNaN(g.valueOf())){return d(f)}return Ext.Date.format(g,e)}}else{a.renderer=function(f){var g=new Date(f);if(isNaN(g.valueOf())){return f}return Ext.Date.format(g,e)}}}c.setLabel(a)},doConstrain:function(){var g=this,k=g.getChart().getStore(),c=[],e=g.getFields(),f=e.length,d=g.getRange(),a=d.min,h=d.max,b,j,c=[];k.each(function(m){for(b=0;b<f;b++){j=m.get(e[b]);if(+j<+a){return}if(+j>+h){return}}c.push(m)});g.getChart().substore=Ext.create("Ext.data.JsonStore",{model:k.model,data:c})},processView:function(){var a=this;if(a.fromDate){a.setMinimum(+a.fromDate)}if(a.toDate){a.setMaximum(+a.toDate)}if(a.constrain){a.doConstrain()}},calcEnds:function(){var c=this,a,b=c.getStep();if(b){a=c.getRange();a=Ext.draw.Draw.snapEndsByDateAndStep(new Date(a.min),new Date(a.max),Ext.isNumber(b)?[Ext.Date.MILLI,b]:b);if(!isNaN(c.getMinimum())){a.from=c.getMinimum()}if(!isNaN(c.getMaximum())){a.to=c.getMaximum()}a.step=(a.to-a.from)/a.steps;return a}else{return c.callParent(arguments)}}});Ext.define("Ext.chart.series.ItemEvents",{statics:{itemEventNames:["itemmousemove","itemmouseup","itemmousedown","itemmouseover","itemmouseout","itemclick","itemdoubleclick","itemtap","itemtapstart","itemtapend","itemtapcancel","itemtaphold","itemdoubletap","itemsingletap","itemtouchstart","itemtouchmove","itemtouchend","itemdragstart","itemdrag","itemdragend","itempinchstart","itempinch","itempinchend","itemswipe"]},constructor:function(){var a=this,b=a.statics().itemEventNames;a.enableBubble(b)},initialize:function(){var a=this;a.getChart().on({scope:a,mousemove:a.onMouseMove,mouseup:a.onMouseUp,mousedown:a.onMouseDown,click:a.onClick,doubleclick:a.onDoubleClick,tap:a.onTap,tapstart:a.onTapStart,tapend:a.onTapEnd,tapcancel:a.onTapCancel,longpress:a.onLongPress,doubletap:a.onDoubleTap,singletap:a.onSingleTap,touchstart:a.onTouchStart,touchmove:a.onTouchMove,touchend:a.onTouchEnd,dragstart:a.onDragStart,drag:a.onDrag,dragend:a.onDragEnd,pinchstart:a.onPinchStart,pinch:a.onPinch,pinchend:a.onPinchEnd,swipe:a.onSwipe})},itemForEvent:function(c){var a=this;if(a.lastEvent!=c){a.lastEvent=c;var a=this,b=a.getChart().getEventXY(c);return a.lastItemForEvent=a.getItemForPoint(b[0],b[1])}return a.lastItemForEvent},getBubbleTarget:function(){return this.getChart()},onMouseMove:function(d){var c=this,b=c.lastOverItem,a=c.itemForEvent(d);if(b&&a!==b){c.fireEvent("itemmouseout",c,b,d);delete c.lastOverItem}if(a){c.fireEvent("itemmousemove",c,a,d)}if(a&&a!==b){c.fireEvent("itemmouseover",c,a,d);c.lastOverItem=a}}},function(){function a(b){return function(f){var d=this,c=d.itemForEvent(f);if(c){d.fireEvent(b,d,c,f)}}}Ext.apply(this.prototype,{onMouseUp:a("itemmouseup"),onMouseDown:a("itemmousedown"),onClick:a("itemclick"),onDoubleClick:a("itemdoubleclick"),onTap:a("itemtap"),onTapStart:a("itemtapstart"),onTapEnd:a("itemtapend"),onTapCancel:a("itemtapcancel"),onLongPress:function(d){var c=this,b=c.itemForEvent(d);if(b){c.fireEvent("itemlongpress",c,b,d)}},onDoubleTap:a("itemdoubletap"),onSingleTap:a("itemsingletap"),onTouchStart:a("itemtouchstart"),onTouchMove:a("itemtouchmove"),onTouchEnd:a("itemtouchend"),onDragStart:a("itemdragstart"),onDrag:a("itemdrag"),onDragEnd:a("itemdragend"),onPinchStart:a("itempinchstart"),onPinch:a("itempinch"),onPinchEnd:a("itempinchend"),onSwipe:a("itemswipe")})});Ext.define("Ext.chart.series.Series",{mixins:{identifiable:"Ext.mixin.Identifiable",observable:"Ext.mixin.Observable",label:"Ext.chart.Label",highlight:"Ext.chart.Highlight",callout:"Ext.chart.Callout",transformable:"Ext.chart.Transformable",itemEvents:"Ext.chart.series.ItemEvents"},uses:["Ext.chart.theme.MarkerStyle","Ext.chart.theme.LabelStyle"],config:{chart:null,title:null,excludes:[],shadowAttributes:[],shadowOptions:{},renderer:function(e,a,c,d,b){return c}},type:null,showInLegend:true,triggerAfterDraw:0,constructor:function(a){var b=this;b.seriesId=a.seriesId;b.getId();b.style={};b.themeStyle={};b.shadowGroups=[];b.markerStyle=new Ext.chart.theme.MarkerStyle();b.labelStyle=new Ext.chart.theme.LabelStyle();b.mixins.observable.constructor.apply(b,arguments);b.mixins.label.constructor.apply(b,arguments);b.mixins.highlight.constructor.apply(b,arguments);b.mixins.callout.constructor.apply(b,arguments);b.mixins.transformable.constructor.apply(b,arguments);b.mixins.itemEvents.constructor.apply(b,arguments);b.initConfig(a)},initialize:function(){var d=this,a=d.getSurface(),c,b;d.group=a.getGroup(d.getId());d.mixins.label.initialize.call(d);d.mixins.itemEvents.initialize.apply(d,arguments);d.setConfig({shadowAttributes:a.getShadowAttributesArray(),shadowOptions:{}});if(d.getChart().getShadow()){for(c=0,b=this.getShadowAttributes().length;c<b;c++){d.shadowGroups.push(a.getGroup(d.seriesId+"-shadows"+c))}}},applyShadowOptions:function(b){var c=this,a=c.getSurface();if(a){return Ext.apply(Ext.Object.chain(a.getShadowOptions()),b)}return Ext.apply({},b)},applyExcludes:function(a){return[].concat(a)},getId:function(){return this.seriesId||(this.seriesId=Ext.id(null,"ext-series-"))},updateChart:function(a){var b=this;delete b.surface;if(a){b.surface=a.getSurface("series-"+b.getId());b.surface.element.setStyle("zIndex",b.getChart().surfaceZIndexes.series)}},getSurface:function(){return this.surface},getOverlaySurface:function(){var b=this,a=b.overlaySurface;if(!a){a=b.overlaySurface=b.getChart().getSurface("seriesOverlay"+b.index);a.element.setStyle("zIndex",b.getChart().surfaceZIndexes.overlay)}return a},setBBox:function(a){var e=this,c=e.getChart(),b=c.chartBBox,f=a?0:c.maxGutter[0],d=a?0:c.maxGutter[1],g,h;g={x:0,y:0,width:b.width,height:b.height};e.clipBox=g;h={x:((g.x+f)-(c.zoom.x*c.zoom.width))*e.zoomX,y:((g.y+d)-(c.zoom.y*c.zoom.height))*e.zoomY,width:(g.width-(f*2))*c.zoom.width*e.zoomX,height:(g.height-(d*2))*c.zoom.height*e.zoomY};e.bbox=h},onAnimate:function(b,a){var d=this,e=d.getChart().getAnimate(),c=b.fx;c.stop();c.setDuration(a.duration||e.duration||500);c.setEasing(a.easing||e.easing||"easeInOut");d.triggerAfterDraw++;c.setOnComplete(function(){d.triggerAfterDraw--;if(d.triggerAfterDraw===0){d.fireEvent("afterrender")}});return c.start(a.to)},getGutters:function(){return[0,0]},getItemForPoint:function(a,g){var e=this,b=e.items,f=e.bbox,c,d;if(b&&b.length&&!e.seriesIsHidden&&Ext.draw.Draw.withinBox(a,g,f)){a-=e.panX;g-=e.panY;for(c=0,d=b.length;c<d;c++){if(b[c]&&e.isItemInPoint(a,g,b[c],c)){return b[c]}}}return null},isItemInPoint:function(){return false},hideAll:function(){var g=this,f=g.items,k,e,d,c,a,h,b;g.seriesIsHidden=true;g._prevShowMarkers=g.showMarkers;g.showMarkers=false;g.hideLabels(0);for(d=0,e=f.length;d<e;d++){k=f[d];h=k.sprite;if(h){h.setAttributes({hidden:true},true);if(h.shadows){b=h.shadows;for(c=0,a=b.length;c<a;++c){b[c].hide(true)}}}}},showAll:function(){var a=this,b=a.getChart().animate;a.getChart().animate=false;a.seriesIsHidden=false;a.showMarkers=a._prevShowMarkers;a.drawSeries();a.getChart().animate=b},drawSeries:function(){this.updateSurfaceBox()},getLegendLabels:function(){var a=this.getTitle();return a?[a]:[]},getColorFromStyle:function(a){if(Ext.isObject(a)){return a.stops[0].color}return a.indexOf("url")==-1?a:this.getSurface("main")._gradients[a.match(/url\(#([^\)]+)\)/)[1]].stops[0].color},getLegendColor:function(a){var b=this,d,c;if(b.style){d=b.style.fill;c=b.style.stroke;if(d&&d!="none"){return b.getColorFromStyle(d)}return b.getColorFromStyle(c)}return"#000"},visibleInLegend:function(a){if(this.getLegendLabels().length==1){return !this.seriesIsHidden}else{return !this.isExcluded(a)}},getLegendInfo:function(){var d=this,e=d.getLegendLabels(),b=0,c=e.length,a=[];for(;b<c;b++){a.push({label:e[b],color:d.getLegendColor(b),disabled:!d.visibleInLegend(b)})}return{items:a}},onLegendItemTap:function(a,b){var d=this,c,e;if(this.getLegendLabels().length==1){c=!this.seriesIsHidden;this.seriesIsHidden=c}else{c=!d.isExcluded(b);e=d.getExcludes();e[b]=c;d.setExcludes(e)}a.set("disabled",c)},onLegendItemDoubleTap:function(a,b){},onLegendReset:function(){if(this.getLegendLabels().length==1){this.seriesIsHidden=false}else{this.setExcludes([])}},setFieldTitle:function(a,d){var c=this,b=c.title;if(Ext.isString(a)){d=a;a=0}if(Ext.isArray(b)){b[a]=d}else{c.title=d}c.fireEvent("titlechange",d,a)},updateSurfaceBox:function(){var d=this,a=d.getSurface(),b=d.getOverlaySurface(),c=d.getChart().chartBBox;a.element.setTop(c.y);a.element.setLeft(c.x);a.setSize(c.width,c.height);b.element.setTop(c.y);b.element.setLeft(c.x);b.setSize(c.width,c.height)},getTransformableSurfaces:function(){return[this.getSurface(),this.getOverlaySurface()]},eachRecord:function(c,b){var a=this.getChart();(a.substore||a.getStore()).each(c,b)},getRecordCount:function(){var b=this.getChart(),a=b.substore||b.getStore();return a?a.getCount():0},isExcluded:function(a){var b=this.getExcludes();return !!(b&&b[a])},combine:function(e,c){var b=this,a=b.combinations||(b.combinations=[]),d=b.getExcludes();a.push([e,c]);if(d&&e<d.length){d.splice(e,1)}},isCombinedItem:function(a){return this.getCombinationIndexesForItem(a).length>0},getCombinationIndexesForItem:function(f){var h=this,j=h.combinations,a=[],c,g,b,e,d;if(j){for(c=0,g=j.length;c<g;c++){b=j[c];e=b[0];d=b[1];if(!a[d]){a[d]=[]}if(a[e]){a[d]=a[d].concat(a[e])}a[d].push(c);a.splice(e,1)}}return a[f]||[]},split:function(f){var h=this,k=h.combinations,m=h.getExcludes(),e,d,g,a,c,b;if(k){a=h.getCombinationIndexesForItem(f);if(a){for(e=a.length;e--;){b=k[a[e]][0];for(d=a[e]+1,g=k.length;d<g;d++){if(b<=k[d][0]){k[d][0]++}if(b<=k[d][1]){k[d][1]++}}k.splice(a[e],1);if(m){m.splice(b,0,false)}}}h.clearCombinations();for(e=0,g=k.length;e<g;e++){c=k[e];h.combine(c[0],c[1])}}},clearCombinations:function(){delete this.combinations},reset:function(){var a=this;a.unHighlightItem();a.cleanHighlights();a.clearTransform()},parent:null,getItemId:function(){return this.element&&this.element.id||this.id||null},initCls:function(){return(this.cls||"").split(" ")},isXType:function(a){return a==="series"},getRefItems:function(a){var c=this,b=[];if(c.markerStyle){b.push(c.markerStyle)}if(c.labelStyle){b.push(c.labelStyle)}if(c.calloutStyle){b.push(c.calloutStyle)}if(c.highlightStyle){b.push(c.highlightStyle)}return b}});Ext.define("Ext.chart.series.Cartesian",{extend:"Ext.chart.series.Series",config:{xField:null,yField:null,axis:"left"},boundAxes:{xAxis:"bottom",yAxis:"left"},applyYField:function(a){return[].concat(a)},applyAxis:function(a){return[].concat(a)},updateAxis:function(){this.onAxesChanged()},initialize:function(){var a=this;a.callParent();a.getChart().on("axeschange","onAxesChanged",a);a.onAxesChanged()},getLegendLabels:function(){var b=this,c=[],a=b.combinations;Ext.each(b.getYField(),function(e,d){var f=b.getTitle();c.push((Ext.isArray(f)?f[d]:f)||e)});if(a){Ext.each(a,function(e){var d=c[e[0]],f=c[e[1]];c[e[1]]=d+" & "+f;c.splice(e[0],1)})}return c},eachYValue:function(a,c,b){Ext.each(this.getYValueAccessors(),function(d,e){c.call(b,d(a),e)})},getYValueCount:function(){return this.getYValueAccessors().length},combine:function(f,e){var d=this,c=d.getYValueAccessors(),b=c[f],a=c[e];c[e]=function(g){return b(g)+a(g)};c.splice(f,1);Ext.chart.series.Cartesian.superclass.combine.call(d,f,e)},clearCombinations:function(){delete this.yValueAccessors;Ext.chart.series.Cartesian.superclass.clearCombinations.call(this)},getYValueAccessors:function(){var b=this,a=b.yValueAccessors;if(!a){a=b.yValueAccessors=[];Ext.each(b.getYField(),function(c){a.push(function(d){return d.get(c)})})}return a},aggregateRecords:function(b,c,a){c=Ext.isFunction(c)?c.apply(this):c;this.eachRecord(function(d){return c=b.apply(this,[c,d])});return Ext.isFunction(a)?a(c):c},aggregateXValues:function(b,d,a){var c=this.getXField();return this.aggregateRecords(function(f,e){return f=b.apply(this,[f,e.get(c)])},d,a)},aggregateYValues:function(b,d,a){var c=this.getYField();return this.aggregateRecords(function(f,e){return f=b.apply(this,[f,e.get(c)])},d,a)},getMinMaxXValues:function(){return this.aggregateXValues(function(e,f){if(f>e[1]){e[1]=f}if(f<e[0]){e[0]=f}return e},[Infinity,-Infinity]);var d=this,b,a,c=d.getXField();if(d.getRecordCount()>0){b=Infinity;a=-b;d.eachRecord(function(e){var f=e.get(c);if(f>a){a=f}if(f<b){b=f}})}else{b=a=0}return[b,a]},getMinMaxYValues:function(){var h=this,f=h.stacked,e,c,d,b;function g(k,j){if(!h.isExcluded(j)){if(k<0){b+=k}else{d+=k}}}function a(k,j){if(!h.isExcluded(j)){if(k>c){c=k}if(k<e){e=k}}}if(h.getRecordCount()>0){e=Infinity;c=-e;h.eachRecord(function(j){if(f){d=0;b=0;h.eachYValue(j,g);if(d>c){c=d}if(b<e){e=b}}else{h.eachYValue(j,a)}})}else{e=c=0}return[e,c]},onAxesChanged:function(){var c=this,e=c.getChart().getAxes(),b=c.getAxis(),d,a;if(b.indexOf("top")>-1){d="top"}else{if(b.indexOf("bottom")>-1){d="bottom"}else{if(e.get("top")){d="top"}else{if(e.get("bottom")){d="bottom"}}}}if(b.indexOf("left")>-1){a="left"}else{if(b.indexOf("right")>-1){a="right"}else{if(e.get("left")){a="left"}else{if(e.get("right")){a="right"}}}}c.boundAxes={xAxis:d,yAxis:a}},getAxesForXAndYFields:function(){return this.boundAxes}});Ext.define("Ext.chart.series.Bar",{extend:"Ext.chart.series.Cartesian",type:"bar",column:false,config:{axis:"bottom",style:false,gutter:38.2,groupGutter:38.2,xPadding:0,yPadding:10,highlightCfg:{lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"}},labelFilterModel:true,constructor:function(b){this.callParent(arguments);var c=this,a=c.getSurface();c.group=a.getGroup(c.seriesId+"-bars");c.initialStacked=c.stacked},getBarGirth:function(){var c=this,a=c.column,b=c.getRecordCount(),d=c.getGutter()/100;return(c.getChart().chartBBox[a?"width":"height"]-(a?c.getXPadding():c.getYPadding())*2)/(b*(d+1)-d)},getGutters:function(){var b=this,a=b.column,c=Math.ceil((a?b.getXPadding():b.getYPadding())+b.getBarGirth()/2);return a?[c,0]:[0,c]},getBounds:function(){var F=this,u=F.getChart(),c=F.getYValueCount(),D=c,m=F.getGroupGutter()/100,g=F.column,o=F.zoomX,n=F.zoomY,s=F.getXPadding()*o,b=F.getYPadding()*n,B=F.stacked,h=F.disjointStacked,t=F.getBarGirth()*(g?o:n),k=Math,I=k.max,z=k.abs,E,a,C,A,e,w,G,r,H,v,x,d,f;F.setBBox(true);a=F.bbox;for(v=0,H=c;v<H;v++){if(F.isExcluded(v)){D--}}if(F.getAxis()){e=u.getAxes().get(F.getAxis());if(e){w=e.calcEnds();C=w.from;A=w.to}}if(F.getYField()&&!Ext.isNumber(C)){e=new Ext.chart.axis.Numeric({chart:u,fields:[].concat(F.getYField())});w=e.calcEnds();C=w.from;A=w.to}if(!Ext.isNumber(C)){C=0}if(!Ext.isNumber(A)){A=0}G=(g?a.height-b*2:a.width-s*2)/(A-C);E=t/((B&&!h?1:D)*(m+1)-m);r=(g)?a.y+a.height-b:a.x+s;function q(J,j){if(!F.isExcluded(j)){H[J>0?1:0][f]+=z(J)}}if(B){H=[[],[]];F.eachRecord(function(j,J){H[0][J]=H[0][J]||0;H[1][J]=H[1][J]||0;f=J;F.eachYValue(j,q)});H[+(A>0)].push(z(A));H[+(C>0)].push(z(C));d=I.apply(k,H[0]);x=I.apply(k,H[1]);G=(g?a.height-b*2:a.width-s*2)/(x+d);r=r+d*G*(g?-1:1)}else{if(C/A<0){r=r-C*G*(g?-1:1)}}return{bbox:a,barsLen:c,visibleBarsLen:D,barWidth:t,groupBarWidth:E,scale:G,zero:r,xPadding:s,yPadding:b,signed:C/A<0,minY:C,maxY:A}},getPaths:function(){var v=this,S=v.getChart(),G=v.bounds=v.getBounds(),A=v.items=[],j=v.getGutter()/100,c=v.getGroupGutter()/100,Q=S.getAnimate(),M=v.column,x=v.group,k=S.getShadow(),O=v.shadowGroups,q=O.length,z=G.bbox,m=v.getXPadding()*v.zoomX,r=v.getYPadding()*v.zoomY,P=v.stacked,C=v.disjointStacked,w=G.barsLen,N=S.getColorsStyle(),g=N&&N.length||0,D=Math,n=D.max,u=D.abs,E=v.getRecordCount(),d,J,F,a,h,t,s,o,f,e,H,B,K,I,R,b;function L(U,T){s={fill:N[(w>1?T:0)%g]};if(v.isExcluded(T)){d=0;if(!v.stacked){f--;s.hidden=true}}else{d=Math.round(U*G.scale)}if(M){Ext.apply(s,{height:d,width:n(G.groupBarWidth,0),x:(z.x+m+R*G.barWidth*(1+j)+f*G.groupBarWidth*(1+c)*(!P||C?1:0)),y:a-d})}else{K=(E-1)-R;Ext.apply(s,{height:n(G.groupBarWidth,0),width:d+(a==G.zero),x:a+(a!=G.zero),y:(z.y+r+K*G.barWidth*(1+j)+f*G.groupBarWidth*(1+c)*(!P||C?1:0)+1)})}if(d<0){if(M){s.y=h;s.height=u(d)}else{s.x=h+d;s.width=u(d)}}if(P){if(d<0){h+=d*(M?-1:1)}else{a+=d*(M?-1:1)}J+=u(d);if(d<0){F+=u(d)}}s.x=Math.floor(s.x)+1;I=Math.floor(s.y);if(!Ext.isIE9&&s.y>I){I--}s.y=I;s.width=Math.floor(s.width);s.height=Math.floor(s.height);A.push({series:v,storeItem:b,value:[b.get(v.getXField()),U],attr:s,point:M?[s.x+s.width/2,U>=0?s.y:s.y+s.height]:[U>=0?s.x+s.width:s.x,s.y+s.height/2]});if(Q&&S.resizing){o=M?{x:s.x,y:G.zero,width:s.width,height:0}:{x:G.zero,y:s.y,width:0,height:s.height};if(k&&(P&&!t||!P)){t=true;for(e=0;e<q;e++){H=O[e].getAt(P?R:(R*w+T));if(H){H.setAttributes(o,true)}}}B=x.getAt(R*w+T);if(B){B.setAttributes(o,true)}}f++}v.eachRecord(function(T,U){a=h=G.zero;J=0;F=0;t=false;f=0;b=T;R=U;v.eachYValue(T,L);if(P&&A.length){A[U*f].totalDim=J;A[U*f].totalNegDim=F}},v)},renderShadows:function(v,w,A,k){var B=this,q=B.getChart(),t=B.getSurface(),f=q.getAnimate(),z=B.stacked,a=B.shadowGroups,x=B.getShadowAttributes(),o=a.length,g=q.substore||q.getStore(),d=B.column,s=B.items,b=[],m=k.zero,e,r,h,C,n,u,c;if((z&&(v%k.visibleBarsLen===0))||!z){u=v/k.visibleBarsLen;for(e=0;e<o;e++){r=Ext.apply({},x[e]);h=a[e].getAt(z?u:v);r.x=w.x;r.y=w.y;r.width=w.width;r.height=w.height;if(!h){h=t.add(Ext.apply({type:"rect",group:a[e]},Ext.apply({},A,r)))}if(z){C=s[v].totalDim;n=s[v].totalNegDim;if(d){r.y=m-n;r.height=C}else{r.x=m-n;r.width=C}}if(f){if(!z){c=B.getRenderer()(h,g.getAt(u),r,v,g);B.onAnimate(h,{to:c})}else{c=B.getRenderer()(h,g.getAt(u),Ext.apply(r,{hidden:true}),v,g);h.setAttributes(c,true)}}else{c=B.getRenderer()(h,g.getAt(u),Ext.apply(r,{hidden:false}),v,g);h.setAttributes(c,true)}b.push(h)}}return b},drawSeries:function(){var F=this,s=F.getChart(),m=s.substore||s.getStore(),w=F.getSurface(),h=s.getAnimate(),C=F.stacked,d=F.column,b=s.getShadow(),a=F.shadowGroups,r=a.length,o=F.group,f=F.getStyle(),t,q,A,z,E,u,c,e,g,n,k,B,v,x,D;if(F.fireEvent("beforedraw",F)===false){return}Ext.chart.series.Bar.superclass.drawSeries.call(this);if(!F.getRecordCount()){w.getItems().hide(true);return}delete f.fill;F.unHighlightItem();F.cleanHighlights();F.getPaths();n=F.bounds;t=F.items;E=d?{y:n.zero,height:0}:{x:n.zero,width:0};q=t.length;for(A=0;A<q;A++){D=t[A];u=o.getAt(A);B=D.attr;if(b){D.shadows=F.renderShadows(A,B,E,n)}if(!u){v=Ext.apply({},E,B);v=Ext.apply(v,k||{});if(b){Ext.apply(v,F.getShadowOptions())}u=w.add(Ext.apply({},{type:"rect",group:o},v))}if(!D.attr.hidden){if(h){c=F.getRenderer()(u,m.getAt(A),B,A,m);x=F.onAnimate(u,{to:Ext.apply(c,k)});if(b&&C&&(A%n.barsLen===0)){z=A/n.barsLen;for(e=0;e<r;e++){x.on("afteranimate",function(){this.show(true)},a[e].getAt(z))}}}else{c=F.getRenderer()(u,m.getAt(A),Ext.apply(B,{hidden:false}),A,m);u.setAttributes(Ext.apply(c,k),true)}}else{u.hide(true)}D.sprite=u}q=o.getCount();for(z=A;z<q;z++){o.getAt(z).hide(true)}if(b){for(e=0;e<r;e++){g=a[e];q=g.getCount();for(z=A;z<q;z++){g.getAt(z).hide(true)}}}F.renderLabels();F.fireEvent("draw",F)},onCreateLabel:function(e,k,d,f){var g=this,a=g.getSurface(),j=g.labelsGroup,b=g.label,c=Ext.apply({},b,g.labelStyle.style||{}),h;return a.add(Ext.apply({type:"text",group:j},c||{}))},onPlaceLabel:function(H,O,t,K,q,I,J,w){var m=this,n=m.bounds,d=n.groupBarWidth,G=m.column,M=m.getChart(),v=M.chartBBox,B=M.resizing,o=t.value[0],P=t.value[1],k=t.attr,A=Ext.apply(m.labelStyle.style||{},m.label||{}),L=A.orientation=="vertical",g=[].concat(A.field),u=A.renderer,s=u(O.get(g[w])),f=m.getLabelSize(s),a=f.width,c=f.height,b=n.zero,h="outside",r="insideStart",N="insideEnd",F=10,D=6,e=n.signed,E,C,z;H.setAttributes({text:s},true);H.isOutside=false;if(G){if(q==h){if(c+D+k.height>(P>=0?b:v.height-b)){q=N}}else{if(c+D>k.height){q=h;H.isOutside=true}}E=k.x+d/2;C=q==r?(b+((c/2+3)*(P>=0?-1:1))):(P>=0?(k.y+((c/2+3)*(q==h?-1:1))):(k.y+k.height+((c/2+3)*(q===h?1:-1))))}else{if(q==h){if(a+F+k.width>(P>=0?v.width-b:b)){q=N}}else{if(a+F>k.width){q=h;H.isOutside=true}}E=q==r?(b+((a/2+5)*(P>=0?1:-1))):(P>=0?(k.x+k.width+((a/2+5)*(q===h?1:-1))):(k.x+((a/2+5)*(q===h?-1:1))));C=k.y+d/2}z={x:E,y:C};if(L){z.rotate={x:E,y:C,degrees:270}}if(I&&B){if(G){E=k.x+k.width/2;C=b}else{E=b;C=k.y+k.height/2}H.setAttributes({x:E,y:C},true);if(L){H.setAttributes({rotate:{x:E,y:C,degrees:270}},true)}}if(I){m.onAnimate(H,{to:z})}else{H.setAttributes(Ext.apply(z,{hidden:false}),true)}},getLabelSize:function(f){var k=this.testerLabel,a=this.label,d=Ext.apply({},a,this.labelStyle.style||{}),b=a.orientation==="vertical",j,g,e,c;if(!k){k=this.testerLabel=this.getSurface().add(Ext.apply({type:"text",opacity:0},d))}k.setAttributes({text:f},true);j=k.getBBox();g=j.width;e=j.height;return{width:b?e:g,height:b?g:e}},onAnimate:function(b,a){b.show();Ext.chart.series.Bar.superclass.onAnimate.apply(this,arguments)},isItemInPoint:function(a,d,b){var c=b.sprite.getBBox();return c.x<=a&&c.y<=d&&(c.x+c.width)>=a&&(c.y+c.height)>=d},itemHidden:function(a){return !a||a.attr.hidden||(a.attr.width<=1)||(a.attr.height<=1)},getLegendColor:function(b){var c=this,a=c.getChart().getColorsStyle();return c.getColorFromStyle(a[b%a.length])},highlightItem:function(a){this.callParent(arguments);this.renderLabels()},unHighlightItem:function(){this.callParent(arguments);this.renderLabels()},cleanHighlights:function(){this.callParent(arguments);this.renderLabels()},reset:function(){var a=this;a.stacked=a.initialStacked;Ext.chart.series.Bar.superclass.reset.call(a)}});Ext.define("Ext.chart.series.Column",{extend:"Ext.chart.series.Bar",type:"column",column:true,config:{axis:"left",xPadding:10,yPadding:0}});Ext.define("Ext.chart.series.Gauge",{extend:"Ext.chart.series.Series",type:"gauge",rad:Math.PI/180,config:{angleField:false,needle:false,donut:false,showInLegend:false,minimum:0,maximum:100,colorSet:[]},constructor:function(b){if(!b.angleField&&b.field){console.warn("use angleField instead");b.angleField=b.field}this.callParent(arguments);var d=this,c=d.getChart(),a=d.getSurface();a.addCustomAttribute("segment",function(e){return d.getSegment(e)})},initialize:function(){var a=this;a.callParent()},getSegment:function(b){var F=this,E=F.rad,d=Math.cos,a=Math.sin,n=Math.abs,k=F.centerX,h=F.centerY,B=0,A=0,z=0,v=0,g=0,f=0,e=0,c=0,C=0.01,u=b.startAngle,s=b.endAngle,j=(u+s)/2*E,m=b.margin||0,w=n(s-u)>180,o=n(s%360),t=o>90&&o<270,G=Math.min(u,s)*E,D=Math.max(u,s)*E,q=false,r=false;k+=m*d(j);h+=m*a(j);B=k+b.startRho*d(G);g=h+b.startRho*a(G);A=k+b.endRho*d(G);f=h+b.endRho*a(G);z=k+b.startRho*d(D);e=h+b.startRho*a(D);v=k+b.endRho*d(D);c=h+b.endRho*a(D);if(n(B-z)<=C&&n(g-e)<=C){q=true}r=q&&(n(A-v)<=C&&n(f-c)<=C);if(r){return{path:[["M",v,c-0.0001],["A",b.endRho,b.endRho,0,+w,+t,v,c],["Z"]]}}else{if(q){return{path:[["M",B,g],["L",A,f],["A",b.endRho,b.endRho,0,+w,1,v,c],["Z"]]}}else{return{path:[["M",B,g],["L",A,f],["A",b.endRho,b.endRho,0,+w,1,v,c],["M",v,c],["L",z,e],["A",b.startRho,b.startRho,0,+w,0,B,g],["Z"]]}}}},calcMiddle:function(o){var h=this,j=h.rad,n=o.slice,m=h.centerX,k=h.centerY,g=n.startAngle,e=n.endAngle,b=Math.min(g,e)*j,a=Math.max(g,e)*j,d=-(b+(a-b)/2),f=m+(o.endRho+o.startRho)/2*Math.cos(d),c=k-(o.endRho+o.startRho)/2*Math.sin(d);o.middle={x:f,y:c}},drawSeries:function(){var r=this,O=r.getChart(),a=O.substore||O.getStore(),t=r.group,M=r.getChart().getAnimate(),x=r.getChart().getAxes().get(0),z=x&&x.getMinimum()||r.getMinimum()||0,D=x&&x.getMaximum()||r.getMaximum()||0,h=r.getAngleField()||r.field,F=r.getSurface(),C=O.chartBBox,b=+r.getDonut(),v=[],g=r.style,J=O.getColorsStyle(),s=J&&J.length||0,e=Math.cos,m=Math.sin,f=!!O.getShadow(),n,d,c,q,k,w,H,A,B,E,N,K,L,j,u,o,I,G;if(r.fireEvent("beforedraw",r)===false){return}Ext.chart.series.Gauge.superclass.drawSeries.call(this);r.setBBox();u=r.bbox;if(r.getColorSet()){J=r.getColorSet();s=J.length}if(!r.getRecordCount()){F.getItems().hide(true);return}d=r.centerX=(C.width/2);c=r.centerY=C.height;r.radius=Math.min(d,c);r.slices=k=[];r.items=v=[];if(!r.value){E=a.getAt(0);r.value=E.get(h)}H=r.value;if(r.getNeedle()){I={series:r,value:H,startAngle:-180,endAngle:0,rho:r.radius};o=-180*(1-(H-z)/(D-z));k.push(I)}else{o=-180*(1-(H-z)/(D-z));I={series:r,value:H,startAngle:-180,endAngle:o,rho:r.radius};G={series:r,value:r.maximum-H,startAngle:o,endAngle:0,rho:r.radius};k.push(I,G)}for(N=0,B=k.length;N<B;N++){q=k[N];w=t.getAt(N);n=Ext.apply({segment:{startAngle:q.startAngle,endAngle:q.endAngle,margin:0,rho:q.rho,startRho:q.rho*+b/100,endRho:q.rho}},Ext.apply(g,J&&{fill:J[N%s]}||{}));A=Ext.apply({},n.segment,{slice:q,series:r,storeItem:E,index:N});v[N]=A;if(!w){j=Ext.apply({type:"path",group:t},Ext.apply(g,J&&{fill:J[N%s]}||{}));if(f){Ext.apply(j,r.getShadowOptions())}w=F.add(Ext.apply(j,n))}q.sprite=q.sprite||[];A.sprite=w;q.sprite.push(w);if(M){n=r.getRenderer()(w,E,n,N,a);w._to=n;r.onAnimate(w,{to:n})}else{n=r.getRenderer()(w,E,Ext.apply(n,{hidden:false}),N,a);w.setAttributes(n,true)}}if(r.getNeedle()){o=o*Math.PI/180;if(!r.needleSprite){r.needleSprite=r.getSurface().add({type:"path",path:["M",d+(r.radius*+b/100)*e(o),c+-Math.abs((r.radius*+b/100)*m(o)),"L",d+r.radius*e(o),c+-Math.abs(r.radius*m(o))],"stroke-width":4,stroke:"#222"})}else{if(M){r.onAnimate(r.needleSprite,{to:{path:["M",d+(r.radius*+b/100)*e(o),c+-Math.abs((r.radius*+b/100)*m(o)),"L",d+r.radius*e(o),c+-Math.abs(r.radius*m(o))]}})}else{r.needleSprite.setAttributes({type:"path",path:["M",d+(r.radius*+b/100)*e(o),c+-Math.abs((r.radius*+b/100)*m(o)),"L",d+r.radius*e(o),c+-Math.abs(r.radius*m(o))]})}}r.needleSprite.setAttributes({hidden:false},true)}delete r.value;r.fireEvent("draw",r)},setValue:function(a){this.value=a;this.drawSeries()},onCreateLabel:Ext.emptyFn,onPlaceLabel:Ext.emptyFn,onPlaceCallout:Ext.emptyFn,onAnimate:function(b,a){b.show();Ext.chart.series.Gauge.superclass.onAnimate.apply(this,arguments)},isItemInPoint:function(){return false},showAll:function(){if(!isNaN(this._index)){this.getExcludes()[this._index]=false;this.drawSeries()}},getLegendColor:function(b){var c=this,a=c.getChart().getColorsStyle();return c.getColorFromStyle(a[b%a.length])}});Ext.define("Ext.chart.series.Line",{extend:"Ext.chart.series.Cartesian",uses:["Ext.chart.Shape"],type:"line",config:{selectionTolerance:20,showMarkers:true,markerConfig:{zIndex:40},smooth:false,fill:false},defaultSmoothness:3,overflowBuffer:1,constructor:function(b){this.callParent(arguments);var c=this,a=c.getSurface();if(c.getShowMarkers()){c.markerGroup=a.getGroup(c.seriesId+"-markers")}},shrink:function(b,j,k){var g=b.length,h=Math.floor(g/k),f=1,d=0,a=0,e=[b[0]],c=[j[0]];for(;f<g;++f){d+=b[f]||0;a+=j[f]||0;if(f%h==0){e.push(d/h);c.push(a/h);d=0;a=0}}return{x:e,y:c}},drawSeries:function(){var aj=this,av=aj.getChart(),R=av.getAxes(),am,ap=av.substore||av.getStore(),U=aj.getRecordCount(),X=av.chartBBox.width*aj.overflowBuffer,t=aj.getSurface(),an={},Q=aj.group,J=aj.getShowMarkers(),aB=aj.markerGroup,C=av.getShadow(),B=aj.shadowGroups,W=aj.getShadowAttributes(),O=aj.getSmooth(),q=B.length,at=["M"],S=["M"],I=av.markerIndex,ai,aw=[],ag={},aa=[],u={},H=false,aA=aj.markerStyle.style,Z=aj.style,ah=av.getColorsStyle(),P=ah&&ah.length||0,L=Ext.isNumber,ax=aj.seriesIdx,e=aj.getAxesForXAndYFields(),h=e.xAxis,az=e.yAxis,ac,f,ab,ad,z,b,ae,G,F,d,c,s,r,V,N,M,au,k,E,D,aC,m,o,A,a,Y,af,w,ar,v,aq,n,ay,ao,al,T,g,ak,K;if(aj.fireEvent("beforedraw",aj)===false){return}aj.callParent(arguments);if(!U||aj.seriesIsHidden){t.getItems().hide(true);return}ao=Ext.apply(aA,aj.getMarkerConfig());T=ao.type;delete ao.type;al=Z;if(!al["stroke-width"]){al["stroke-width"]=0.5}if(I&&aB&&aB.getCount()){for(N=0;N<I;N++){D=aB.getAt(N);aB.remove(D);aB.add(D);aC=aB.getAt(aB.getCount()-2);D.setAttributes({x:0,y:0,translate:{x:aC.attr.translation.x,y:aC.attr.translation.y}},true)}}aj.unHighlightItem();aj.cleanHighlights();aj.setBBox();an=aj.bbox;aj.clipRect=[an.x,an.y,an.width,an.height];if(h&&av.getAxes().get(h)){E=av.getAxes().get(h).calcEnds();w=E.from;ar=E.to}if(az&&av.getAxes().get(az)){E=av.getAxes().get(az).calcEnds();v=E.from;aq=E.to}else{E=aj.getMinMaxYValues();v=E.min;aq=E.max}if(isNaN(w)){w=0;Y=an.width/((U-1)||1)}else{Y=an.width/((ar-w)||(U-1)||1)}if(isNaN(v)){v=0;af=an.height/((U-1)||1)}else{af=an.height/((aq-v)||1)}ak=w-(X+aj.panX)/Y;K=ak+(X*2+av.chartBBox.width)/Y;aj.eachRecord(function(j,x){o=j.get(aj.getXField());if(typeof o=="string"||typeof o=="object"&&!Ext.isDate(o)||h&&R.get(h)&&R.get(h).type=="category"){if(o in ag){o=ag[o]}else{o=ag[o]=x}}if(o>=ak&&o<=K){A=j.get(aj.getYField());if(A===null||typeof A=="undefined"||(typeof A=="string"&&!A)){return}if(typeof A=="string"||typeof A=="object"&&!Ext.isDate(o)||az&&R.get(az)&&R.get(az).type=="category"){A=x}aw.push(o);aa.push(A)}});au=aw.length;if(au>an.width){a=aj.shrink(aw,aa,an.width);aw=a.x;aa=a.y}aj.items=[];g=0;au=aw.length;for(N=0;N<au;N++){o=aw[N];A=aa[N];if(A===false){if(S.length==1){S=[]}H=true;aj.items.push(false);continue}else{G=(an.x+(o-w)*Y).toFixed(2);F=((an.y+an.height)-(A-v)*af).toFixed(2);if(H){H=false;S.push("M")}S=S.concat([G,F])}if((typeof r=="undefined")&&(typeof F!="undefined")){r=F;s=G}if(!aj.line||av.resizing){at=at.concat([G,an.y+an.height/2])}if(av.getAnimate()&&av.resizing&&aj.line){aj.line.setAttributes({path:at},true);if(aj.fillPath){aj.fillPath.setAttributes({path:at,opacity:0.2},true)}if(aj.line.shadows){ac=aj.line.shadows;for(M=0,q=ac.length;M<q;M++){f=ac[M];f.setAttributes({path:at},true)}}}if(J){D=aB.getAt(g++);if(!D){D=Ext.chart.Shape[T](t,Ext.apply({group:[Q,aB],x:0,y:0,translate:{x:d||G,y:c||(an.y+an.height/2)},value:'"'+o+", "+A+'"',},ao));D._to={translate:{x:G,y:F}}}else{D.setAttributes({value:'"'+o+", "+A+'"',x:0,y:0,hidden:false},true);D._to={translate:{x:G,y:F}}}}aj.items.push({series:aj,value:[o,A],point:[G,F],sprite:D,storeItem:ap.getAt(N)});d=G;c=F}if(S.length<=1){return}if(O){S=Ext.draw.Draw.smooth(S,L(O)?O:aj.defaultSmoothness)}if(av.markerIndex&&aj.previousPath){ad=aj.previousPath;ad.splice(1,2)}else{ad=S}if(!aj.line){aj.line=t.add(Ext.apply({type:"path",group:Q,path:at,stroke:al.stroke||al.fill},al||{}));if(C){aj.line.setAttributes(aj.getShadowOptions(),true)}aj.line.setAttributes({fill:"none",zIndex:30});if(!al.stroke&&P){aj.line.setAttributes({stroke:ah[ax%P]},true)}if(C){ac=aj.line.shadows=[];for(ab=0;ab<q;ab++){ai=W[ab];ai=Ext.apply({},ai,{path:at});f=t.add(Ext.apply({},{type:"path",group:B[ab]},ai));ac.push(f)}}}if(aj.getFill()){b=S.concat([["L",G,an.y+an.height],["L",s,an.y+an.height],["L",s,r]]);if(!aj.fillPath){aj.fillPath=t.add({group:Q,type:"path",opacity:al.opacity||0.3,fill:al.fill||ah[ax%P],path:at})}}V=J&&aB.getCount();if(av.getAnimate()){z=aj.getFill();n=aj.line;ae=aj.getRenderer()(n,false,{path:S},N,ap);Ext.apply(ae||{},al||{},{stroke:al.stroke||al.fill});delete ae.fill;n.show(true);if(av.markerIndex&&aj.previousPath){aj.animation=ay=aj.onAnimate(n,{to:ae,from:{path:ad}})}else{aj.animation=ay=aj.onAnimate(n,{to:ae})}if(C){ac=n.shadows;for(M=0;M<q;M++){ac[M].show(true);if(av.markerIndex&&aj.previousPath){aj.onAnimate(ac[M],{to:{path:S},from:{path:ad}})}else{aj.onAnimate(ac[M],{to:{path:S}})}}}if(z){aj.fillPath.show(true);aj.onAnimate(aj.fillPath,{to:Ext.apply({},{path:b,fill:al.fill||ah[ax%P],"stroke-width":0},al||{})})}if(J){g=0;for(N=0;N<au;N++){if(aj.items[N]){m=aB.getAt(g++);if(m){ae=aj.getRenderer()(m,ap.getAt(N),m._to,N,ap);aj.onAnimate(m,{to:Ext.apply(ae||{},ao||{})});m.show(true)}}}for(;g<V;g++){m=aB.getAt(g);m.hide(true)}}}else{ae=aj.getRenderer()(aj.line,false,{path:S,hidden:false},N,ap);Ext.apply(ae,al||{},{stroke:al.stroke||al.fill});delete ae.fill;aj.line.setAttributes(ae,true);if(C){ac=aj.line.shadows;for(M=0;M<q;M++){ac[M].setAttributes({path:S,hidden:false},true)}}if(aj.getFill()){aj.fillPath.setAttributes({path:b,hidden:false},true)}if(J){g=0;for(N=0;N<au;N++){if(aj.items[N]){m=aB.getAt(g++);if(m){ae=aj.getRenderer()(m,ap.getAt(N),m._to,N,ap);m.setAttributes(Ext.apply(ae,ao||{}),true);if(!m.attr.hidden){m.show(true)}}}}for(;g<V;g++){m=aB.getAt(g);m.hide(true)}}}if(av.markerIndex){S.splice(1,0,S[1],S[2]);aj.previousPath=S}aj.renderLabels();aj.renderCallouts();aj.fireEvent("draw",aj)},onCreateLabel:function(d,j,c,e){var f=this,g=f.labelsGroup,a=f.label,h=f.bbox,b=Ext.apply(a,f.labelStyle.style);return f.getSurface().add(Ext.apply({type:"text","text-anchor":"middle",group:g,x:j.point[0],y:h.y+h.height/2,zIndex:40},b||{}))},onPlaceLabel:function(f,j,t,q,o,d){var v=this,k=v.getChart(),s=k.resizing,u=v.label,r=u.renderer,b=u.field,a=v.bbox,h=+t.point[0],g=+t.point[1],c=t.sprite.attr.radius,e,n,m;f.setAttributes({text:r(j.get(b)),hidden:true},true);if(o=="rotate"){f.setAttributes({"text-anchor":"start",rotation:{x:h,y:g,degrees:-45}},true);e=f.getBBox();n=e.width;m=e.height;h=h<a.x?a.x:h;h=(h+n>a.x+a.width)?(h-(h+n-a.x-a.width)):h;g=(g-m<a.y)?a.y+m:g}else{if(o=="under"||o=="over"){e=t.sprite.getBBox();e.width=e.width||(c*2);e.height=e.height||(c*2);g=g+(o=="over"?-e.height:e.height);e=f.getBBox();n=e.width/2;m=e.height/2;h=h-n<a.x?a.x+n:h;h=(h+n>a.x+a.width)?(h-(h+n-a.x-a.width)):h;g=g-m<a.y?a.y+m:g;g=(g+m>a.y+a.height)?(g-(g+m-a.y-a.height)):g}}if(v.getChart().getAnimate()){f.show(true);v.onAnimate(f,{to:{x:h,y:g}})}else{f.setAttributes({x:h,y:g},true);f.show(true)}},highlightItem:function(f){var e=this,c=e.line,b,d,a;Ext.chart.series.Line.superclass.highlightItem.call(e,f);if(c&&!e.highlighted){if(!("__strokeWidth" in c)){c.__strokeWidth=c.attr["stroke-width"]||0}if(c.__anim){c.__anim.paused=true}if(c.__anim){c.__anim.stop()}else{c.__anim=new Ext.fx.Sprite({sprite:c})}c.__anim.start({"stroke-width":parseFloat(c.__strokeWidth)*2});e.highlighted=true}if(!e.getShowMarkers()){b=e.highlightMarker;if(!b){d=Ext.apply({},e.markerStyle.style,e.getMarkerConfig());a=d.type;delete d.type;b=e.highlightMarker=Ext.chart.Shape[a](e.getSurface(),Ext.apply({x:0,y:0},d))}b.setAttributes({translate:{x:f.point[0],y:f.point[1]},hidden:false},true)}},unHighlightItem:function(d){var c=this,b=c.line,a=c.highlightMarker;Ext.chart.series.Line.superclass.unHighlightItem.call(c,d);if(b&&c.highlighted){if(b.__anim){b.__anim.stop()}else{b.__anim=new Ext.fx.Sprite({sprite:b})}b.__anim.start({"stroke-width":b.__strokeWidth});c.highlighted=false}if(a){a.hide(true)}},onPlaceCallout:function(m,r,G,E,D,d,j){if(!D){return}var J=this,s=J.getChart(),I=J.callouts,t=J.items,v=E===0?false:t[E-1].point,z=(E==t.length-1)?false:t[E+1].point,c=[+G.point[0],+G.point[1]],A,f,K,H,o,q,F=I.offsetFromViz||30,B=I.offsetBox||3,g,e,h,w,u,C=J.clipRect,b={width:I.styles.width||10,height:I.styles.height||10},n,k;if(!v){v=c}if(!z){z=c}H=(z[1]-v[1])/(z[0]-v[0]);o=(c[1]-v[1])/(c[0]-v[0]);q=(z[1]-c[1])/(z[0]-c[0]);f=Math.sqrt(1+H*H);A=[1/f,H/f];K=[-A[1],A[0]];if(o>0&&q<0&&K[1]<0||o<0&&q>0&&K[1]>0){K[0]*=-1;K[1]*=-1}else{if(Math.abs(o)<Math.abs(q)&&K[0]<0||Math.abs(o)>Math.abs(q)&&K[0]>0){K[0]*=-1;K[1]*=-1}}n=c[0]+K[0]*F;k=c[1]+K[1]*F;g=n+(K[0]>0?0:-(b.width+2*B));e=k-b.height/2-B;h=b.width+2*B;w=b.height+2*B;if(g<C[0]||(g+h)>(C[0]+C[2])){K[0]*=-1}if(e<C[1]||(e+w)>(C[1]+C[3])){K[1]*=-1}n=c[0]+K[0]*F;k=c[1]+K[1]*F;g=n+(K[0]>0?0:-(b.width+2*B));e=k-b.height/2-B;h=b.width+2*B;w=b.height+2*B;if(s.getAnimate()){J.onAnimate(m.lines,{to:{path:["M",c[0],c[1],"L",n,k,"Z"]}});if(m.panel){m.panel.setPosition(g,e,true)}}else{m.lines.setAttributes({path:["M",c[0],c[1],"L",n,k,"Z"]},true);if(m.panel){m.panel.setPosition(g,e)}}for(u in m){m[u].show(true)}},isItemInPoint:function(j,g,n,a){var d=this,b=d.items,e=d.getSelectionTolerance(),k,h,f,c,m=Math.sqrt;k=n.point;h=j-k[0];f=g-k[1];c=m(h*h+f*f);if(c<=e){if(a>0&&b[a-1]){k=b[a-1].point;h=j-k[0];f=g-k[1];if(m(h*h+f*f)<c){return false}}if(b[a+1]){k=b[a+1].point;h=j-k[0];f=g-k[1];if(m(h*h+f*f)<c){return false}}return true}return false},toggleAll:function(a){var e=this,b,d,f,c;if(!a){Ext.chart.series.Line.superclass.hideAll.call(e)}else{Ext.chart.series.Line.superclass.showAll.call(e)}if(e.line){e.line.setAttributes({hidden:!a},true);if(e.line.shadows){for(b=0,c=e.line.shadows,d=c.length;b<d;b++){f=c[b];f.setAttributes({hidden:!a},true)}}}if(e.fillPath){e.fillPath.setAttributes({hidden:!a},true)}},hideAll:function(){this.toggleAll(false)},showAll:function(){this.toggleAll(true)},getLegendColor:function(a){var b=this,d,c;if(b.style){d=b.style.fill;c=b.style.stroke;if(b.getFill()&&d&&d!="none"){return b.getColorFromStyle(d)}return b.getColorFromStyle(c||d)}return"#000"}});Ext.define("Ext.chart.series.Pie",{extend:"Ext.chart.series.Series",type:"pie",rad:Math.PI/180,config:{rotation:0,field:false,lengthField:false,donut:false,showInLegend:false,labelOverflowPadding:20,colorSet:null,highlightCfg:{segment:{margin:20}}},constructor:function(c){this.callParent(arguments);var f=this,e=f.getChart(),a=f.getSurface(),g=e.getShadow(),d,b;f.group=a.getGroup(f.seriesId);a.addCustomAttribute("segment",function(h){return f.getSegment(h)});f.addListener("labelOverflow",f.onLabelOverflow)},onLabelOverflow:function(a){a.hide(true)},getSegment:function(b){var D=this,C=D.rad,d=Math.cos,a=Math.sin,n=Math.abs,k=D.centerX,h=D.centerY,z=0,w=0,v=0,t=0,g=0,f=0,e=0,c=0,A=0.01,s=b.startAngle,r=b.endAngle,j=(s+r)/2*C,m=b.margin||0,u=n(r-s)>180,E=Math.min(s,r)*C,B=Math.max(s,r)*C,o=false,q=false;k+=m*d(j);h+=m*a(j);z=k+b.startRho*d(E);g=h+b.startRho*a(E);w=k+b.endRho*d(E);f=h+b.endRho*a(E);v=k+b.startRho*d(B);e=h+b.startRho*a(B);t=k+b.endRho*d(B);c=h+b.endRho*a(B);if(n(z-v)<=A&&n(g-e)<=A){o=true}q=o&&(n(w-t)<=A&&n(f-c)<=A);if(n(r-s)<A){return{path:["M",k,h]}}if(q){return{path:[["M",k+b.endRho,h-0.0001],["A",b.endRho,b.endRho,0,1,0,k+b.endRho,h],["Z"]]}}else{if(o){return{path:[["M",z,g],["L",w,f],["A",b.endRho,b.endRho,0,+u,1,t,c],["Z"]]}}else{return{path:[["M",z,g],["L",w,f],["A",b.endRho,b.endRho,0,+u,1,t,c],["L",t,c],["L",v,e],["A",b.startRho,b.startRho,0,+u,0,z,g],["Z"]]}}}},calcMiddle:function(o){var h=this,j=h.rad,n=o.slice,m=h.centerX,k=h.centerY,g=n.startAngle,e=n.endAngle,b=Math.min(g,e)*j,a=Math.max(g,e)*j,d=-(b+(a-b)/2),f=m+(o.endRho+o.startRho+o.margin)/2*Math.cos(d),c=k-(o.endRho+o.startRho+o.margin)/2*Math.sin(d);o.middle={x:f,y:c}},drawSeries:function(){var r=this,a=r.getChart().substore||r.getChart().getStore(),x=r.group,T=r.getChart().getAnimate(),g=r.getField()||r.field||r.getXField(),B=[].concat(r.getLengthField()),S=0,X=r.getChart(),J=r.getSurface(),H=X.chartBBox,e=X.getShadow(),R=r.shadowGroups,Q=r.getShadowAttributes(),aa=R.length,K=B.length,C=0,b=+r.getDonut(),Z=[],z=[],u=0,N=0,t=r.getRotation(),f=r.style,M=r.getChart().getColorsStyle(),w=M&&M.length||0,n,Y,D,I,F,d,c,o,h=0,q,m,A,L,E,ab,G,V,U,W,s,O,P,k,v;if(r.fireEvent("beforedraw",r)===false){return}r.updateSurfaceBox();r.setBBox();v=r.bbox;if(r.getColorSet()){M=r.getColorSet();w=M.length}r.unHighlightItem();r.cleanHighlights();d=r.centerX=H.x+(H.width/2);c=r.centerY=H.y+(H.height/2);r.radius=Math.min(d-H.x,c-H.y);r.slices=m=[];r.items=z=[];r.eachRecord(function(j,ac){if(r.isExcluded(ac)){return}u+=+j.get(g);if(B[0]){for(U=0,S=0;U<K;U++){S+=+j.get(B[U])}Z[ac]=S;N=Math.max(N,S)}},this);u=u||1;r.eachRecord(function(j,ac){if(r.isExcluded(ac)){m[ac]={series:r,value:false,startAngle:t,endAngle:t,rho:r.radius,storeItem:j};return}L=j.get(g);s=t-360*L/u/2;if(isNaN(s)){s=360;L=1;u=1}if(!ac||h===0){t=360-s;r.firstAngle=t;s=t-360*L/u/2;for(U=0;U<ac;U++){m[U].startAngle=m[U].endAngle=t}}W=t-360*L/u;q={series:r,value:L,startAngle:t,endAngle:W,storeItem:j};if(B[0]){ab=Z[ac];q.rho=r.radius*(ab/N)}else{q.rho=r.radius}m[ac]=q;t=W;h++},r);if(e){for(V=0,G=m.length;V<G;V++){q=m[V];q.shadowAttrs=[];for(U=0,C=0,D=[];U<K;U++){A=x.getAt(V*K+U);o=B[U]?a.getAt(V).get(B[U])/Z[V]*q.rho:q.rho;n={segment:{startAngle:q.startAngle,endAngle:q.endAngle,margin:0,rho:q.rho,startRho:C+(o*b/100),endRho:C+o},hidden:!q.value&&(q.startAngle%360)==(q.endAngle%360)};for(F=0,D=[];F<aa;F++){Y=Q[F];I=R[F].getAt(V);if(!I){I=r.getSurface().add(Ext.apply({},{type:"path",group:R[F],strokeLinejoin:"round"},n,Y))}if(T){Y=r.getRenderer()(I,a.getAt(V),Ext.apply({},n,Y),V,a);r.onAnimate(I,{to:Y})}else{Y=r.getRenderer()(I,a.getAt(V),Ext.apply(Y,{hidden:false}),V,a);I.setAttributes(Y,true)}D.push(I)}q.shadowAttrs[U]=D}}}for(V=0,G=m.length;V<G;V++){q=m[V];for(U=0,C=0;U<K;U++){A=x.getAt(V*K+U);o=B[U]?a.getAt(V).get(B[U])/Z[V]*q.rho:q.rho;n=Ext.apply({segment:{startAngle:q.startAngle,endAngle:q.endAngle,margin:0,rho:q.rho,startRho:C+(o*b/100),endRho:C+o},hidden:!q.value&&(q.startAngle%360)==(q.endAngle%360)},Ext.apply(f,M&&{fill:M[(K>1?U:V)%w]}||{}));E=Ext.apply({},n.segment,{slice:q,series:r,storeItem:q.storeItem,index:V});r.calcMiddle(E);if(e){E.shadows=q.shadowAttrs[U]}z[V]=E;if(!A){k=Ext.apply({type:"path",group:x,middle:E.middle},Ext.apply(f,M&&{fill:M[(K>1?U:V)%w]}||{}));if(e){Ext.apply(k,r.getShadowOptions())}A=J.add(Ext.apply(k,n))}q.sprite=q.sprite||[];E.sprite=A;q.sprite.push(A);q.point=[E.middle.x,E.middle.y];n=r.getRenderer()(A,a.getAt(V),n,V,a);if(T){r.onAnimate(A,{to:n})}else{A.setAttributes(n,true)}C+=o}}G=x.getCount();for(V=0;V<G;V++){if(!m[(V/K)>>0]&&x.getAt(V)){x.getAt(V).hide(true)}}if(e){aa=R.length;for(F=0;F<G;F++){if(!m[(F/K)>>0]){for(U=0;U<aa;U++){if(R[U].getAt(F)){R[U].getAt(F).hide(true)}}}}}r.renderLabels();r.renderCallouts();r.fireEvent("draw",r)},onCreateLabel:function(e,d){var c=this,f=c.labelsGroup,b=c.label,a=d.middle,g=Ext.apply(c.labelStyle.style||{},b||{});return c.getSurface().add(Ext.apply({type:"text","text-anchor":"middle",group:f,x:a.x,y:a.y,zIndex:100},g))},onPlaceLabel:function(k,r,B,v,u,e,f){var D=this,s=D.getChart(),A=s.resizing,C=D.label,w=C.renderer,c=[].concat(C.field),n=D.centerX,m=D.centerY,E=B.middle,b={x:E.x,y:E.y},q=E.x-n,o=E.y-m,t={},d=1,j=Math.atan2(o,q||1),z=j*180/Math.PI,h,g;function a(x){if(x<0){x+=360}return x%360}k.setAttributes({text:w(r.get(c[f]))},true);switch(u){case"outside":d=Math.sqrt(q*q+o*o)*2;b.x=d*Math.cos(j)+n;b.y=d*Math.sin(j)+m;break;case"rotate":z=a(z);z=(z>90&&z<270)?z+180:z;h=k.attr.rotation.degrees;if(h!=null&&Math.abs(h-z)>180){if(z>h){z-=360}else{z+=360}z=z%360}else{z=a(z)}b.rotate={degrees:z,x:b.x,y:b.y};break;default:break}b.translate={x:0,y:0};if(e&&!A&&(u!="rotate"||h!==null)){D.onAnimate(k,Ext.apply({to:b},e))}else{k.setAttributes(b,true)}g=D.sliceContainsLabel(B.slice,k);if(!g){D.fireEvent("labelOverflow",k,B)}},onCreateCallout:function(){var b=this,a;a=Ext.chart.series.Pie.superclass.onCreateCallout.apply(this,arguments);a.lines.setAttributes({path:["M",b.centerX,b.centerY]});a.box.setAttributes({x:b.centerX,y:b.centerY});a.label.setAttributes({x:b.centerX,y:b.centerY});return a},onPlaceCallout:function(m,r,z){var A=this,s=A.getChart(),j=A.centerX,h=A.centerY,B=z.middle,c={x:B.x,y:B.y},n=B.x-j,k=B.y-h,d=1,q,f=Math.atan2(k,n||1),g=m.label,o=m.box,b=m.lines,e=b.attr,a=g.getBBox(),w=e.offsetFromViz||20,v=e.offsetToSide||10,u=o.attr.offsetBox||10,t;d=z.endRho+w;q=(z.endRho+z.startRho)/2+(z.endRho-z.startRho)/3;c.x=d*Math.cos(f)+j;c.y=d*Math.sin(f)+h;n=q*Math.cos(f);k=q*Math.sin(f);if(s.getAnimate()){A.onAnimate(m.lines,{to:{path:["M",n+j,k+h,"L",c.x,c.y,"Z","M",c.x,c.y,"l",n>0?v:-v,0,"z"]}});A.onAnimate(m.box,{to:{x:c.x+(n>0?v:-(v+a.width+2*u)),y:c.y+(k>0?(-a.height-u/2):(-a.height-u/2)),width:a.width+2*u,height:a.height+2*u}});A.onAnimate(m.label,{to:{x:c.x+(n>0?(v+u):-(v+a.width+u)),y:c.y+(k>0?-a.height/4:-a.height/4)}})}else{m.lines.setAttributes({path:["M",n+j,k+h,"L",c.x,c.y,"Z","M",c.x,c.y,"l",n>0?v:-v,0,"z"]},true);m.box.setAttributes({x:c.x+(n>0?v:-(v+a.width+2*u)),y:c.y+(k>0?(-a.height-u/2):(-a.height-u/2)),width:a.width+2*u,height:a.height+2*u},true);m.label.setAttributes({x:c.x+(n>0?(v+u):-(v+a.width+u)),y:c.y+(k>0?-a.height/4:-a.height/4)},true)}for(t in m){m[t].show(true)}},onAnimate:function(b,a){b.show();return Ext.chart.series.Pie.superclass.onAnimate.apply(this,arguments)},isItemInPoint:function(j,g,n){var f=this,k=f.getChart().chartBBox,d=f.centerX-k.x,c=f.centerY-k.y,q=Math.abs,o=q(j-d),m=q(g-c),e=n.startAngle,a=n.endAngle,h=Math.sqrt(o*o+m*m),b=Math.atan2(g-c,j-d)/f.rad;while(b<a){b+=360}while(b>e){b-=360}return(b<=e&&b>a&&h>=n.startRho&&h<=n.endRho)},getItemForAngle:function(d){var c=this,a=c.items,b=a.length;while(b--){if(a[b]&&c.isAngleInItem(d,a[b])){return a[b]}}},isAngleInItem:function(d,c){var b=c.startAngle,a=c.endAngle;while(d<a){d+=360}while(d>b){d-=360}return(d<=b&&d>a)},sliceContainsLabel:function(h,f){var e=this,m=Math.PI,c=h.startAngle,b=h.endAngle,a=Math.abs(b-c)*m/180,k=f.getBBox(true),d=e.radius,j=k.height+(e.getLabelOverflowPadding()||0),g;if(a>=m){return true}g=Math.abs(Math.tan(a/2))*d*2;return g>=j},getLegendLabels:function(){var b=this,a=b.label.field,c=[];if(a){b.eachRecord(function(d){c.push(d.get(a))})}return c},getLegendColor:function(b){var d=this,c=d.getColorSet(),a=d.getChart().getColorsStyle();return d.getColorFromStyle((c&&c[b%c.length])||a[b%a.length])},eachRecord:function(g,j){var e=this,h=e.getChart().substore||e.getChart().getStore(),f=e.combinations,d=e.label.field,a=e.getField(),b=[].concat(e.getLengthField()),c;if(f){c=h.data.clone();Ext.each(f,function(o){var m=c.getAt(o[0]),k=c.getAt(o[1]),n={};n[d]=m.get(d)+" & "+k.get(d);n[a]=+m.get(a)+k.get(a);if(b[0]){Ext.each(b,function(q){n[q]=+m.get(q)+k.get(q)})}c.insert(o[1],Ext.ModelMgr.create(n,h.model));c.remove(m);c.remove(k)});c.each(g,j)}else{h.each(g,j)}},getRecordCount:function(){var b=this,a=b.combinations;return Ext.chart.series.Pie.superclass.getRecordCount.call(b)-(a?a.length:0)},updateSurfaceBox:function(){var f=this,b=f.getSurface(),c=f.getOverlaySurface(),e=f.getChart(),d=e.getWidth()||e.element.getWidth(),a=e.getHeight()||e.element.getHeight();b.element.setTop(0);b.element.setLeft(0);b.setSize(d,a);c.element.setTop(0);c.element.setLeft(0);c.setSize(d,a)},reset:function(){this.setRotation(0);Ext.chart.series.Pie.superclass.reset.call(this)},highlightItem:function(e){this.callParent(arguments);if(this.getHighlight()){var d=this,b=Ext.merge({},d.highlightStyle.style,d.getHighlightCfg());e.margin=b.segment.margin;var c=this.getChart(),a=d.getChart().getAnimate();if(a){if(a!==true){c.setAnimate(Ext.apply(Ext.Object.chain(a),{duration:d.getHighlightDuration()}))}else{c.setAnimate({duration:d.getHighlightDuration()})}}d.calcMiddle(e);d.renderLabels();if(a){if(a!==true){c.setAnimate(a)}}}},unHighlightItem:function(d){var c=this;if(!d){if(this.highlightedItem){d=this.highlightedItem}else{return}}c.callParent(arguments);if(c.getHighlight()){d.margin=d.sprite.originalAttr.segment.margin;var b=this.getChart(),a=b.getAnimate();if(a){if(a!==true){b.setAnimate(Ext.apply(Ext.Object.chain(a),{duration:c.getHighlightDuration()}))}else{b.setAnimate({duration:c.getHighlightDuration()})}}c.calcMiddle(d);c.renderLabels();if(a){if(a!==true){b.setAnimate(a)}}}}});Ext.define("Ext.chart.series.Radar",{extend:"Ext.chart.series.Series",type:"radar",rad:Math.PI/180,config:{rotation:0,showMarkers:null,showInLegend:false,markerConfig:null,xField:null,yField:null},constructor:function(b){this.callParent(arguments);var c=this,a=c.getSurface();c.group=a.getGroup(c.seriesId);if(c.getShowMarkers()){c.markerGroup=a.getGroup(c.seriesId+"-markers")}},drawSeries:function(){var F=this,j=F.group,s=F.getChart(),c=F.field||F.getYField(),w=F.getSurface(),q=s.chartBBox,m,k,t,g,D=0,v=[],B=Math.max,e=Math.cos,a=Math.sin,A=-F.getRotation(),G=Ext.draw.Draw.rad,C,z=F.getRecordCount(),E,u,o,n,d,b,h=F.style,f=s.getAxes()&&s.getAxes().get(0),r=!(f&&f.getMaximum());if(F.fireEvent("beforedraw",F)===false){return}this.callParent();F.setBBox();D=r?0:(f.getMaximum()||0);if(!z||F.seriesIsHidden){w.getItems().hide(true);return}F.unHighlightItem();F.cleanHighlights();m=F.centerX=(q.width/2);k=F.centerY=(q.height/2);F.radius=g=Math.min(q.width,q.height)/2;F.items=t=[];if(r){s.getSeries().each(function(x){v.push(x.getYField())});F.eachRecord(function(x,H){for(H=0,b=v.length;H<b;H++){D=B(+x.get(v[H]),D)}})}D=D||1;E=[];u=[];F.eachRecord(function(x,H){d=g*x.get(c)/D;C=G(H/z*360);o=d*e(C);n=d*a(C);if(H==0){u.push("M",o+m,n+k);E.push("M",0.01*o+m,0.01*n+k)}else{u.push("L",o+m,n+k);E.push("L",0.01*o+m,0.01*n+k)}t.push({sprite:false,point:[m+o,k+n],series:F})});u.push("Z");if(!F.radar){F.radar=w.add(Ext.apply({type:"path",group:j,path:E},h||{}))}if(s.resizing){F.radar.setAttributes({path:E},true)}F.radar.show(true);if(s.getAnimate()){F.onAnimate(F.radar,{to:Ext.apply({path:u},h||{})})}else{F.radar.setAttributes(Ext.apply({path:u},h||{}),true)}F.radar.setAttributes({rotate:{degrees:A,x:m,y:k}});if(F.getShowMarkers()){F.drawMarkers()}F.renderLabels();F.renderCallouts();F.fireEvent("draw",F)},drawMarkers:function(){var m=this,j=m.getChart(),a=m.getSurface(),b=Ext.apply({},m.markerStyle.style||{}),h=Ext.apply(b,m.getMarkerConfig()),k=m.items,n=h.type,q=m.markerGroup,e=m.centerX,d=m.centerY,o,g,c,f;delete h.type;for(g=0,c=k.length;g<c;g++){o=k[g];f=q.getAt(g);if(!f){f=Ext.chart.Shape[n](a,Ext.apply({group:q,x:0,y:0,translate:{x:e,y:d}},h))}else{f.show()}if(j.resizing){f.setAttributes({x:0,y:0,translate:{x:e,y:d}},true)}f._to={translate:{x:o.point[0],y:o.point[1]}};if(j.getAnimate()){m.onAnimate(f,{to:f._to})}else{f.setAttributes(Ext.apply(f._to,h||{}),true)}}},isItemInPoint:function(c,f,e){var b,d=10,a=Math.abs;b=e.point;return(a(b[0]-c)<=d&&a(b[1]-f)<=d)},onCreateLabel:function(e,d){var c=this,h=c.labelsGroup,a=c.label,g=c.centerX,f=c.centerY,b=-c.getRotation();return c.getSurface().add(Ext.apply({type:"text","text-anchor":"middle",group:h,x:g,y:f,rotate:{degrees:b,x:g,y:f}},a||{}))},onPlaceLabel:function(o,g,s,f,j,b){var m=this,k=m.getChart(),h=k.resizing,c=m.label,q=c.renderer,n=c.field,e=m.centerX,d=m.centerY,r=-m.getRotation(),a=Ext.draw.Draw.rotate(s.point[0]-e,s.point[1]-d,Ext.draw.Draw.rad(r));a.x+=e;a.y+=d;o.setAttributes({text:q(g.get(n)),hidden:true},true);if(h){o.setAttributes({x:e,y:d},true)}if(b){o.show(true);m.onAnimate(o,{to:a})}else{o.setAttributes(a,true);o.show(true)}},toggleAll:function(a){var e=this,b,d,f,c;if(!a){e.superclass.hideAll.call(e)}else{e.superclass.showAll.call(e)}if(e.radar){e.radar.setAttributes({hidden:!a},true);if(e.radar.shadows){for(b=0,c=e.radar.shadows,d=c.length;b<d;b++){f=c[b];f.setAttributes({hidden:!a},true)}}}},hideAll:function(){this.toggleAll(false);this.hideMarkers(0)},showAll:function(){this.toggleAll(true)},hideMarkers:function(a){var d=this,c=d.markerGroup&&d.markerGroup.getCount()||0,b=a||0;for(;b<c;b++){d.markerGroup.getAt(b).hide(true)}},getLegendLabels:function(){var a=this.title||this.getYField();return a?[a]:[]},reset:function(){this.setRotation(0);this.callParent()}});Ext.define("Ext.chart.series.Scatter",{extend:"Ext.chart.series.Cartesian",uses:["Ext.chart.Shape"],type:"scatter",config:{showMarkers:true,markerConfig:{}},constructor:function(b){this.callParent(arguments);var c=this,a=c.getSurface();c.group=a.getGroup(c.seriesId)},getBounds:function(){var o=this,n=o.getChart(),j=o.getRecordCount(),t=o.getAxesForXAndYFields(),k=t.xAxis,h=t.yAxis,s,r,c,m,f,e,b,a,g,d,q;o.setBBox();s=o.bbox;q=n.getAxes().get(k).calcEnds();f=q.from;b=q.to;q=n.getAxes().get(h).calcEnds();e=q.from;a=q.to;if(isNaN(f)){f=0;b=j-1;r=s.width/(j-1)}else{r=s.width/(b-f)}if(isNaN(e)){e=0;a=j-1;c=s.height/(j-1)}else{c=s.height/(a-e)}return{bbox:s,minX:f,minY:e,xScale:r,yScale:c}},getPaths:function(){var z=this,k=z.getChart(),t=k.getAxes(),b=k.getShadow(),g=z.group,e=z.bounds=z.getBounds(),a=z.bbox,B=e.xScale,c=e.yScale,v=e.minX,u=e.minY,r=z.getAxesForXAndYFields(),o=r.xAxis,d=r.yAxis,A=a.x,w=a.y,f=a.height,n=[],j,h,q,s,m;z.items=[];z.eachRecord(function(x,C){q=x.get(z.getXField());s=x.get(z.getYField());if(typeof s=="undefined"||(typeof s=="string"&&!s)){return}if(typeof q=="string"||typeof q=="object"||o&&t.get(o).type=="category"){q=C}if(typeof s=="string"||typeof s=="object"||d&&t.get(d).type=="category"){s=C}j=A+(q-v)*B;h=w+f-(s-u)*c;n.push({x:j,y:h});z.items.push({series:z,value:[q,s],point:[j,h],storeItem:x})});return n},createPoint:function(a,b){var c=this,d=c.group,e=c.bbox;return Ext.chart.Shape[b](c.getSurface(),Ext.apply({},{x:0,y:0,group:d,translate:{x:(e.x+e.width)/2,y:(e.y+e.height)/2}},a))},createShadow:function(m,f,h){var g=this,j=g.shadowGroups,d=g.getShadowAttributes(),a=j.length,n=g.bbox,c,k,b,e;m.shadows=b=[];for(c=0;c<a;c++){e=Ext.apply({},d[c]);if(e.translate){e.translate.x+=(n.x+n.width)/2;e.translate.y+=(n.y+n.height)/2}else{Ext.apply(e,{translate:{x:(n.x+n.width)/2,y:(n.y+n.height)/2}})}Ext.apply(e,f);k=Ext.chart.Shape[h](g.getSurface(),Ext.apply({},{x:0,y:0,group:j[c]},e));b.push(k)}},drawSeries:function(){var v=this,k=v.getChart(),g=k.substore||k.getStore(),h=v.group,c=k.getShadow(),a=v.shadowGroups,r=v.getShadowAttributes(),s=a.length,m,n,o,j,q,u,e,f,b,d,t;if(v.fireEvent("beforedraw",v)===false){return}Ext.chart.series.Scatter.superclass.drawSeries.call(this);u=Ext.apply(v.markerStyle.style||{},v.getMarkerConfig());f=u.type;delete u.type;if(!v.getRecordCount()||v.seriesIsHidden){v.getSurface().getItems().hide(true);return}v.unHighlightItem();v.cleanHighlights();n=v.getPaths();j=n.length;for(q=0;q<j;q++){o=n[q];m=h.getAt(q);o=Ext.apply({translate:{x:o.x,y:o.y}},u);if(!m){m=v.createPoint(o,f);if(c){v.createShadow(m,u,f);m.setAttributes(v.getShadowOptions(),true)}}b=m.shadows;if(k.getAnimate()){d=v.getRenderer()(m,g.getAt(q),o,q,g);v.onAnimate(m,{to:d});for(e=0;e<s;e++){t=Ext.apply({},r[e]);d=v.getRenderer()(b[e],g.getAt(q),Ext.apply({},{translate:{x:o.x+(t.translate?t.translate.x:0),y:o.y+(t.translate?t.translate.y:0)}},t),q,g);v.onAnimate(b[e],{to:d})}}else{d=v.getRenderer()(m,g.getAt(q),o,q,g);m._to=d;m.setAttributes(d,true);for(e=0;e<s;e++){t=Ext.apply({},r[e]);d=v.getRenderer()(b[e],g.getAt(q),Ext.apply({},{translate:{x:o.x+(t.translate?t.translate.x:0),y:o.y+(t.translate?t.translate.y:0)}},t),q,g);b[e].setAttributes(d,true)}}v.items[q].sprite=m}j=h.getCount();for(q=n.length;q<j;q++){h.getAt(q).hide(true)}v.renderLabels();v.renderCallouts();v.fireEvent("draw",v)},onCreateLabel:function(d,j,c,e){var f=this,g=f.labelsGroup,a=f.label,b=Ext.apply({},a,f.labelStyle.style||{}),h=f.bbox;return f.getSurface().add(Ext.apply({type:"text",group:g,x:j.point[0],y:h.y+h.height/2},b))},onPlaceLabel:function(f,j,u,r,q,d){var w=this,k=w.getChart(),t=k.resizing,v=w.label,s=v.renderer,b=v.field,a=w.bbox,h=u.point[0],g=u.point[1],c=u.sprite.attr.radius,e,n,m,o;f.setAttributes({text:s(j.get(b)),hidden:true},true);if(q=="rotate"){f.setAttributes({"text-anchor":"start",rotation:{x:h,y:g,degrees:-45}},true);e=f.getBBox();n=e.width;m=e.height;h=h<a.x?a.x:h;h=(h+n>a.x+a.width)?(h-(h+n-a.x-a.width)):h;g=(g-m<a.y)?a.y+m:g}else{if(q=="under"||q=="over"){e=u.sprite.getBBox();e.width=e.width||(c*2);e.height=e.height||(c*2);g=g+(q=="over"?-e.height:e.height);e=f.getBBox();n=e.width/2;m=e.height/2;h=h-n<a.x?a.x+n:h;h=(h+n>a.x+a.width)?(h-(h+n-a.x-a.width)):h;g=g-m<a.y?a.y+m:g;g=(g+m>a.y+a.height)?(g-(g+m-a.y-a.height)):g}}if(!k.getAnimate()){f.setAttributes({x:h,y:g},true);f.show(true)}else{if(t){o=u.sprite.getActiveAnimation();if(o){o.on("afteranimate",function(){f.setAttributes({x:h,y:g},true);f.show(true)})}else{f.show(true)}}else{w.onAnimate(f,{to:{x:h,y:g}})}}},onPlaceCallout:function(j,m,v,u,t,c,g){var z=this,n=z.getChart(),b=v.point,A,a=j.label.getBBox(),w=30,r=3,e,d,f,q,o,s=z.bbox,k,h;A=[Math.cos(Math.PI/4),-Math.sin(Math.PI/4)];k=b[0]+A[0]*w;h=b[1]+A[1]*w;e=k+(A[0]>0?0:-(a.width+2*r));d=h-a.height/2-r;f=a.width+2*r;q=a.height+2*r;if(e<s[0]||(e+f)>(s[0]+s[2])){A[0]*=-1}if(d<s[1]||(d+q)>(s[1]+s[3])){A[1]*=-1}k=b[0]+A[0]*w;h=b[1]+A[1]*w;e=k+(A[0]>0?0:-(a.width+2*r));d=h-a.height/2-r;f=a.width+2*r;q=a.height+2*r;if(n.getAnimate()){z.onAnimate(j.lines,{to:{path:["M",b[0],b[1],"L",k,h,"Z"]}},true);z.onAnimate(j.box,{to:{x:e,y:d,width:f,height:q}},true);z.onAnimate(j.label,{to:{x:k+(A[0]>0?r:-(a.width+r)),y:h}},true)}else{j.lines.setAttributes({path:["M",b[0],b[1],"L",k,h,"Z"]},true);j.box.setAttributes({x:e,y:d,width:f,height:q},true);j.label.setAttributes({x:k+(A[0]>0?r:-(a.width+r)),y:h},true)}for(o in j){j[o].show(true)}},onAnimate:function(b,a){b.show();Ext.chart.series.Scatter.superclass.onAnimate.apply(this,arguments)},isItemInPoint:function(b,e,d){var a,c=10;a=d.point;return(a[0]-c<=b&&a[0]+c>=b&&a[1]-c<=e&&a[1]+c>=e)}});Ext.define("Ext.chart.series.Area",{extend:"Ext.chart.series.Cartesian",config:{highlightCfg:{lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"}},type:"area",stacked:true,constructor:function(b){this.callParent(arguments);var d=this,c,a;if(d.getHighlight()){d.highlightMark=d.getSurface().add({type:"path",path:["M",0,0],zIndex:1000,opacity:0.3,lineWidth:5,hidden:true,stroke:"#444"})}},shrink:function(b,n,o){var h=b.length,m=Math.floor(h/o),g,f,d=0,k=this.areas.length,a=[],e=[],c=[];for(f=0;f<k;++f){a[f]=0}for(g=0;g<h;++g){d+=b[g];for(f=0;f<k;++f){a[f]+=n[g][f]}if(g%m==0){e.push(d/m);for(f=0;f<k;++f){a[f]/=m}c.push(a);d=0;for(f=0,a=[];f<k;++f){a[f]=0}}}return{x:e,y:c}},getBounds:function(){var u=this,h=u.getChart(),m=[],o=[],v=Infinity,s=v,r=-v,q,n,d=Math,t=d.min,x=d.max,a,w,c,f,e,b,k,j;u.setBBox();a=u.bbox;if(u.axis){b=h.getAxes().get(u.axis);if(b){k=b.calcEnds();q=k.from;n=k.to}}if(u.getYField()&&!Ext.isNumber(q)){b=new Ext.chart.axis.Numeric({chart:h,fields:[].concat(u.getYField())});k=b.calcEnds();q=k.from;n=k.to}if(!Ext.isNumber(q)){q=0}if(!Ext.isNumber(n)){n=0}function g(z){if(typeof z=="number"){j.push(z)}}u.eachRecord(function(z,A){var B=z.get(u.getXField());if(typeof B!="number"){B=A}m.push(B);j=[];u.eachYValue(z,g);s=d.min(s,B);r=d.max(r,B);o.push(j)});w=a.width/((r-s)||1);c=a.height/((n-q)||1);f=m.length;if((f>a.width)&&u.areas){e=u.shrink(m,o,a.width);m=e.x;o=e.y}return{bbox:a,minX:s,minY:q,xValues:m,yValues:o,xScale:w,yScale:c,areasLen:u.getYValueCount()}},getPaths:function(){var u=this,c=true,d=u.getBounds(),a=d.bbox,j=u.items=[],t=[],b,m=[],q,f,g,e,n,r,h,v,o,s,k;f=d.xValues.length;for(q=0;q<f;q++){n=d.xValues[q];r=d.yValues[q];g=a.x+(n-d.minX)*d.xScale;h=0;for(v=0;v<d.areasLen;v++){if(!j[v]){j[v]={pointsUp:[],pointsDown:[],series:u}}if(!t[v]){t[v]=[]}s=u.isExcluded(v)?0:r[v];h+=s;e=a.y+a.height-(h-d.minY)*d.yScale;if(!m[v]){m[v]=["M",g,e];t[v].push(["L",g,e])}else{m[v].push("L",g,e);t[v].push(["L",g,e])}j[v].pointsUp.push([g,e])}}for(v=0;v<d.areasLen;v++){k=m[v];if(v==0||c){c=false;k.push("L",g,a.y+a.height,"L",a.x,a.y+a.height,"Z")}else{b=t[o];b.reverse();k.push("L",g,b[0][2]);for(q=0;q<f;q++){k.push(b[q][0],b[q][1],b[q][2]);j[v].pointsDown[f-q-1]=[b[q][1],b[q][2]]}k.push("L",a.x,k[2],"Z")}o=v}return{paths:m,areasLen:d.areasLen}},drawSeries:function(){var j=this,h=j.getChart(),k=h.substore||h.store,e=j.getSurface(),d=h.getAnimate(),n=j.group,b=j.areas,c=j.style,a=h.getColorsStyle(),s=a&&a.length||0,f,g,r,q,m,o;if(j.fireEvent("beforedraw",j)===false){return}this.callParent();j.unHighlightItem();j.cleanHighlights();if(!j.getRecordCount()){e.getItems().hide(true);return}r=j.getPaths();if(!b){b=j.areas=[]}for(f=0;f<r.areasLen;f++){if(!b[f]){j.items[f].sprite=b[f]=e.add(Ext.apply({},{type:"path",group:n,path:r.paths[f],stroke:c.stroke||a[f%s],fill:a[f%s]},c||{}))}g=b[f];q=r.paths[f];if(d){m=j.getRenderer()(g,false,{path:q,hidden:j.isExcluded(f),fill:a[f%s],stroke:c.stroke||a[f%s]},f,k);j.animation=j.onAnimate(g,{to:m})}else{m=j.getRenderer()(g,false,{path:q,hidden:j.isExcluded(f),fill:a[f%s],stroke:c.stroke||a[f%s]},f,k);b[f].setAttributes(m,true)}}for(;f<b.length;f++){b[f].hide()}j.renderLabels();j.renderCallouts();j.fireEvent("draw",j)},onAnimate:function(b,a){b.show();Ext.chart.series.Area.superclass.onAnimate.apply(this,arguments)},onCreateLabel:function(d,j,c,e){var f=this,g=f.labelsGroup,a=f.label,h=f.bbox,b=Ext.apply({},a,f.labelStyle.style);return f.getSurface().add(Ext.apply({type:"text","text-anchor":"middle",group:g,x:j.point[0],y:h.y+h.height/2},b||{}))},onPlaceLabel:function(f,j,t,q,o,c,e){var v=this,k=v.getChart(),s=k.resizing,u=v.label,r=u.renderer,b=u.field,a=v.bbox,h=t.point[0],g=t.point[1],d,n,m;f.setAttributes({text:r(j.get(b[e])),hidden:true},true);d=f.getBBox();n=d.width/2;m=d.height/2;h=h-n<a.x?a.x+n:h;h=(h+n>a.x+a.width)?(h-(h+n-a.x-a.width)):h;g=g-m<a.y?a.y+m:g;g=(g+m>a.y+a.height)?(g-(g+m-a.y-a.height)):g;if(v.getChart().getAnimate()&&!v.getChart().resizing){f.show(true);v.onAnimate(f,{to:{x:h,y:g}})}else{f.setAttributes({x:h,y:g},true);if(s){v.animation.on("afteranimate",function(){f.show(true)})}else{f.show(true)}}},onPlaceCallout:function(m,r,J,G,F,d,j){var M=this,s=M.getChart(),D=M.getSurface(),H=s.resizing,L=M.callouts,t=M.items,v=(G==0)?false:t[G-1].point,z=(G==t.length-1)?false:t[G+1].point,c=J.point,A,f,N,K,o,q,b=m.label.getBBox(),I=30,C=10,B=3,g,e,h,w,u,E=M.clipRect,n,k;if(!v){v=c}if(!z){z=c}K=(z[1]-v[1])/(z[0]-v[0]);o=(c[1]-v[1])/(c[0]-v[0]);q=(z[1]-c[1])/(z[0]-c[0]);f=Math.sqrt(1+K*K);A=[1/f,K/f];N=[-A[1],A[0]];if(o>0&&q<0&&N[1]<0||o<0&&q>0&&N[1]>0){N[0]*=-1;N[1]*=-1}else{if(Math.abs(o)<Math.abs(q)&&N[0]<0||Math.abs(o)>Math.abs(q)&&N[0]>0){N[0]*=-1;N[1]*=-1}}n=c[0]+N[0]*I;k=c[1]+N[1]*I;g=n+(N[0]>0?0:-(b.width+2*B));e=k-b.height/2-B;h=b.width+2*B;w=b.height+2*B;if(g<E[0]||(g+h)>(E[0]+E[2])){N[0]*=-1}if(e<E[1]||(e+w)>(E[1]+E[3])){N[1]*=-1}n=c[0]+N[0]*I;k=c[1]+N[1]*I;g=n+(N[0]>0?0:-(b.width+2*B));e=k-b.height/2-B;h=b.width+2*B;w=b.height+2*B;m.lines.setAttributes({path:["M",c[0],c[1],"L",n,k,"Z"]},true);m.box.setAttributes({x:g,y:e,width:h,height:w},true);m.label.setAttributes({x:n+(N[0]>0?B:-(b.width+B)),y:k},true);for(u in m){m[u].show(true)}},isItemInPoint:function(h,g,k,c){var f=this,b=k.pointsUp,d=k.pointsDown,n=Math.abs,e=Infinity,a,m,j;for(a=0,m=b.length;a<m;a++){j=[b[a][0],b[a][1]];if(e>n(h-j[0])){e=n(h-j[0])}else{j=b[a-1];if(g>=j[1]&&(!d.length||g<=(d[a-1][1]))){k.storeIndex=a-1;k.storeField=f.getYField()[c];k.storeItem=f.getChart().getStore().getAt(a-1);k._points=d.length?[j,d[a-1]]:[j];return true}else{break}}}return false},highlightSeries:function(){var a,c,b;if(this._index!==undefined){a=this.areas[this._index];a.__highlighted=true;a.__prevOpacity=a.__prevOpacity||a.attr.opacity||1;a.__prevFill=a.__prevFill||a.attr.fill;a.__prevLineWidth=a.__prevLineWidth||a.attr.lineWidth;b=Ext.draw.Color.fromString(a.__prevFill);c={lineWidth:(a.__prevLineWidth||0)+2};if(b){c.fill=b.getLighter(0.2).toString()}else{c.opacity=Math.max(a.__prevOpacity-0.3,0)}this.highlightSprite(a)}},unHighlightSeries:function(){var a;if(this._index!==undefined){a=this.areas[this._index];this.unHighlightSprite(a)}},highlightItem:function(d){var c=this,b=c.highlightMark,a,e;if(!d){this.highlightSeries();return}a=d._points;e=a.length==2?["M",a[0][0],a[0][1],"L",a[1][0],a[1][1]]:["M",a[0][0],a[0][1],"L",a[0][0],c.bbox.y+c.bbox.height];if(b){b.setAttributes(Ext.merge({path:e,hidden:false},this.getHighlightCfg()),true)}c.getSurface().renderFrame()},unHighlightItem:function(a){if(!a){this.unHighlightSeries()}if(this.highlightMark){this.highlightMark.hide(true)}},getLegendColor:function(b){var c=this,a=c.getChart().getColorsStyle();return c.getColorFromStyle(a[b%a.length])}});Ext.define("Ext.chart.series.AbstractSpaceFilling",{extend:"Ext.chart.series.Series",showInLegend:false,title:{},areaField:"area",colorField:"color",constructor:function(b){this.callParent(arguments);var c=this,a=c.getSurface();Ext.apply(c,b,{style:{}});c.group=a.getGroup(c.seriesId)},getBounds:function(){var f=this,e=f.getChart(),j=e.getStore(),g=j.getRoot(),h=Infinity,d=-Infinity,c=f.areaField,a,k,m;if(typeof c!="function"){a=function(n){return n.get(c)}}else{a=c}f.areaField=a;f.setBBox();k=f.bbox;m=k.width*k.height;(function b(s){var r=a(s),o,q,n;if(s){h=h>r?r:h;d=d<r?r:d}for(o=0,q=s.childNodes,n=q.length;o<n;++o){b(q[o])}})(g);f.getArea=function(n){return(a(n)-h)/(d-h)*m};return{bbox:k,minValue:h,maxValue:d,area:k.width*k.height}},drawSeries:function(){var v=this,m=v.getChart(),d=m.getAnimate(),e=m.substore||m.getStore(),h=v.group,j=v.titleHeight||0,f=0,c=0,s=v.labelsGroup,t=function(w){return !w.storeItem.childNodes.length},k,a,g,n,u,o,q,r,b;if(v.fireEvent("beforedraw",v)===false){return}if(!e.getRoot().childNodes.length||v.seriesIsHidden){v.getSurface().getItems().hide(true);return}Ext.chart.series.AbstractSpaceFilling.superclass.drawSeries.call(this);v.unHighlightItem();v.cleanHighlights();g=v.getBounds();a=g.bbox;v.items=n=v.compute(g);for(r=0,q=n.length;r<q;++r){u=n[r];u.series=v;if(t(u)){v.renderLeaf(u,c++,f++)}else{v.renderInner(u,c++,f++)}}v.hideExtraElements(n.length,f);v.fireEvent("draw",v)},hideExtraElements:function(c,b){var f=this,a=f.labelsGroup,g=f.group,d,e;e=g.getCount();for(d=c;d<e;d++){g.getAt(d).hide(true)}e=a.getCount();for(d=b;d<e;d++){a.getAt(d).hide(true)}},getOrCreateSprite:function(d,a){var c=this,e=c.group,b=e.getAt(a),f=c.bbox;return b||c.getSurface().add({type:"rect",x:0,y:0,width:0,height:0,group:e,translate:{x:(f.x+f.width)/2,y:(f.y+f.height)/2}})},getOrCreateLabel:function(m,d){var e=this,f=e.labelsGroup,h=f.getAt(d),c=e.titleHeight||0,b=e.offset||0,k=e.bbox,a=m.storeItem,j=a.get(e.titleField)||e.rootName,g;g=h||e.getSurface().add({type:"text",text:j,font:Math.max((c-b),0)+"px Arial","text-align":"center",x:0,y:c/2,fill:"#fff",group:f,width:0,translate:{x:(k.x+k.width)/2,y:(k.y+k.height)/2}});g.setAttributes({text:j,hidden:false},true);while(g.getBBox().width>m.width&&j.length>=7){j=j.slice(0,j.length/2)+"...";g.setAttributes({text:j},true)}if((/\.{3}$/.test(j)&&j.length<7)||g.getBBox().height>=m.height){g.setAttributes({hidden:true},true)}return g},renderLeaf:function(n,h,a){var g=this,c=g.getChart().getAnimate(),k=g.getOrCreateSprite(n,h),j=g.getOrCreateLabel(n,a),d=(g.offset||0)/2,e=g.titleHeight||0,m=typeof g.colorField=="function"?g.colorField:function(o){return o.storeItem.get(g.colorField)},b={fill:m(n),width:n.width-d*2,height:n.height-d*2,translate:{x:n.x+d,y:n.y+d}},f={fill:g.label.fill||"#fff",width:n.width-d*2,"text-anchor":"center",zIndex:10000,translate:{x:n.x+d+n.width/2,y:n.y+d+(n.height-Math.max(e,0))/2}};n.sprite=k;if(c){g.onAnimate(k,{to:b});if(!j.attr.hidden){g.onAnimate(j,{to:f})}}else{k.setAttributes(b,true);j.setAttributes(f,true)}},renderInner:function(m,h,a){if(!this.titleHeight){return}var g=this,c=g.getChart().getAnimate(),k=g.getOrCreateSprite(m,h),j=g.getOrCreateLabel(m,a),d=(g.offset||0)/2,e=g.titleHeight||0,b={fill:g.title.fill||"#555",width:m.width-d*2,height:Math.max(e-d,0),translate:{x:m.x+d,y:m.y+d}},f={fill:g.label.fill||"#fff",width:m.width-d*2,height:Math.max(e-d,0),"text-anchor":"center",zIndex:10000,translate:{x:m.x+d+m.width/2,y:m.y+d}};m.sprite=k;if(c){g.onAnimate(k,{to:b});g.onAnimate(j,{to:f})}else{k.setAttributes(b,true);j.setAttributes(f,true)}},isItemInPoint:function(a,d,b){if(!b.sprite){return false}var c=b.sprite.getBBox();return c.x<=a&&c.y<=d&&(c.x+c.width)>=a&&(c.y+c.height)>=d},onCreateLabel:function(c,b,a,d){},onPlaceLabel:function(b,e,d,c,f,a){},onPlaceCallout:function(f,e,d,c,g,a,b){},onAnimate:function(b,a){b.show();Ext.chart.series.AbstractSpaceFilling.superclass.onAnimate.apply(this,arguments)}});Ext.define("Ext.chart.series.AbstractRadial",{compute:function(){var c=this,a=c.createLevelDistanceFunc(),d=c.bbox,b;c.centerX=d.x+d.width/2;c.centerY=d.y+d.height/2;b=c.computeAngularWidths();c.computePositions(b,null,a);return b},computePositions:function(r,d,f){var v=this,k=v.getChart().getStore(),t=k.getRoot(),c=r[0],q=v.parent,u=v.config,g=Math,s=g.PI,e=g.cos,a=g.sin,o=v.centerX,n=v.centerY,b=function(w){return w.storeItem.attributes.record},h=function(A){var x=0,w=r.length,z=[];for(;x<w;++x){if(r[x].parent==A){z.push(r[x])}}return z},m=typeof v.dimField=="function"?v.dimField:function(w){return b(w).get(v.dimField)};Ext.apply(c,{span:s*2,angleSpan:{begin:0,end:s*2}});(function j(I){var F=h(I),N=0,J=F.length,w=Number.MIN_VALUE,z=function(U,T){return T.dist-U.dist},P,S,R,O,G,Q,M,H,E,A,L,K,C,B,x,D;S=I.angleSpan.end-I.angleSpan.begin;R=I.angleSpan.begin;O=f(I);G=0;Q=[];E=h(I);for(M=0,H=E.length;M<H;M++){A=E[M];G+=A._treeAngularWidth;L=m(A);w=L>w?L:w;Q.push(A)}if(q&&q.id==I.id&&Q.length&&Q[0].dist){Q.sort(z)}for(K=0,C=Q.length;K<C;K++){B=Q[K];if(!B._flag){x=B._treeAngularWidth/G*S;D=R+x/2;Ext.apply(B,{rho:O,theta:D,x:e(D)*O+o,y:a(D)*O+n,span:x,dimQuotient:m(B.dim)/w,angleSpan:{begin:R,end:R+x}});R+=x}}for(K=0,C=Q.length;K<C;K++){j(Q[K])}})(c)},setAngularWidthForNodes:function(){var f=this,e=f.getChart().getStore(),d=[],b=e.getRoot(),g=function(h){return h.storeItem.attributes.record},c=typeof f.dimField=="function"?f.dimField:function(h){geRecord(h).get(f.dimField)};(function a(o,m,q){var n={},k=o.childNodes,h=k.length,j=0;Ext.apply(n,{id:d.length,storeItem:o,parent:m,depth:q});n._angularWidth=c(n);d.push(n);for(;j<h;j++){a(k[j],n,q+1)}})(b,null,0);return d},setSubtreesAngularWidth:function(b){var d=this,c=0,a=b.length;for(;c<a;c++){d.setSubtreeAngularWidth(b[c],b)}},setSubtreeAngularWidth:function(h,c){var g=this,f=h._angularWidth,a=0,d=0,b=c.length,e=[];for(;d<b;d++){if(c[d].parent==h){g.setSubtreeAngularWidth(c[d],c);a+=c[d]._treeAngularWidth}}h._treeAngularWidth=Math.max(f,a)},computeAngularWidths:function(){var a=this.setAngularWidthForNodes();this.setSubtreesAngularWidth(a);return a}});Ext.define("Ext.chart.series.Sunburst",{extend:"Ext.chart.series.AbstractSpaceFilling",mixins:{radial:"Ext.chart.series.AbstractRadial"},config:{levelDistance:null},type:"sunburst",constructor:function(a){var b=this;b.callParent(arguments);b.dimField=b.spanField},createLevelDistanceFunc:function(){var g=this,f=g.getChart(),b=g.getSurface(),e=b.getWidth(),a=b.getHeight(),c=f.getStore().getRoot(),d=(Math.min(e,a)>>1)/(g.getTreeDepth(c)+1);g.setLevelDistance(d);return function(h){return(h.depth+1)*d}},getTreeDepth:function(a){return(function b(j,h){if(!j){return h}var e=0,g=j.childNodes,c=g.length,f=Array(c);if(!c){return h}for(;e<c;++e){f[e]=b(g[e],h+1)}return Math.max.apply(Math,f)})(a,0)},renderInner:function(){this.renderLeaf.apply(this,arguments)},getOrCreateSprite:function(d,a){var c=this,e=c.group,b=e.getAt(a),f=c.bbox;if(b){b.show(true)}return b||c.getSurface().add({type:"path",path:["M",0,0],x:0,y:0,group:e})},getOrCreateLabel:function(r,f){var h=this,k=h.labelsGroup,n=k.getAt(f),e=h.titleHeight||0,d=h.offset||0,c=h.getLevelDistance(),q=h.bbox,b=r.storeItem,o=b.get(h.titleField)||h.rootName,a=r.theta,g=(a>Math.PI/2&&a<3*Math.PI/2),j=g?a+Math.PI:a,m,s;r.labelRotation=j;m=n||h.getSurface().add({type:"text",text:o,font:Math.max(12,0)+"px Arial","text-anchor":"center",fill:"#fff",group:k});m.setAttributes({text:o,hidden:false},true);s=m.getBBox();while(m.getBBox(true).width>c&&o.length>=7){o=o.slice(0,o.length/2)+"...";m.setAttributes({text:o},true)}return m},renderLeaf:function(w,d,F){if(!w.parent){w.sprite={getBBox:function(){return{x:0,y:0,width:0,height:0}}};return}d-=1;F-=1;var n=this,z=Math,e=z.cos,g=z.sin,B=z.abs,M=n.getChart(),K=M.getAnimate(),r=n.getOrCreateSprite(w,d),H=n.getOrCreateLabel(w,F),v=n.getLevelDistance()||30,f=w.depth,u=f*v,L=u+v,s=w.span/2,q=w.theta,E=w.x,D=w.y,o=2*z.PI,A=w.angleSpan,a=(o%A.end==0&&o%s==0),I=q-s,G=q+s,c=n.centerX,b=n.centerY,m=w.rho*e(I),R=w.rho*g(I),k=(w.rho+v)*e(I),Q=(w.rho+v)*g(I),j=w.rho*e(G),P=w.rho*g(G),h=(w.rho+v)*e(G),O=(w.rho+v)*g(G),C=B(G-I)>z.PI,t=typeof n.colorField=="function"?n.colorField:function(x){return x.storeItem.get(n.colorField)},N={path:[["M",m,R],["L",k,Q],["A",L,L,0,+C,1,h,O],["L",h,O],["L",j,P],["A",u,u,0,+C,0,m,R],["Z"]],fill:t(w),translate:{x:c,y:b}},J={fill:n.label.fill||"#fff","text-anchor":"center",zIndex:10000,translate:{x:w.x+(v/2*e(w.theta)),y:w.y+(v/2*g(w.theta))}};if(a){N.path=[["M",m,R],["L",k,Q],["A",L,L,0,+C,1,h,O-0.1],["L",h,O],["L",j,P],["A",u,u,0,+C,0,m,R],["Z"]]}H.setAttributes({rotate:{degrees:w.labelRotation*180/Math.PI,x:0,y:0}},true);w.sprite=r;if(K&&!M.resizing){n.onAnimate(r,{to:N});if(!H.attr.hidden){delete J["text-anchor"];n.onAnimate(H,{to:J})}}else{r.setAttributes(N,true);H.setAttributes(J,true)}},hideExtraElements:function(b,g){var e=this,g=g-1,a=e.labelsGroup,f=e.group,c,d;d=f.getCount();for(c=b-1;c<d;c++){f.getAt(c).hide(true)}d=a.getCount();for(c=g;c<d;c++){a.getAt(c).hide(true)}},isItemInPoint:function(h,d,j){var c=this,f=h-c.centerX,e=d-c.centerY,g=Math.sqrt(f*f+e*e),a=Math.atan2(e,f),b=c.getLevelDistance();a=a<0?(a+Math.PI*2):a;if(j.parent){return g>=j.rho&&g<=j.rho+b&&a>=j.angleSpan.begin&&a<=j.angleSpan.end}}});(function(){var a={};a.Icicle={compute:function(){var f=this,j=f.getChart().getStore(),g=j.getRoot(),n=f.bbox,b=n.width,k=n.height,c=f.offset,d=0,h=0,e=[];h=(function m(t,v){var o=v,s=t.childNodes,q=s.length,r=0,u=[];if(q){for(;r<q;r++){u.push(m(s[r],v+1))}o=Math.max.apply(Math,u)}return o})(g,0);if(f.orientation=="horizontal"){f.computeSubtree(g,0,0,b/(h+1),k,d,h,e)}else{f.computeSubtree(g,0,0,b,k/(h+1),d,h,e)}return e},computeSubtree:function(o,g,f,n,k,j,e,m){var u=this,b=function(w){return w},h=o.childNodes,q=h.length,s=0,t=0,r=0,v=0,d=typeof u.lengthField=="function"?u.lengthField:function(w){return w.get(u.lengthField)},c={x:g,y:f,width:n,height:k,storeItem:o};m.push(c);if(!q){return}for(;s<q;++s){v+=d(b(h[s]))}for(s=0;s<q;++s){if(u.orientation=="horizontal"){t=k*d(b(h[s]))/v;u.computeSubtree(h[s],g+n,f,n,t,j,e,m);f+=t}else{t=n*d(b(h[s]))/v;u.computeSubtree(h[s],g,f+k,t,k,j,e,m);g+=t}}}};Ext.define("Ext.chart.series.Icicle",{extend:"Ext.chart.series.AbstractSpaceFilling",statics:{Layout:a},type:"icicle",orientation:"horizontal",constructor:function(b){this.callParent(arguments);Ext.apply(this,a.Icicle)},renderInner:function(){this.renderLeaf.apply(this,arguments)}})})();(function(){var a={};a.SliceAndDice={compute:function(b){var f=this,e=f.getChart(),h=e.substore||e.getStore(),g=h.getRoot(),m=f.bbox,c=m.width,k=m.height,d=[],j;j={x:m.x,y:m.y,width:c,height:k+(f.titleHeight||0),storeItem:g};f.computePositions(j,j,f.orientation||"horizontal",d);return d},computePositions:function(o,h,C,t){var E=this,m=o.storeItem,c=m.childNodes,j=E.areaField,A=0,d=E.offset||0,x=0,k=E.titleHeight||0,u=o.width,s=Math.max(0,o.height-k),D=C=="horizontal",z,v,B,g,r,q,w,f,b,n,e;t.push(h);for(z=0,v=c.length;z<v;++z){A+=j(c[z])}g=o==h?1:(j(h.storeItem)/A);if(D){C="vertical";r=s;q=u*g;w="height";f="y";b="x";n=k;e=0}else{C="horizontal";r=s*g;q=u;w="width";f="x";b="y";n=0;e=k}h.width=q;h.height=r;c=h.storeItem.childNodes;for(z=0,v=c.length;z<v;++z){B={};B[f]=x+h[f]+n;B[b]=h[b]+e;B.storeItem=c[z];E.computePositions(h,B,C,t);x+=B[w]}}};a.Area={compute:function(b){var k=this,j=k.getChart(),n=j.substore||j.getStore(),m=n.getRoot(),r=k.bbox,c=r.width,q=r.height,h=[],o,f,e=k.offset,g=c-e,d=q-e;o={x:0,y:0,width:c,height:q,storeItem:m};h.push(o);f={top:k.titleHeight||0,left:e/2,width:g,height:d-(k.titleHeight||0)};k.computePositions(m,f,h);return h},computeDim:function(f,g,m,e,d,h){var k=this,b,j,n;if(f.length+g.length==1){b=f.length==1?f:g;k.layoutLast(b,m,e,h);return}if(f.length>=2&&g.length==0){g=[f.shift()]}if(f.length==0){if(g.length>0){k.layoutRow(g,m,e,h)}return}j=f[0];if(d.call(this,g,m)>=d.call(this,[j].concat(g),m)){k.computeDim(f.slice(1),g.concat([j]),m,e,d,h)}else{n=k.layoutRow(g,m,e,h);k.computeDim(f,[],n.dim,n,d,h)}},worstAspectRatio:function(b,m){if(!b||b.length==0){return Number.MAX_VALUE}var k=this,c=0,n=0,f=Number.MAX_VALUE,h=0,g=b.length,j=m*m,d,e;for(;h<g;h++){d=b[h]._area;c+=d;f=f<d?f:d;n=n>d?n:d}e=c*c;return Math.max(j*n/e,e/(j*f))},avgAspectRatio:function(f,c){if(!f||f.length==0){return Number.MAX_VALUE}var j=this,k=0,d=0,b=f.length,g,e;for(;d<b;d++){g=f[d]._area;e=g/c;k+=c>e?c/e:e/c}return k/b},layoutLast:function(d,b,f,c){var e=d[0];Ext.apply(e,{x:f.left,y:f.top,width:f.width,height:f.height});c.push(e);return e}};a.Squarified=Ext.apply({computePositions:function(e,k,m){var n=this,g=n.offset||0,j=n.titleHeight||0,q=Math.max,b=e.childNodes,c=[],h=0,f=b.length,d,s,r,o;if(k.width>=k.height){n.orientation="horizontal"}else{n.orientation="vertical"}if(b.length>0){for(h=0;h<f;h++){c.push({storeItem:b[h]})}n.processChildrenLayout(e,c,k,m);for(h=0;h<f;h++){chi=c[h];r=chi.x;o=chi.y;s=q(chi.height-g-j,0);d=q(chi.width-g,0);k={width:d,height:s,top:o+j,left:r};n.computePositions(chi.storeItem,k,m)}}},processChildrenLayout:function(m,b,h,n){var o=this,f=0,c=b.length,e=h.width*h.height,g=0,q=[],d,k,j;for(;f<c;f++){q[f]=parseFloat(o.areaField(b[f].storeItem));g+=q[f]}for(f=0;f<c;f++){b[f]._area=e*q[f]/g}d=(o.orientation=="horizontal")?h.height:h.width;b.sort(function(s,r){var t=r._area-s._area;return t?t:(r.id==s.id?0:(r.id<s.id?1:-1))});k=[b[0]];j=b.slice(1);o.squarify(j,k,d,h,n)},squarify:function(d,f,b,e,c){this.computeDim(d,f,b,e,this.worstAspectRatio,c)},layoutRow:function(d,b,f,c){var e=this;if(e.orientation=="horizontal"){return e.layoutV(d,b,f,c)}else{return e.layoutH(d,b,f,c)}},layoutV:function(b,q,g,j){var k=this,r=0,e=0,d=b.length,c,f,n,m,o;for(;e<d;e++){r+=b[e]._area}c=(r/q)||0;m=0;for(e=0;e<d;e++){n=b[e];f=(n._area/c)||0;Ext.apply(n,{x:g.left,y:g.top+m,width:c,height:f});j.push(n);m+=f}o={height:g.height,width:g.width-c,top:g.top,left:g.left+c};o.dim=Math.min(o.width,o.height);if(o.dim!=o.height){k.orientation=(k.orientation=="horizontal")?"vertical":"horizontal"}return o},layoutH:function(b,n,f,g){var h=this,q=0,e=0,d=b.length,j=f.top,c=0,o,k,m;for(;e<d;e++){q+=b[e]._area}o=q/n||0;for(e=0;e<d;e++){k=b[e];n=(k._area/o)||0;Ext.apply(k,{x:f.left+c,y:j,width:n,height:o});g.push(k);c+=n}m={height:f.height-o,width:f.width,top:f.top+o,left:f.left};m.dim=Math.min(m.width,m.height);if(m.dim!=m.width){h.orientation=(h.orientation=="horizontal")?"vertical":"horizontal"}return m}},a.Area);Ext.define("Ext.chart.series.Treemap",{extend:"Ext.chart.series.AbstractSpaceFilling",type:"treemap",layout:"squarify",orientation:"horizontal",statics:{Layout:a},constructor:function(c){this.callParent(arguments);var e=this,b=e.getSurface(),d;d=e.layout.toLowerCase();if(d=="sliceanddice"){Ext.apply(e,a.SliceAndDice)}else{if(d=="squarified"){Ext.apply(e,a.Squarified)}}}})})();Ext.define("Ext.chart.series.Wordmap",{extend:"Ext.chart.series.Series",type:"wordmap",config:{maxFontSize:55,minFontSize:25,maxColor:"rgb(255,0,0)",minColor:"rgb(0,0,0)",positionFn:function(d){var c=d.width,b=d.height,a=(c/2)+(((Math.random()*10>5)?1:-1)*Math.random()*50+1)>>0;y=(b/2)+(((Math.random()*10>5)?1:-1)*Math.random()*50+1)>>0;return{x:a,y:y}},fontFamily:"Arial",wordField:false,wordCountField:false,colorFn:null},addedWords:[],constructor:function(c){this.callParent(arguments);var d=this,a=d.getSurface(),b=d.getChart().getStore();d.group=a.getGroup(d.seriesId)},getBounds:function(){var h=this,e,g=0,f=0,b=h.getSurface(),a=h.getWordCountField(),j,c,d;d=Infinity;c=0;h.eachRecord(function(k){e=k.get(a);if(e<d){d=e}if(e>c){c=e}});h.setBBox();j=h.bbox;g=(c-d)/(h.getMaxFontSize()-h.getMinFontSize());f=1/(c-d);return{bbox:j,width:b.getWidth(),height:b.getHeight(),colorScale:f,fontScale:g,minCount:d,maxCount:c}},drawSeries:function(){var E=this,s=E.getChart(),d=s.getAnimate(),A=E.getSurface(),f=s.substore||s.getStore(),C=f.getCount(),m=E.group,a=m.getCount(),D=E.getFontFamily(),e=E.addedWords||[],v=E.crossWords==null,o,j,q,h,e,r,B,g,n,k,u,w,b,z,t,c=+new Date;E.callParent();while(C<a--){m.get(a).hide(true)}j=E.bounds=E.getBounds();n=0;E.eachRecord(function(x,F){h=0;r=false;b=v&&(0==(Math.random()*2>>0));B=x.get(E.getWordField());g=x.get(E.getWordCountField());o=E.getPositionFn()(j);q=o;k=E.getMeasuredWord(q,B,g,b);r=E.checkForCollisions(k);while(r||E.isInBoundaries(k)){q=E.moveAlongSpiral(o,h);k=E.getMeasuredWord(q,B,g,b);r=E.checkForCollisions(k);h+=Ext.draw.Draw.pi2/12}e.push(k);E.addedWords=e;u=E.getWordSize(B,g);w=m.get(F)||(A.add({type:"text",group:m,x:q.x,y:q.y,"font-size":u.fontSize,"font-family":D,textBaseline:"middle","text-anchor":"center",fill:E.getInterpolatedColor(g),text:B,rotate:{degrees:b?90:0}}));if(m.get(F)){m.get(F).show(true);if(d){E.onAnimate(w,{to:{text:B,x:q.x,y:q.y,rotate:{degrees:b?90:0},fill:E.getInterpolatedColor(g),"font-size":u.fontSize,"font-family":D}})}else{w.setAttributes({x:q.x,y:q.y,rotate:{degrees:b?90:0},fill:E.getInterpolatedColor(g),"font-size":u.fontSize,"font-family":D,text:B})}}else{A.add(w)}});E.addedWords=[];E.fireEvent("draw",E)},onCreateLabel:function(c,b,a,d){},onPlaceLabel:function(b,e,d,c,f,a){},moveAlongSpiral:function(e,d){var c=d,b=c*Math.cos(d)>>0,f=c*Math.sin(d)>>0;e.x+=b;e.y+=f;return e},getInterpolatedColor:function(g){var k=this,a=k.bounds,f=a.minCount,d=a.maxCount,e=Ext.draw.Color,h=(g-f)*a.colorScale,b=e.fromString(k.getMaxColor()).getRGB(),c=e.fromString(k.getMinColor()).getRGB(),m,j,n;if(k.getColorFn()){return k.getColorFn()(g,a)}m=c[0]+(b[0]-c[0])*h>>0,j=c[1]+(b[1]-c[1])*h>>0,n=c[2]+(b[2]-c[2])*h>>0;return(new e(m,j,n).toString())},getWordSize:function(a,e){var f=this,c=f.getSurface(),h=c.ctx,j=f.getMinFontSize()+(((e-f.bounds.minCount)/f.bounds.fontScale)>>0),d=j+"px '"+f.getFontFamily()+"'",b,g;h.save();if(h.font!=d){h.font=d}h.textBaseline="bottom";b=h.measureText(a).width>>0;g=j;h.restore();return{width:b,height:g,fontSize:j}},getMeasuredWord:function(d,a,e,c){var j=this,f=j.getWordSize(a,e),b=f.width,q=f.height,h=(!c)?b/2:q/2,g=(!c)?q/2:b/2,o=[],n=[],m=[],k=[];o[0]=d.x-h;o[1]=d.y-g;n[0]=d.x+h;n[1]=d.y-g;m[0]=d.x+h;m[1]=d.y+g;k[0]=d.x-h;k[1]=d.y+g;return[o,n,m,k]},checkForCollisions:function(e){var d=this,f=d.addedWords,c=f.length,a;for(var b=0;b<c;b++){a=f[b];if(!!Ext.draw.Draw.intersect(e,a).length){return true}}return false},isInBoundaries:function(c){var b=this,a=b.bounds;return(c[0][0]&&c[1][1]&&(c[1][0]>a.width||c[1][1]>a.height))}});Ext.define("Ext.chart.interactions.Manager",{singleton:true,extend:"Ext.AbstractManager"});Ext.define("Ext.chart.interactions.Abstract",{mixins:{identifiable:"Ext.mixin.Identifiable",observable:"Ext.mixin.Observable"},config:{gesture:"tap",chart:false},constructor:function(a){var b=this;b.initConfig(a)},initialize:Ext.emptyFn,updateChart:function(c,a){var b=this;if(a===c){return}if(a){a.un(b.getGesture(),b.onGesture,b)}if(c){c.on(b.getGesture(),b.onGesture,b);if(b.getGesture()&&b.getGesture()=="drag"||b.panGesture&&b.panGesture=="drag"){c.getSurface("events").initializeDragEvents()}}},onGesture:Ext.emptyFn,getItemForEvent:function(d){var b=this,a=b.getChart(),c=a.getEventXY(d);return a.getItemForPoint(c[0],c[1])},getItemsForEvent:function(d){var b=this,a=b.getChart(),c=a.getEventXY(d);return a.getItemsForPoint(c[0],c[1])},addChartListener:function(a,c,b,f){var e=this,d=e.getLocks();e.getChart().on(a,function(){if(!(a in d)||d[a]===e){c.apply(this,arguments)}},b,f)},lockEvents:function(){var d=this,c=d.getLocks(),a=arguments,b=a.length;while(b--){c[a[b]]=d}},unlockEvents:function(){var c=this.getLocks(),a=arguments,b=a.length;while(b--){delete c[a[b]]}},getLocks:function(){var a=this.getChart();return a.lockedEvents||(a.lockedEvents={})},isMultiTouch:function(){return !(Ext.os.is.MultiTouch===false||(Ext.os.is.Android&&!Ext.os.is.hasOwnProperty("MultiTouch"))||Ext.os.is.Desktop)},initializeDefaults:Ext.emptyFn,parent:null,getItemId:function(){return this.id||(this.id=Ext.id())},initCls:function(){return(this.cls||"").split(" ")},isXType:function(a){return a==="interaction"},getRefItems:function(a){return[]}});Ext.define("Ext.chart.interactions.DelayedSync",{config:{syncDelay:500,syncWaitText:"Rendering..."},constructor:function(){var a=this,b=Ext.util.DelayedTask;a.startSyncTask=new b(a.startSync,a);a.doSyncTask=new b(a.doSync,a);a.unlockInteractionTask=new b(a.unlockInteraction,a)},sync:Ext.emptyFn,needsSync:function(){return true},startSync:function(){var a=this;if(a.needsSync()){a.lockInteraction();a.doSyncTask.delay(1)}},doSync:function(){var a=this;if(a.needsSync()){a.sync()}a.unlockInteractionTask.delay(1)},cancelSync:function(){var a=this;a.startSyncTask.cancel();a.doSyncTask.cancel();a.unlockInteractionTask.cancel()},delaySync:function(){var a=this;a.cancelSync();a.startSyncTask.delay(a.getSyncDelay())},lockInteraction:function(){var d=this,c=d.getChart(),b=c.element,a=d.stopEvent;d.unlockInteraction();b.on({touchstart:a,touchmove:a,touchend:a,capture:true})},unlockInteraction:function(){var d=this,c=d.getChart(),b=c.element,a=d.stopEvent;b.un({touchstart:a,touchmove:a,touchend:a,capture:true})},stopEvent:function(a){a.stopEvent()}});Ext.define("Ext.chart.interactions.PanZoom",{extend:"Ext.chart.interactions.Abstract",type:"panzoom",mixins:{delayedSync:"Ext.chart.interactions.DelayedSync"},config:{axes:true,showOverflowArrows:true,gesture:"pinch"},panGesture:"drag",applyAxes:function(b){var a={};if(b===true){return{top:{},right:{},bottom:{},left:{}}}else{if(Ext.isArray(b)){a={};Ext.each(b,function(c){a[c]={}})}else{if(Ext.isObject(b)){Ext.iterate(b,function(c,d){if(d===true){a[c]={}}else{if(d!==false){a[c]=d}}})}}}return a},constructor:function(b){var c=this,a=Ext.baseCSSPrefix+"zooming",d;c.callParent(arguments);c.mixins.delayedSync.constructor.apply(c,arguments);if(c.showOverflowArrows){c.getChart().on("redraw",c.updateAllOverflowArrows,c)}if(!c.isMultiTouch()){c.zoomOnPanGesture=true;c.modeToggleButton=c.getChart().getToolbar().add({cls:[Ext.baseCSSPrefix+"panzoom-toggle",a],iconCls:Ext.baseCSSPrefix+"panzoom-toggle-icon",iconMask:true,handler:function(){var e=this,f=c.zoomOnPanGesture=!c.zoomOnPanGesture;if(f){e.addCls(a)}else{e.removeCls(a)}}})}},initialize:function(){var a=this;a.callParent(arguments);a.addChartListener(a.getGesture()+"start",a.onGestureStart,a);a.addChartListener(a.getGesture()+"end",a.onGestureEnd,a);a.addChartListener(a.panGesture+"start",a.onPanGestureStart,a);a.addChartListener(a.panGesture,a.onPanGesture,a);a.addChartListener(a.panGesture+"end",a.onPanGestureEnd,a)},initializeDefaults:function(a){var b=this;if(!a||a.type=="beforerender"){b.onGestureStart();b.onPanGestureStart();b.getChart().getAxes().each(function(f){if(!b.getAxes()[f.getPosition()]){return}var e=b.getAxes()[f.getPosition()],c=e.startPan||0,d=e.startZoom||1;if(c!=0||d!=1){b.transformAxisBy(f,c,c,d,d)}})}if(!a||a.type=="afterrender"){b.onGestureEnd();b.onPanGestureEnd()}},getInteractiveAxes:function(){var b=this,a=b.getAxes();return b.getChart().getAxes().filterBy(function(c){return !!a[c.getPosition()]})},isEventOnAxis:function(c,b){var a=Ext.util;return !a.Region.getRegion(b.getSurface().element).isOutOfBound(a.Point.fromEvent(c))},sync:function(){var b=this,a=b.getChart(),c=a.getAnimate(),d=b.getInteractiveAxes();a.setAnimate(false);d.each(function(e){if(e.hasFastTransform()){e.syncToFastTransform()}});b.getSeriesForAxes(d).each(function(e){if(e.hasFastTransform()){e.syncToFastTransform()}});a.redraw(true);a.setAnimate(c)},needsSync:function(){return !!this.getInteractiveAxes().findBy(function(a){return a.hasFastTransform()})},transformAxisBy:function(e,m,g,o,k){var f=this,d=f.getAxes()[e.getPosition()],a=d.minZoom||1,j=d.maxZoom||4,r=Ext.isNumber,b=e.getLength(),c=e.isSide(),n=c?g:m,q=c?k:o;function h(w){var u=w.getTransformMatrix().clone(),v,s,t;if(n!==0){u.translate(c?0:n,c?n:0)}if(q!==1){v=u.get(+c,+c);if(r(a)){q=Math.max(q,a/v)}if(r(j)){q=Math.min(q,j/v)}s=u.invert();u.scale(c?1:q,c?q:1,s.x(b/2,0),s.y(0,b/2))}t=u[c?"y":"x"](0,0);if(t>0){u.translate(c?0:-t,c?-t:0)}t=b-u[c?"y":"x"](b,b);if(t>0){u.translate(c?0:t,c?t:0)}w.setTransformMatrixFast(u)}h(e);e.getBoundSeries().each(h);if(f.showOverflowArrows){f.updateAxisOverflowArrows(e)}},getPannableAxes:function(d){var c=this,b=c.getAxes(),a;return c.getChart().getAxes().filterBy(function(e){a=b[e.getPosition()];return a&&a.allowPan!==false&&c.isEventOnAxis(d,e)})},panBy:function(b,a,c){b.each(function(d){this.transformAxisBy(d,a,c,1,1)},this)},onPanGestureStart:function(b){if(!b||!b.touches||b.touches.length<2){var a=this;a.cancelSync();if(a.zoomOnPanGesture){a.onGestureStart(b)}}},onPanGesture:function(b){if(!b.touches||b.touches.length<2){var a=this;if(a.zoomOnPanGesture){a.zoomBy(a.getZoomableAxes(b),(b.previousX+b.previousDeltaX)/b.previousX,b.previousY/(b.previousY+b.previousDeltaY))}else{a.panBy(a.getPannableAxes(b),b.previousDeltaX,b.previousDeltaY)}}},onPanGestureEnd:function(b){var a=this;if(a.zoomOnPanGesture){a.onGestureEnd(b)}else{a.delaySync()}},getSeriesForAxes:function(b){var a=new Ext.util.MixedCollection(false,function(c){return c.seriesId});b.each(function(c){a.addAll(c.getBoundSeries().items)});return a},getZoomableAxes:function(d){var c=this,b=c.getAxes(),a;return c.getChart().getAxes().filterBy(function(e){a=b[e.getPosition()];return a&&a.allowZoom!==false&&(!d||c.isEventOnAxis(d,e))})},zoomBy:function(c,b,a){c.each(function(d){this.transformAxisBy(d,0,0,b,a)},this)},onGestureStart:function(b){var a=this;a.cancelSync();a.getZoomableAxes(b).each(function(c){c.hideLabels();c.getLabelSurface().renderFrame()})},onGesture:function(h){var f=this,a=Math.abs,d=a(h.touches[1].point.x-h.touches[0].point.x),b=a(h.touches[1].point.y-h.touches[0].point.y),j=f.lastZoomDistances||[d,b],g=d<30?1:d/(j[0]||d),c=b<30?1:b/(j[1]||b);f.zoomBy(f.getZoomableAxes(h),g,c);f.lastZoomDistances=[d,b]},onGestureEnd:function(b){var a=this;a.delaySync();delete a.lastZoomDistances},getOverflowArrow:function(a,f,c){var b=this,d=a.getPosition(),g=b.overflowIndicators||(b.overflowIndicators={}),e=g[d]||(g[d]={});return e[f]||(e[f]=Ext.chart.Shape.arrow(b.getChart().getEventsSurface(),c))},updateAxisOverflowArrows:function(d){var k=this,c=d.isSide(),a=d.getPosition(),f=k.getAxes()[a].allowPan!==false,b=d.getLength()||1,j=k.getChart(),r=j.chartBBox,n=d.getTransformMatrix(),e=Ext.apply({hidden:true,radius:5,opacity:0.3,fill:d.style.stroke},k.overflowArrowOptions),m=Math,q=m.ceil,h=m.floor,o=k.getOverflowArrow(d,"up",e),g=k.getOverflowArrow(d,"down",e),s;if(f&&(c?q(n.y(0,0))<0:h(n.x(b,0))>b)){if(c){s=["M",r.x,r.y,"l",r.width/2,0,0,5,-10,10,20,0,-10,-10,0,-5,r.width/2,0,0,20,-r.width,0,"z"].join(",")}else{s=["M",r.x+r.width,r.y,"l",0,r.height/2,-5,0,-10,-10,0,20,10,-10,5,0,0,r.height/2,-20,0,0,-r.height,"z"].join(",")}o.setAttributes({hidden:false,path:s})}else{o.hide()}if(f&&(c?h(n.y(0,b))>b:q(n.x(0,0))<0)){if(c){s=["M",r.x,r.y+r.height,"l",r.width/2,0,0,-5,-10,-10,20,0,-10,10,0,5,r.width/2,0,0,-20,-r.width,0,"z"].join(",")}else{s=["M",r.x,r.y,"l",0,r.height/2,5,0,10,-10,0,20,-10,-10,-5,0,0,r.height/2,20,0,0,-r.height,"z"].join(",")}g.setAttributes({hidden:false,path:s})}else{g.hide()}if(o.dirtyTransform||o.dirtyHidden||g.dirtyTransform||g.dirtyHidden){k.getChart().getEventsSurface().renderFrame()}},updateAllOverflowArrows:function(){var a=this;a.getInteractiveAxes().each(a.updateAxisOverflowArrows,a)}},function(){Ext.chart.interactions.Manager.registerType("panzoom",Ext.chart.interactions.PanZoom)});Ext.define("Ext.chart.interactions.PieGrouping",{extend:"Ext.chart.interactions.Abstract",type:"piegrouping",config:{gesture:"tap",outset:6,snapWhileDragging:false,onSelectionChange:Ext.emptyFn},resizeGesture:"drag",constructor:function(a){var b=this;b.callParent(arguments);b.handleStyle=new Ext.chart.interactions.PieGrouping.HandleStyle();b.sliceStyle=new Ext.chart.interactions.PieGrouping.SliceStyle()},initialize:function(){var b=this,a=b.resizeGesture;b.callParent();b.addChartListener(a+"start",b.onResizeStart,b);b.addChartListener(a,b.onResize,b);b.addChartListener(a+"end",b.onResizeEnd,b)},onGesture:function(d){var h=this,c=h.getOutset(),m=h.getItemForEvent(d),g=h.handleStyle.style,k=h.sliceStyle.style,a,f,b,j;if(h.active&&(!m||h.getSelectedItems().indexOf(m)<0)){h.cancel()}if(!h.active&&m){a=h.getSeries().getOverlaySurface();f=m.startAngle;b=m.endAngle;h.slice={startAngle:f,endAngle:b,sprite:a.add(Ext.applyIf({type:"path"},k))};j="M"+Math.max(m.startRho-c,0)+",0L"+(m.endRho+c)+",0";h.startHandle={angle:f,sprite:a.add(Ext.applyIf({type:"path",path:j+"l5,-8l-10,0l5,8",fill:g.stroke},g))};h.endHandle={angle:b,sprite:a.add(Ext.applyIf({type:"path",path:j+"l5,8l-10,0l5,-8",fill:g.stroke},g))};h.getSeries().on("draw",h.onSeriesDraw,h);h.active=true;h.updateSprites();h.fireSelectionChange()}},onResizeStart:function(f){var g=this,k=Math.abs,h=g.normalizeAngle,d=g.startHandle,j=g.endHandle,a=g.resizeGesture,c,b;if(g.active){b=h(g.getAngleForEvent(f));if(k(b-h(d.angle))<10){c=d}else{if(k(b-h(j.angle))<10){c=j}}if(c){g.lockEvents(a+"start",a,a+"end")}g.activeHandle=c}},onResize:function(d){var f=this,c=f.activeHandle,g=f.getSnapWhileDragging(),h=f.slice,k,b,a=false,j;if(c){k=h.startAngle;b=h.endAngle;j=f.getAngleForEvent(d);c.angle=j;if(c===f.startHandle){k=g?f.snapToItemAngles(j,0)[0]:j;while(k>b){k-=360}while(k<=b){k+=360}if(h.startAngle!==k||!g){a=true}h.startAngle=k}else{b=g?f.snapToItemAngles(0,j)[1]:j;while(k>b){b+=360}while(k<=b){b-=360}if(h.endAngle!==b||!g){a=true}h.endAngle=b}f.updateSprites();if(a&&g){f.fireSelectionChange()}}},onResizeEnd:function(h){var j=this,d=j.activeHandle,f=j.startHandle,m=j.endHandle,k=j.slice,g=j.closestAngle,a=j.resizeGesture,b,n,c;if(d){b=j.snapToItemAngles(f.angle,m.angle);n=k.startAngle;c=k.endAngle;if(d===f){f.angle=g(b[0],f.angle,1);n=b[0];while(n>c){n-=360}while(n<=c){n+=360}k.startAngle=n}else{m.angle=g(b[1],m.angle,0);c=b[1];while(n>c){c+=360}while(n<=c){c-=360}k.endAngle=c}j.updateSprites(true);if(!j.getSnapWhileDragging()){j.fireSelectionChange()}delete j.activeHandle;j.unlockEvents(a+"start",a,a+"end")}},onSeriesDraw:function(){var f=this,e=f.startHandle,j=f.endHandle,g=f.slice,b=f.lastSelection,a,c,h,d;if(f.active&&b){a=b[0];c=b[b.length-1];h=f.findItemByRecord(a.storeItem);d=f.findItemByRecord(c.storeItem);if(!h||!d){f.cancel()}else{e.angle=g.startAngle=h.startAngle;j.angle=g.endAngle=d.endAngle;while(g.startAngle>g.endAngle){g.startAngle-=360}while(g.startAngle<=g.endAngle){g.startAngle+=360}f.updateSprites();f.fireSelectionChange()}}},findItemByRecord:function(a){var b=this.getSeries().items,c=b.length;while(c--){if(b[c]&&b[c].storeItem===a){return b[c]}}},normalizeAngle:function(a){while(a<0){a+=360}return a%360},fireSelectionChange:function(){var b=this,a=b.getSelectedItems();b.getOnSelectionChange()(b,a);b.fireEvent("selectionchange",b,a);b.lastSelection=a},renderFrame:function(){this.getSeries().getOverlaySurface().renderFrame()},updateSprites:function(a){var m=this,e=m.getSeries(),k=m.startHandle,q=m.endHandle,j=k.angle,h=q.angle,c=e.centerX,b=e.centerY,n=m.slice,d=m.getOutset(),g,f,o;if(m.active){o={rotate:{degrees:j,x:0,y:0},translate:{x:c,y:b}};if(a){k.sprite.fx.stop();k.sprite.fx.start(o)}else{k.sprite.setAttributes(o,true)}o={rotate:{degrees:h,x:0,y:0},translate:{x:c,y:b}};if(a){q.sprite.fx.stop();q.sprite.fx.start(o)}else{q.sprite.setAttributes(o,true)}g=e.getItemForAngle(j-1e-9);f=e.getItemForAngle(h+1e-9);if(!g||!f){m.cancel();return}o={segment:{startAngle:n.startAngle,endAngle:n.endAngle,startRho:Math.max(Math.min(g.startRho,f.startRho)-d,0),endRho:Math.min(g.endRho,f.endRho)+d}};if(a){n.sprite.fx.stop();n.sprite.fx.start(o)}else{n.sprite.setAttributes(o,true)}if(!a){m.renderFrame()}}},snapToItemAngles:function(e,c){var f=this,d=f.getSeries(),b=d.getItemForAngle(e-1e-9),a=d.getItemForAngle(c+1e-9);return[b.startAngle,a.endAngle]},closestAngle:function(c,b,a){if(a){while(c>b){c-=360}while(c<b){c+=360}}else{while(c<b){c+=360}while(c>b){c-=360}}return c},cancel:function(){var b=this,a;if(b.active){a=b.getSeries();Ext.destroy(b.startHandle.sprite,b.endHandle.sprite,b.slice.sprite);b.active=false;b.startHandle=b.endHandle=b.slice=null;b.fireSelectionChange();b.renderFrame();b.un(a,"draw",b.onSeriesDraw,b)}},getSelectedItems:function(){var e=this,f=e.slice,g,a=e.getSeries(),c,d,b;if(e.active){c=e.getSeries().items;d=c.indexOf(a.getItemForAngle(f.startAngle-1e-9));b=c.indexOf(a.getItemForAngle(f.endAngle+1e-9));if(d<=b){g=c.slice(d,b+1)}else{g=c.slice(d).concat(c.slice(0,b+1))}g=g.filter(function(k,j,h){return j in h})}return g||[]},getAngleForEvent:function(d){var c=this,a=c.getSeries(),b=a.getSurface().element.getXY();return Ext.draw.Draw.degrees(Math.atan2(d.pageY-a.centerY-b[1],d.pageX-a.centerX-b[0]))},getSeries:function(){var b=this,a=b._series;if(!a){a=b._series=b._chart._series.findBy(function(c){return c.type==="pie"});a.getOverlaySurface().customAttributes.segment=function(c){return a.getSegment(c)}}return a},getRefItems:function(a){return[this.handleStyle,this.sliceStyle]}},function(){Ext.chart.interactions.Manager.registerType("piegrouping",Ext.chart.interactions.PieGrouping)});Ext.define("Ext.chart.interactions.PieGrouping.HandleStyle",{extend:"Ext.chart.theme.Style",isXType:function(a){return a==="handle"}});Ext.define("Ext.chart.interactions.PieGrouping.SliceStyle",{extend:"Ext.chart.theme.Style",isXType:function(a){return a==="slice"}});Ext.define("Ext.chart.interactions.Rotate",{extend:"Ext.chart.interactions.Abstract",type:"rotate",mixins:{delayedSync:"Ext.chart.interactions.DelayedSync"},config:{gesture:"drag"},constructor:function(a){var b=this;b.callParent(arguments);b.mixins.delayedSync.constructor.apply(b,arguments)},initialize:function(){var b=this,a=b.getGesture();b.callParent();b.addChartListener(a+"start",b.onGestureStart,b);b.addChartListener(a+"end",b.onGestureEnd,b)},onGestureStart:function(c){var b=this,a=b.getAxis();b.cancelSync();b.getSeries().each(function(d){d.unHighlightItem();d.origHighlight=d.highlight;d.highlight=false;if(d.callouts){d.hideCallouts(0);d.getSurface().renderFrame()}});if(a&&a.getPosition()==="radial"){a.hideLabels();a.renderFrame()}},onGesture:function(g){var h=this,d=h.lastAngle,n,m,k,j,c,a,f,b;if(h.getGesture()==="pinch"){n=g.firstPageX;k=g.firstPageY;m=g.secondPageX;j=g.secondPageY}else{c=h.getSeries().get(0);a=c.getSurface().element.getXY();n=c.centerX+a[0];k=c.centerY+a[1];m=g.pageX;j=g.pageY}f=Ext.draw.Draw.degrees(Math.atan2(j-k,m-n));if(d===b){d=Ext.draw.Draw.degrees(Math.atan2(g.startY-k,g.startX-n))}if(d!==f){h.rotateBy(f-d)}h.lastAngle=f},onGestureEnd:function(){var a=this;a.delaySync();a.getSeries().each(function(b){b.highlight=b.origHighlight});delete a.lastAngle},rotateBy:function(e){var d=this,b=d.getSeries(),c=d.getAxis(),a;d.rotation=(d.rotation||0)+e;b.each(function(f){a=f.getFastTransformMatrix();a.rotate(e,f.centerX,f.centerY);f.setFastTransformMatrix(a)});if(c){a=c.getFastTransformMatrix();a.rotate(e,c.centerX,c.centerY);c.setFastTransformMatrix(a)}},seriesFilter:function(a){return a.type==="pie"||a.type==="radar"},getSeries:function(){return this.getChart().getSeries().filter(this.seriesFilter)},axisFilter:function(a){return a.getPosition()==="radial"},getAxis:function(){return this.getChart().getAxes().findBy(this.axisFilter)},sync:function(){var c=this,b=c.getChart(),a=c.getAxis(),d=b.getAnimate();b.setAnimate(false);c.getSeries().each(function(e){e.setRotation(e.getRotation()-c.rotation);e.drawSeries();e.getSurface().renderFrame();e.clearTransform()});if(a){a.setRotation(a.getRotation()-c.rotation);a.drawAxis();a.renderFrame();a.clearTransform()}b.setAnimate(d);c.rotation=0},needsSync:function(){return !!this.rotation}},function(){Ext.chart.interactions.Manager.registerType("rotate",Ext.chart.interactions.Rotate)});Ext.define("Ext.chart.interactions.ItemCompare",{extend:"Ext.chart.interactions.Abstract",config:{offset:{x:0,y:0}},type:"itemcompare",constructor:function(a){var b=this;b.circleStyle=new (Ext.extend(Ext.chart.theme.Style,{isXType:function(c){return c==="circle"}}))(a.circle);b.lineStyle=new (Ext.extend(Ext.chart.theme.Style,{isXType:function(c){return c==="line"}}))(a.line);b.arrowStyle=new (Ext.extend(Ext.chart.theme.Style,{isXType:function(c){return c==="arrow"}}))(a.arrow);delete a.line;delete a.circle;delete a.arrow;b.callParent(arguments)},updateChart:function(c,a){var b=this;if(c!=a){a&&a.un("refresh",b.reset,b);c&&c.on("refresh",b.reset,b)}b.callParent([c,a])},onGesture:function(c){var b=this,a=b.getItemForEvent(c);if(a){if(b.item1&&b.item2){b.reset()}if(b.item1){if(b.item1.series!=a.series){b.reset()}else{if(a!==b.item1){b.item2=a;a.series.highlightItem(a);b.showOverlay()}}}else{b.item1=a;a.series.highlightItem(a)}}else{b.reset()}},reset:function(){var b=this,a=b.activeSeries;if(a){b.line.remove();b.circle.remove();b.arrow.remove();a.unHighlightItem();a.un("transform",b.onSeriesTransform,b);a.getOverlaySurface().renderFrame();delete b.activeSeries}b.item1=b.item2=null;b.fireEvent("hide",b)},onSeriesTransform:function(b,a){if(!a){this.renderSprites()}},showOverlay:function(){var b=this,a=b.item1.series;b.activeSeries=a;a.on("transform",b.onSeriesTransform,b);b.renderSprites();b.fireEvent("show",b)},initSprites:function(){var d=this,c=Ext.draw.Sprite,a=d.arrowStyle.style,b;if(!d.line){d.line=new c(Ext.apply({type:"path",path:["M",0,0]},d.lineStyle.style));d.circle=new c(Ext.apply({type:"circle",radius:3},d.circleStyle.style));b=a.radius||3;d.arrow=new c(Ext.apply({type:"path",path:"M".concat("0,0m0-",b*0.58,"l",b*0.5,",",b*0.87,"-",b,",0z")},a))}},renderSprites:function(){var m=this,k=m.item1,j=m.item2,g=k.series,d,s,r,e,h,f,c,o,b,n,t,a,q;if(g){m.initSprites();d=g.getOverlaySurface();s=k.point;r=j.point;e=m.getOffset()||{};h=e.x||0;f=e.y||0;c=(s[0]+h);o=(s[1]+f);b=(r[0]+h);n=(r[1]+f);t=m.line;a=m.circle;q=m.arrow;t.setAttributes({path:["M",c,o,"L",b,n]});a.setAttributes({translate:{x:c,y:o}});q.setAttributes({translate:{x:b,y:n},rotate:{x:0,y:0,degrees:(Math.atan2(r[1]-s[1],r[0]-s[0])*180/Math.PI-90)+180}});d.add(t,a,q);d.renderFrame()}},getRefItems:function(a){var b=this;return[b.arrowStyle,b.lineStyle,b.circleStyle]}},function(){Ext.chart.interactions.Manager.registerType("itemcompare",Ext.chart.interactions.ItemCompare)});Ext.define("Ext.chart.interactions.ItemHighlight",{extend:"Ext.chart.interactions.Abstract",config:{gesture:"tap"},unHighlightEvent:"touchstart",initialize:function(){var a=this;a.callParent(arguments);a.addChartListener(a.unHighlightEvent,a.onUnHighlightEvent,a)},onGesture:function(j){var h=this,b=h.getItemsForEvent(j),g,f,d,c,a;for(c=0,a=b.length;c<a;c++){g=b[c];d=g.series;f=d.highlightedItem;if(f!==g){if(f){f.series.unHighlightItem()}d.highlightItem(g);d.highlightedItem=g;d.getSurface().renderFrame()}}},onUnHighlightEvent:function(f){var c=this,a=c.getChart(),d=a.getEventXY(f),b;a.getSeries().each(function(e){b=e.highlightedItem;if(b&&b!==e.getItemForPoint(d[0],d[1])){e.unHighlightItem();delete e.highlightedItem}e.getSurface().renderFrame()})}},function(){Ext.chart.interactions.Manager.registerType("itemhighlight",Ext.chart.interactions.ItemHighlight)});Ext.define("Ext.chart.interactions.ItemInfo",{extend:"Ext.chart.interactions.Abstract",type:"iteminfo",config:{gesture:"tap",panel:{floating:true,modal:true,centered:true,width:250,height:300,styleHtmlContent:true,scrollable:"vertical",hideOnMaskTap:true,fullscreen:false,hidden:true,zIndex:30,items:[{docked:"top",xtype:"toolbar",title:"Item Detail"}]}},applyPanel:function(a,b){return Ext.factory(a,"Ext.Panel",b)},updatePanel:function(a,b){if(a){a.on("hide",this.reset,this)}if(b){b.un("hide",this.reset,this)}},onGesture:function(d){var c=this,b=c.getItemForEvent(d),a;if(b){c.item=b;b.series.highlightItem(b);a=c.getPanel();c.fireEvent("show",c,b,a);a.show("pop")}},reset:function(){var b=this,a=b.item;if(a){a.series.unHighlightItem(a);delete b.item}}},function(){Ext.chart.interactions.Manager.registerType("iteminfo",Ext.chart.interactions.ItemInfo)});Ext.define("Ext.chart.interactions.Reset",{extend:"Ext.chart.interactions.Abstract",type:"reset",config:{gesture:"doubletap",confirm:false,confirmTitle:"Reset",confirmText:"Reset the chart?"},onGesture:function(c){var b=this,a=b.getChart();if(!b.getItemForEvent(c)){if(b.confirm){Ext.Msg.confirm(b.confirmTitle,b.confirmText,function(d){if(d==="yes"){a.reset()}})}else{a.reset()}}}},function(){Ext.chart.interactions.Manager.registerType("reset",Ext.chart.interactions.Reset)});Ext.define("Ext.chart.interactions.ToggleStacked",{extend:"Ext.chart.interactions.Abstract",type:"togglestacked",config:{gesture:"swipe",animateDirect:false},onGesture:function(d){var c=this,b=c.getChart(),a=c.getSeries();if(a){if(b.getAnimate()&&!c.getAnimateDirect()){if(!c.locked){c.lock();if(a.stacked){a.disjointStacked=true;c.afterAnim(a,function(){a.stacked=a.disjointStacked=false;c.afterAnim(a,c.unlock);b.redraw()});a.drawSeries()}else{a.stacked=a.disjointStacked=true;c.afterAnim(a,function(){a.disjointStacked=false;c.afterAnim(a,c.unlock);a.drawSeries()});b.redraw()}}}else{a.stacked=!a.stacked;b.redraw()}}},lock:function(){this.locked=true},unlock:function(){this.locked=false},afterAnim:function(a,b){var c=function(){b.apply(this,arguments);a.un("afterrender",c)};a.on("afterrender",c,this,{single:true,delay:1})},getSeries:function(){return this.getChart().getSeries().findBy(function(a){return a.type==="bar"||a.type==="column"})}},function(){Ext.chart.interactions.Manager.registerType("togglestacked",Ext.chart.interactions.ToggleStacked)});